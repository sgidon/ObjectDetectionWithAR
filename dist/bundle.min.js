!function t(e,r,n){function o(i,s){if(!r[i]){if(!e[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(a)return a(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[i]={exports:{}};e[i][0].call(l.exports,function(t){var r=e[i][1][t];return o(r||t)},l,l.exports,t,e,r,n)}return r[i].exports}for(var a="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(t,e,r){"use strict";t("babel-polyfill");var n=t("deeplearn-squeezenet"),o=t("deeplearn"),a=1,i=227,s=void 0,u=void 0,c=void 0,l=void 0,p=void 0,h=document.getElementById("mark"),f=document.getElementById("info"),d=document.getElementById("scene"),m=document.getElementById("textGroup"),g=d.canvas,v=document.createElement("canvas");v.width=i,v.height=i,window.addEventListener("click",function(t){if("green"===h.getAttribute("color")){f.innerHTML="検知中...";var e=g.width>g.height?g.height/i|0:g.width/i|0,r=(g.width-i)/2|0,n=(g.height-i)/2|0;v.getContext("2d").drawImage(g,r,n,i*e,i*e,0,0,i,i),function(){var t=this;s.scope(function(){var e,r,n,i,s,u,c,p,d,g,y,_,b;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=performance.now(),r=h.getAttribute("position"),n=o.fromPixels(v,3),i=l.predictWithActivation(n,"conv10"),t.next=6,regeneratorRuntime.awrap(l.getTopKClasses(i.logits,a));case 6:s=t.sent,u=performance.now(),c=Math.floor(1e3*(u-e))/1e3,console.log("elapsed: "+c),p=0,d="",g=void 0,t.t0=regeneratorRuntime.keys(s);case 14:if((t.t1=t.t0()).done){t.next=27;break}if((y=t.t1.value)in s){t.next=19;break}return p++,t.abrupt("continue",14);case 19:return g=y.split(",")[0],d=(Math.floor(1e3*s[y])/1e3).toString(),console.log("class"+p+": "+y),console.log("prob"+p+": "+d),p++,t.abrupt("break",27);case 27:console.log("str: "+g),f.innerHTML="「"+g+"」を検知しました。("+c+"msec)",(_=document.createElement("a-entity")).setAttribute("mixin","text"),_.setAttribute("position",r),_.setAttribute("text","value:"+g),(b=document.createElement("a-animation")).setAttribute("mixin","textAnime"),_.appendChild(b),m.appendChild(_);case 37:case"end":return t.stop()}},null,t)})}()}else f.innerHTML="tracking lost. もう一度実行してください"},!1),function(){var t;regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return p=document.getElementById("inference-canvas"),t=o.gpgpu_util.createWebGLContext(p),c=new o.GPGPUContext(t),u=new o.MathBackendWebGL(c),s=new o.NDArrayMath(u,!1),o.ENV.setMath(s),l=new n.SqueezeNet(s),e.next=10,regeneratorRuntime.awrap(Promise.all([l.load()]));case 10:case"end":return e.stop()}},null,this)}()},{"babel-polyfill":2,deeplearn:371,"deeplearn-squeezenet":328}],2:[function(t,e,r){(function(e){"use strict";if(t("core-js/shim"),t("regenerator-runtime/runtime"),t("core-js/fn/regexp/escape"),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var r="defineProperty";function n(t,e,n){t[e]||Object[r](t,e,{writable:!0,configurable:!0,value:n})}n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&n(Array,t,Function.call.bind([][t]))})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"core-js/fn/regexp/escape":4,"core-js/shim":326,"regenerator-runtime/runtime":450}],3:[function(t,e,r){},{}],4:[function(t,e,r){t("../../modules/core.regexp.escape"),e.exports=t("../../modules/_core").RegExp.escape},{"../../modules/_core":25,"../../modules/core.regexp.escape":129}],5:[function(t,e,r){e.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},{}],6:[function(t,e,r){var n=t("./_cof");e.exports=function(t,e){if("number"!=typeof t&&"Number"!=n(t))throw TypeError(e);return+t}},{"./_cof":20}],7:[function(t,e,r){var n=t("./_wks")("unscopables"),o=Array.prototype;null==o[n]&&t("./_hide")(o,n,{}),e.exports=function(t){o[n][t]=!0}},{"./_hide":44,"./_wks":127}],8:[function(t,e,r){e.exports=function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!");return t}},{}],9:[function(t,e,r){var n=t("./_is-object");e.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},{"./_is-object":53}],10:[function(t,e,r){"use strict";var n=t("./_to-object"),o=t("./_to-absolute-index"),a=t("./_to-length");e.exports=[].copyWithin||function(t,e){var r=n(this),i=a(r.length),s=o(t,i),u=o(e,i),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?i:o(c,i))-u,i-s),p=1;for(u<s&&s<u+l&&(p=-1,u+=l-1,s+=l-1);l-- >0;)u in r?r[s]=r[u]:delete r[s],s+=p,u+=p;return r}},{"./_to-absolute-index":113,"./_to-length":117,"./_to-object":118}],11:[function(t,e,r){"use strict";var n=t("./_to-object"),o=t("./_to-absolute-index"),a=t("./_to-length");e.exports=function(t){for(var e=n(this),r=a(e.length),i=arguments.length,s=o(i>1?arguments[1]:void 0,r),u=i>2?arguments[2]:void 0,c=void 0===u?r:o(u,r);c>s;)e[s++]=t;return e}},{"./_to-absolute-index":113,"./_to-length":117,"./_to-object":118}],12:[function(t,e,r){var n=t("./_for-of");e.exports=function(t,e){var r=[];return n(t,!1,r.push,r,e),r}},{"./_for-of":41}],13:[function(t,e,r){var n=t("./_to-iobject"),o=t("./_to-length"),a=t("./_to-absolute-index");e.exports=function(t){return function(e,r,i){var s,u=n(e),c=o(u.length),l=a(i,c);if(t&&r!=r){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===r)return t||l||0;return!t&&-1}}},{"./_to-absolute-index":113,"./_to-iobject":116,"./_to-length":117}],14:[function(t,e,r){var n=t("./_ctx"),o=t("./_iobject"),a=t("./_to-object"),i=t("./_to-length"),s=t("./_array-species-create");e.exports=function(t,e){var r=1==t,u=2==t,c=3==t,l=4==t,p=6==t,h=5==t||p,f=e||s;return function(e,s,d){for(var m,g,v=a(e),y=o(v),_=n(s,d,3),b=i(y.length),x=0,w=r?f(e,b):u?f(e,0):void 0;b>x;x++)if((h||x in y)&&(g=_(m=y[x],x,v),t))if(r)w[x]=g;else if(g)switch(t){case 3:return!0;case 5:return m;case 6:return x;case 2:w.push(m)}else if(l)return!1;return p?-1:c||l?l:w}}},{"./_array-species-create":17,"./_ctx":27,"./_iobject":49,"./_to-length":117,"./_to-object":118}],15:[function(t,e,r){var n=t("./_a-function"),o=t("./_to-object"),a=t("./_iobject"),i=t("./_to-length");e.exports=function(t,e,r,s,u){n(e);var c=o(t),l=a(c),p=i(c.length),h=u?p-1:0,f=u?-1:1;if(r<2)for(;;){if(h in l){s=l[h],h+=f;break}if(h+=f,u?h<0:p<=h)throw TypeError("Reduce of empty array with no initial value")}for(;u?h>=0:p>h;h+=f)h in l&&(s=e(s,l[h],h,c));return s}},{"./_a-function":5,"./_iobject":49,"./_to-length":117,"./_to-object":118}],16:[function(t,e,r){var n=t("./_is-object"),o=t("./_is-array"),a=t("./_wks")("species");e.exports=function(t){var e;return o(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!o(e.prototype)||(e=void 0),n(e)&&null===(e=e[a])&&(e=void 0)),void 0===e?Array:e}},{"./_is-array":51,"./_is-object":53,"./_wks":127}],17:[function(t,e,r){var n=t("./_array-species-constructor");e.exports=function(t,e){return new(n(t))(e)}},{"./_array-species-constructor":16}],18:[function(t,e,r){"use strict";var n=t("./_a-function"),o=t("./_is-object"),a=t("./_invoke"),i=[].slice,s={};e.exports=Function.bind||function(t){var e=n(this),r=i.call(arguments,1),u=function(){var n=r.concat(i.call(arguments));return this instanceof u?function(t,e,r){if(!(e in s)){for(var n=[],o=0;o<e;o++)n[o]="a["+o+"]";s[e]=Function("F,a","return new F("+n.join(",")+")")}return s[e](t,r)}(e,n.length,n):a(e,n,t)};return o(e.prototype)&&(u.prototype=e.prototype),u}},{"./_a-function":5,"./_invoke":48,"./_is-object":53}],19:[function(t,e,r){var n=t("./_cof"),o=t("./_wks")("toStringTag"),a="Arguments"==n(function(){return arguments}());e.exports=function(t){var e,r,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?r:a?n(e):"Object"==(i=n(e))&&"function"==typeof e.callee?"Arguments":i}},{"./_cof":20,"./_wks":127}],20:[function(t,e,r){var n={}.toString;e.exports=function(t){return n.call(t).slice(8,-1)}},{}],21:[function(t,e,r){"use strict";var n=t("./_object-dp").f,o=t("./_object-create"),a=t("./_redefine-all"),i=t("./_ctx"),s=t("./_an-instance"),u=t("./_for-of"),c=t("./_iter-define"),l=t("./_iter-step"),p=t("./_set-species"),h=t("./_descriptors"),f=t("./_meta").fastKey,d=t("./_validate-collection"),m=h?"_s":"size",g=function(t,e){var r,n=f(e);if("F"!==n)return t._i[n];for(r=t._f;r;r=r.n)if(r.k==e)return r};e.exports={getConstructor:function(t,e,r,c){var l=t(function(t,n){s(t,l,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[m]=0,null!=n&&u(n,r,t[c],t)});return a(l.prototype,{clear:function(){for(var t=d(this,e),r=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];t._f=t._l=void 0,t[m]=0},delete:function(t){var r=d(this,e),n=g(r,t);if(n){var o=n.n,a=n.p;delete r._i[n.i],n.r=!0,a&&(a.n=o),o&&(o.p=a),r._f==n&&(r._f=o),r._l==n&&(r._l=a),r[m]--}return!!n},forEach:function(t){d(this,e);for(var r,n=i(t,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(t){return!!g(d(this,e),t)}}),h&&n(l.prototype,"size",{get:function(){return d(this,e)[m]}}),l},def:function(t,e,r){var n,o,a=g(t,e);return a?a.v=r:(t._l=a={i:o=f(e,!0),k:e,v:r,p:n=t._l,n:void 0,r:!1},t._f||(t._f=a),n&&(n.n=a),t[m]++,"F"!==o&&(t._i[o]=a)),t},getEntry:g,setStrong:function(t,e,r){c(t,e,function(t,r){this._t=d(t,e),this._k=r,this._l=void 0},function(){for(var t=this,e=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?l(0,"keys"==e?r.k:"values"==e?r.v:[r.k,r.v]):(t._t=void 0,l(1))},r?"entries":"values",!r,!0),p(e)}}},{"./_an-instance":8,"./_ctx":27,"./_descriptors":31,"./_for-of":41,"./_iter-define":57,"./_iter-step":59,"./_meta":67,"./_object-create":72,"./_object-dp":73,"./_redefine-all":92,"./_set-species":99,"./_validate-collection":124}],22:[function(t,e,r){var n=t("./_classof"),o=t("./_array-from-iterable");e.exports=function(t){return function(){if(n(this)!=t)throw TypeError(t+"#toJSON isn't generic");return o(this)}}},{"./_array-from-iterable":12,"./_classof":19}],23:[function(t,e,r){"use strict";var n=t("./_redefine-all"),o=t("./_meta").getWeak,a=t("./_an-object"),i=t("./_is-object"),s=t("./_an-instance"),u=t("./_for-of"),c=t("./_array-methods"),l=t("./_has"),p=t("./_validate-collection"),h=c(5),f=c(6),d=0,m=function(t){return t._l||(t._l=new g)},g=function(){this.a=[]},v=function(t,e){return h(t.a,function(t){return t[0]===e})};g.prototype={get:function(t){var e=v(this,t);if(e)return e[1]},has:function(t){return!!v(this,t)},set:function(t,e){var r=v(this,t);r?r[1]=e:this.a.push([t,e])},delete:function(t){var e=f(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},e.exports={getConstructor:function(t,e,r,a){var c=t(function(t,n){s(t,c,e,"_i"),t._t=e,t._i=d++,t._l=void 0,null!=n&&u(n,r,t[a],t)});return n(c.prototype,{delete:function(t){if(!i(t))return!1;var r=o(t);return!0===r?m(p(this,e)).delete(t):r&&l(r,this._i)&&delete r[this._i]},has:function(t){if(!i(t))return!1;var r=o(t);return!0===r?m(p(this,e)).has(t):r&&l(r,this._i)}}),c},def:function(t,e,r){var n=o(a(e),!0);return!0===n?m(t).set(e,r):n[t._i]=r,t},ufstore:m}},{"./_an-instance":8,"./_an-object":9,"./_array-methods":14,"./_for-of":41,"./_has":43,"./_is-object":53,"./_meta":67,"./_redefine-all":92,"./_validate-collection":124}],24:[function(t,e,r){"use strict";var n=t("./_global"),o=t("./_export"),a=t("./_redefine"),i=t("./_redefine-all"),s=t("./_meta"),u=t("./_for-of"),c=t("./_an-instance"),l=t("./_is-object"),p=t("./_fails"),h=t("./_iter-detect"),f=t("./_set-to-string-tag"),d=t("./_inherit-if-required");e.exports=function(t,e,r,m,g,v){var y=n[t],_=y,b=g?"set":"add",x=_&&_.prototype,w={},E=function(t){var e=x[t];a(x,t,"delete"==t?function(t){return!(v&&!l(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,r){return e.call(this,0===t?0:t,r),this})};if("function"==typeof _&&(v||x.forEach&&!p(function(){(new _).entries().next()}))){var k=new _,S=k[b](v?{}:-0,1)!=k,A=p(function(){k.has(1)}),O=h(function(t){new _(t)}),T=!v&&p(function(){for(var t=new _,e=5;e--;)t[b](e,e);return!t.has(-0)});O||((_=e(function(e,r){c(e,_,t);var n=d(new y,e,_);return null!=r&&u(r,g,n[b],n),n})).prototype=x,x.constructor=_),(A||T)&&(E("delete"),E("has"),g&&E("get")),(T||S)&&E(b),v&&x.clear&&delete x.clear}else _=m.getConstructor(e,t,g,b),i(_.prototype,r),s.NEED=!0;return f(_,t),w[t]=_,o(o.G+o.W+o.F*(_!=y),w),v||m.setStrong(_,t,g),_}},{"./_an-instance":8,"./_export":35,"./_fails":37,"./_for-of":41,"./_global":42,"./_inherit-if-required":47,"./_is-object":53,"./_iter-detect":58,"./_meta":67,"./_redefine":93,"./_redefine-all":92,"./_set-to-string-tag":100}],25:[function(t,e,r){var n=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},{}],26:[function(t,e,r){"use strict";var n=t("./_object-dp"),o=t("./_property-desc");e.exports=function(t,e,r){e in t?n.f(t,e,o(0,r)):t[e]=r}},{"./_object-dp":73,"./_property-desc":91}],27:[function(t,e,r){var n=t("./_a-function");e.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}}},{"./_a-function":5}],28:[function(t,e,r){"use strict";var n=t("./_fails"),o=Date.prototype.getTime,a=Date.prototype.toISOString,i=function(t){return t>9?t:"0"+t};e.exports=n(function(){return"0385-07-25T07:06:39.999Z"!=a.call(new Date(-5e13-1))})||!n(function(){a.call(new Date(NaN))})?function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),r=t.getUTCMilliseconds(),n=e<0?"-":e>9999?"+":"";return n+("00000"+Math.abs(e)).slice(n?-6:-4)+"-"+i(t.getUTCMonth()+1)+"-"+i(t.getUTCDate())+"T"+i(t.getUTCHours())+":"+i(t.getUTCMinutes())+":"+i(t.getUTCSeconds())+"."+(r>99?r:"0"+i(r))+"Z"}:a},{"./_fails":37}],29:[function(t,e,r){"use strict";var n=t("./_an-object"),o=t("./_to-primitive");e.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return o(n(this),"number"!=t)}},{"./_an-object":9,"./_to-primitive":119}],30:[function(t,e,r){e.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},{}],31:[function(t,e,r){e.exports=!t("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":37}],32:[function(t,e,r){var n=t("./_is-object"),o=t("./_global").document,a=n(o)&&n(o.createElement);e.exports=function(t){return a?o.createElement(t):{}}},{"./_global":42,"./_is-object":53}],33:[function(t,e,r){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],34:[function(t,e,r){var n=t("./_object-keys"),o=t("./_object-gops"),a=t("./_object-pie");e.exports=function(t){var e=n(t),r=o.f;if(r)for(var i,s=r(t),u=a.f,c=0;s.length>c;)u.call(t,i=s[c++])&&e.push(i);return e}},{"./_object-gops":79,"./_object-keys":82,"./_object-pie":83}],35:[function(t,e,r){var n=t("./_global"),o=t("./_core"),a=t("./_hide"),i=t("./_redefine"),s=t("./_ctx"),u="prototype",c=function(t,e,r){var l,p,h,f,d=t&c.F,m=t&c.G,g=t&c.S,v=t&c.P,y=t&c.B,_=m?n:g?n[e]||(n[e]={}):(n[e]||{})[u],b=m?o:o[e]||(o[e]={}),x=b[u]||(b[u]={});for(l in m&&(r=e),r)h=((p=!d&&_&&void 0!==_[l])?_:r)[l],f=y&&p?s(h,n):v&&"function"==typeof h?s(Function.call,h):h,_&&i(_,l,h,t&c.U),b[l]!=h&&a(b,l,f),v&&x[l]!=h&&(x[l]=h)};n.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},{"./_core":25,"./_ctx":27,"./_global":42,"./_hide":44,"./_redefine":93}],36:[function(t,e,r){var n=t("./_wks")("match");e.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,!"/./"[t](e)}catch(t){}}return!0}},{"./_wks":127}],37:[function(t,e,r){e.exports=function(t){try{return!!t()}catch(t){return!0}}},{}],38:[function(t,e,r){"use strict";var n=t("./_hide"),o=t("./_redefine"),a=t("./_fails"),i=t("./_defined"),s=t("./_wks");e.exports=function(t,e,r){var u=s(t),c=r(i,u,""[t]),l=c[0],p=c[1];a(function(){var e={};return e[u]=function(){return 7},7!=""[t](e)})&&(o(String.prototype,t,l),n(RegExp.prototype,u,2==e?function(t,e){return p.call(t,this,e)}:function(t){return p.call(t,this)}))}},{"./_defined":30,"./_fails":37,"./_hide":44,"./_redefine":93,"./_wks":127}],39:[function(t,e,r){"use strict";var n=t("./_an-object");e.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},{"./_an-object":9}],40:[function(t,e,r){"use strict";var n=t("./_is-array"),o=t("./_is-object"),a=t("./_to-length"),i=t("./_ctx"),s=t("./_wks")("isConcatSpreadable");e.exports=function t(e,r,u,c,l,p,h,f){for(var d,m,g=l,v=0,y=!!h&&i(h,f,3);v<c;){if(v in u){if(d=y?y(u[v],v,r):u[v],m=!1,o(d)&&(m=void 0!==(m=d[s])?!!m:n(d)),m&&p>0)g=t(e,r,d,a(d.length),g,p-1)-1;else{if(g>=9007199254740991)throw TypeError();e[g]=d}g++}v++}return g}},{"./_ctx":27,"./_is-array":51,"./_is-object":53,"./_to-length":117,"./_wks":127}],41:[function(t,e,r){var n=t("./_ctx"),o=t("./_iter-call"),a=t("./_is-array-iter"),i=t("./_an-object"),s=t("./_to-length"),u=t("./core.get-iterator-method"),c={},l={};(r=e.exports=function(t,e,r,p,h){var f,d,m,g,v=h?function(){return t}:u(t),y=n(r,p,e?2:1),_=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(a(v)){for(f=s(t.length);f>_;_++)if((g=e?y(i(d=t[_])[0],d[1]):y(t[_]))===c||g===l)return g}else for(m=v.call(t);!(d=m.next()).done;)if((g=o(m,y,d.value,e))===c||g===l)return g}).BREAK=c,r.RETURN=l},{"./_an-object":9,"./_ctx":27,"./_is-array-iter":50,"./_iter-call":55,"./_to-length":117,"./core.get-iterator-method":128}],42:[function(t,e,r){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],43:[function(t,e,r){var n={}.hasOwnProperty;e.exports=function(t,e){return n.call(t,e)}},{}],44:[function(t,e,r){var n=t("./_object-dp"),o=t("./_property-desc");e.exports=t("./_descriptors")?function(t,e,r){return n.f(t,e,o(1,r))}:function(t,e,r){return t[e]=r,t}},{"./_descriptors":31,"./_object-dp":73,"./_property-desc":91}],45:[function(t,e,r){var n=t("./_global").document;e.exports=n&&n.documentElement},{"./_global":42}],46:[function(t,e,r){e.exports=!t("./_descriptors")&&!t("./_fails")(function(){return 7!=Object.defineProperty(t("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":31,"./_dom-create":32,"./_fails":37}],47:[function(t,e,r){var n=t("./_is-object"),o=t("./_set-proto").set;e.exports=function(t,e,r){var a,i=e.constructor;return i!==r&&"function"==typeof i&&(a=i.prototype)!==r.prototype&&n(a)&&o&&o(t,a),t}},{"./_is-object":53,"./_set-proto":98}],48:[function(t,e,r){e.exports=function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},{}],49:[function(t,e,r){var n=t("./_cof");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},{"./_cof":20}],50:[function(t,e,r){var n=t("./_iterators"),o=t("./_wks")("iterator"),a=Array.prototype;e.exports=function(t){return void 0!==t&&(n.Array===t||a[o]===t)}},{"./_iterators":60,"./_wks":127}],51:[function(t,e,r){var n=t("./_cof");e.exports=Array.isArray||function(t){return"Array"==n(t)}},{"./_cof":20}],52:[function(t,e,r){var n=t("./_is-object"),o=Math.floor;e.exports=function(t){return!n(t)&&isFinite(t)&&o(t)===t}},{"./_is-object":53}],53:[function(t,e,r){e.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},{}],54:[function(t,e,r){var n=t("./_is-object"),o=t("./_cof"),a=t("./_wks")("match");e.exports=function(t){var e;return n(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==o(t))}},{"./_cof":20,"./_is-object":53,"./_wks":127}],55:[function(t,e,r){var n=t("./_an-object");e.exports=function(t,e,r,o){try{return o?e(n(r)[0],r[1]):e(r)}catch(e){var a=t.return;throw void 0!==a&&n(a.call(t)),e}}},{"./_an-object":9}],56:[function(t,e,r){"use strict";var n=t("./_object-create"),o=t("./_property-desc"),a=t("./_set-to-string-tag"),i={};t("./_hide")(i,t("./_wks")("iterator"),function(){return this}),e.exports=function(t,e,r){t.prototype=n(i,{next:o(1,r)}),a(t,e+" Iterator")}},{"./_hide":44,"./_object-create":72,"./_property-desc":91,"./_set-to-string-tag":100,"./_wks":127}],57:[function(t,e,r){"use strict";var n=t("./_library"),o=t("./_export"),a=t("./_redefine"),i=t("./_hide"),s=t("./_has"),u=t("./_iterators"),c=t("./_iter-create"),l=t("./_set-to-string-tag"),p=t("./_object-gpo"),h=t("./_wks")("iterator"),f=!([].keys&&"next"in[].keys()),d="values",m=function(){return this};e.exports=function(t,e,r,g,v,y,_){c(r,e,g);var b,x,w,E=function(t){if(!f&&t in O)return O[t];switch(t){case"keys":case d:return function(){return new r(this,t)}}return function(){return new r(this,t)}},k=e+" Iterator",S=v==d,A=!1,O=t.prototype,T=O[h]||O["@@iterator"]||v&&O[v],N=T||E(v),D=v?S?E("entries"):N:void 0,M="Array"==e&&O.entries||T;if(M&&(w=p(M.call(new t)))!==Object.prototype&&w.next&&(l(w,k,!0),n||s(w,h)||i(w,h,m)),S&&T&&T.name!==d&&(A=!0,N=function(){return T.call(this)}),n&&!_||!f&&!A&&O[h]||i(O,h,N),u[e]=N,u[k]=m,v)if(b={values:S?N:E(d),keys:y?N:E("keys"),entries:D},_)for(x in b)x in O||a(O,x,b[x]);else o(o.P+o.F*(f||A),e,b);return b}},{"./_export":35,"./_has":43,"./_hide":44,"./_iter-create":56,"./_iterators":60,"./_library":61,"./_object-gpo":80,"./_redefine":93,"./_set-to-string-tag":100,"./_wks":127}],58:[function(t,e,r){var n=t("./_wks")("iterator"),o=!1;try{var a=[7][n]();a.return=function(){o=!0},Array.from(a,function(){throw 2})}catch(t){}e.exports=function(t,e){if(!e&&!o)return!1;var r=!1;try{var a=[7],i=a[n]();i.next=function(){return{done:r=!0}},a[n]=function(){return i},t(a)}catch(t){}return r}},{"./_wks":127}],59:[function(t,e,r){e.exports=function(t,e){return{value:e,done:!!t}}},{}],60:[function(t,e,r){e.exports={}},{}],61:[function(t,e,r){e.exports=!1},{}],62:[function(t,e,r){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},{}],63:[function(t,e,r){var n=t("./_math-sign"),o=Math.pow,a=o(2,-52),i=o(2,-23),s=o(2,127)*(2-i),u=o(2,-126);e.exports=Math.fround||function(t){var e,r,o=Math.abs(t),c=n(t);return o<u?c*(o/u/i+1/a-1/a)*u*i:(r=(e=(1+i/a)*o)-(e-o))>s||r!=r?c*(1/0):c*r}},{"./_math-sign":66}],64:[function(t,e,r){e.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},{}],65:[function(t,e,r){e.exports=Math.scale||function(t,e,r,n,o){return 0===arguments.length||t!=t||e!=e||r!=r||n!=n||o!=o?NaN:t===1/0||t===-1/0?t:(t-e)*(o-n)/(r-e)+n}},{}],66:[function(t,e,r){e.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},{}],67:[function(t,e,r){var n=t("./_uid")("meta"),o=t("./_is-object"),a=t("./_has"),i=t("./_object-dp").f,s=0,u=Object.isExtensible||function(){return!0},c=!t("./_fails")(function(){return u(Object.preventExtensions({}))}),l=function(t){i(t,n,{value:{i:"O"+ ++s,w:{}}})},p=e.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,n)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[n].i},getWeak:function(t,e){if(!a(t,n)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[n].w},onFreeze:function(t){return c&&p.NEED&&u(t)&&!a(t,n)&&l(t),t}}},{"./_fails":37,"./_has":43,"./_is-object":53,"./_object-dp":73,"./_uid":123}],68:[function(t,e,r){var n=t("./es6.map"),o=t("./_export"),a=t("./_shared")("metadata"),i=a.store||(a.store=new(t("./es6.weak-map"))),s=function(t,e,r){var o=i.get(t);if(!o){if(!r)return;i.set(t,o=new n)}var a=o.get(e);if(!a){if(!r)return;o.set(e,a=new n)}return a};e.exports={store:i,map:s,has:function(t,e,r){var n=s(e,r,!1);return void 0!==n&&n.has(t)},get:function(t,e,r){var n=s(e,r,!1);return void 0===n?void 0:n.get(t)},set:function(t,e,r,n){s(r,n,!0).set(t,e)},keys:function(t,e){var r=s(t,e,!1),n=[];return r&&r.forEach(function(t,e){n.push(e)}),n},key:function(t){return void 0===t||"symbol"==typeof t?t:String(t)},exp:function(t){o(o.S,"Reflect",t)}}},{"./_export":35,"./_shared":102,"./es6.map":159,"./es6.weak-map":265}],69:[function(t,e,r){var n=t("./_global"),o=t("./_task").set,a=n.MutationObserver||n.WebKitMutationObserver,i=n.process,s=n.Promise,u="process"==t("./_cof")(i);e.exports=function(){var t,e,r,c=function(){var n,o;for(u&&(n=i.domain)&&n.exit();t;){o=t.fn,t=t.next;try{o()}catch(n){throw t?r():e=void 0,n}}e=void 0,n&&n.enter()};if(u)r=function(){i.nextTick(c)};else if(a){var l=!0,p=document.createTextNode("");new a(c).observe(p,{characterData:!0}),r=function(){p.data=l=!l}}else if(s&&s.resolve){var h=s.resolve();r=function(){h.then(c)}}else r=function(){o.call(n,c)};return function(n){var o={fn:n,next:void 0};e&&(e.next=o),t||(t=o,r()),e=o}}},{"./_cof":20,"./_global":42,"./_task":112}],70:[function(t,e,r){"use strict";var n=t("./_a-function");e.exports.f=function(t){return new function(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n}),this.resolve=n(e),this.reject=n(r)}(t)}},{"./_a-function":5}],71:[function(t,e,r){"use strict";var n=t("./_object-keys"),o=t("./_object-gops"),a=t("./_object-pie"),i=t("./_to-object"),s=t("./_iobject"),u=Object.assign;e.exports=!u||t("./_fails")(function(){var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(t){e[t]=t}),7!=u({},t)[r]||Object.keys(u({},e)).join("")!=n})?function(t,e){for(var r=i(t),u=arguments.length,c=1,l=o.f,p=a.f;u>c;)for(var h,f=s(arguments[c++]),d=l?n(f).concat(l(f)):n(f),m=d.length,g=0;m>g;)p.call(f,h=d[g++])&&(r[h]=f[h]);return r}:u},{"./_fails":37,"./_iobject":49,"./_object-gops":79,"./_object-keys":82,"./_object-pie":83,"./_to-object":118}],72:[function(t,e,r){var n=t("./_an-object"),o=t("./_object-dps"),a=t("./_enum-bug-keys"),i=t("./_shared-key")("IE_PROTO"),s=function(){},u="prototype",c=function(){var e,r=t("./_dom-create")("iframe"),n=a.length;for(r.style.display="none",t("./_html").appendChild(r),r.src="javascript:",(e=r.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;n--;)delete c[u][a[n]];return c()};e.exports=Object.create||function(t,e){var r;return null!==t?(s[u]=n(t),r=new s,s[u]=null,r[i]=t):r=c(),void 0===e?r:o(r,e)}},{"./_an-object":9,"./_dom-create":32,"./_enum-bug-keys":33,"./_html":45,"./_object-dps":74,"./_shared-key":101}],73:[function(t,e,r){var n=t("./_an-object"),o=t("./_ie8-dom-define"),a=t("./_to-primitive"),i=Object.defineProperty;r.f=t("./_descriptors")?Object.defineProperty:function(t,e,r){if(n(t),e=a(e,!0),n(r),o)try{return i(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},{"./_an-object":9,"./_descriptors":31,"./_ie8-dom-define":46,"./_to-primitive":119}],74:[function(t,e,r){var n=t("./_object-dp"),o=t("./_an-object"),a=t("./_object-keys");e.exports=t("./_descriptors")?Object.defineProperties:function(t,e){o(t);for(var r,i=a(e),s=i.length,u=0;s>u;)n.f(t,r=i[u++],e[r]);return t}},{"./_an-object":9,"./_descriptors":31,"./_object-dp":73,"./_object-keys":82}],75:[function(t,e,r){"use strict";e.exports=t("./_library")||!t("./_fails")(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete t("./_global")[e]})},{"./_fails":37,"./_global":42,"./_library":61}],76:[function(t,e,r){var n=t("./_object-pie"),o=t("./_property-desc"),a=t("./_to-iobject"),i=t("./_to-primitive"),s=t("./_has"),u=t("./_ie8-dom-define"),c=Object.getOwnPropertyDescriptor;r.f=t("./_descriptors")?c:function(t,e){if(t=a(t),e=i(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return o(!n.f.call(t,e),t[e])}},{"./_descriptors":31,"./_has":43,"./_ie8-dom-define":46,"./_object-pie":83,"./_property-desc":91,"./_to-iobject":116,"./_to-primitive":119}],77:[function(t,e,r){var n=t("./_to-iobject"),o=t("./_object-gopn").f,a={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(t){return i&&"[object Window]"==a.call(t)?function(t){try{return o(t)}catch(t){return i.slice()}}(t):o(n(t))}},{"./_object-gopn":78,"./_to-iobject":116}],78:[function(t,e,r){var n=t("./_object-keys-internal"),o=t("./_enum-bug-keys").concat("length","prototype");r.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},{"./_enum-bug-keys":33,"./_object-keys-internal":81}],79:[function(t,e,r){r.f=Object.getOwnPropertySymbols},{}],80:[function(t,e,r){var n=t("./_has"),o=t("./_to-object"),a=t("./_shared-key")("IE_PROTO"),i=Object.prototype;e.exports=Object.getPrototypeOf||function(t){return t=o(t),n(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?i:null}},{"./_has":43,"./_shared-key":101,"./_to-object":118}],81:[function(t,e,r){var n=t("./_has"),o=t("./_to-iobject"),a=t("./_array-includes")(!1),i=t("./_shared-key")("IE_PROTO");e.exports=function(t,e){var r,s=o(t),u=0,c=[];for(r in s)r!=i&&n(s,r)&&c.push(r);for(;e.length>u;)n(s,r=e[u++])&&(~a(c,r)||c.push(r));return c}},{"./_array-includes":13,"./_has":43,"./_shared-key":101,"./_to-iobject":116}],82:[function(t,e,r){var n=t("./_object-keys-internal"),o=t("./_enum-bug-keys");e.exports=Object.keys||function(t){return n(t,o)}},{"./_enum-bug-keys":33,"./_object-keys-internal":81}],83:[function(t,e,r){r.f={}.propertyIsEnumerable},{}],84:[function(t,e,r){var n=t("./_export"),o=t("./_core"),a=t("./_fails");e.exports=function(t,e){var r=(o.Object||{})[t]||Object[t],i={};i[t]=e(r),n(n.S+n.F*a(function(){r(1)}),"Object",i)}},{"./_core":25,"./_export":35,"./_fails":37}],85:[function(t,e,r){var n=t("./_object-keys"),o=t("./_to-iobject"),a=t("./_object-pie").f;e.exports=function(t){return function(e){for(var r,i=o(e),s=n(i),u=s.length,c=0,l=[];u>c;)a.call(i,r=s[c++])&&l.push(t?[r,i[r]]:i[r]);return l}}},{"./_object-keys":82,"./_object-pie":83,"./_to-iobject":116}],86:[function(t,e,r){var n=t("./_object-gopn"),o=t("./_object-gops"),a=t("./_an-object"),i=t("./_global").Reflect;e.exports=i&&i.ownKeys||function(t){var e=n.f(a(t)),r=o.f;return r?e.concat(r(t)):e}},{"./_an-object":9,"./_global":42,"./_object-gopn":78,"./_object-gops":79}],87:[function(t,e,r){var n=t("./_global").parseFloat,o=t("./_string-trim").trim;e.exports=1/n(t("./_string-ws")+"-0")!=-1/0?function(t){var e=o(String(t),3),r=n(e);return 0===r&&"-"==e.charAt(0)?-0:r}:n},{"./_global":42,"./_string-trim":110,"./_string-ws":111}],88:[function(t,e,r){var n=t("./_global").parseInt,o=t("./_string-trim").trim,a=t("./_string-ws"),i=/^[-+]?0[xX]/;e.exports=8!==n(a+"08")||22!==n(a+"0x16")?function(t,e){var r=o(String(t),3);return n(r,e>>>0||(i.test(r)?16:10))}:n},{"./_global":42,"./_string-trim":110,"./_string-ws":111}],89:[function(t,e,r){e.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},{}],90:[function(t,e,r){var n=t("./_an-object"),o=t("./_is-object"),a=t("./_new-promise-capability");e.exports=function(t,e){if(n(t),o(e)&&e.constructor===t)return e;var r=a.f(t);return(0,r.resolve)(e),r.promise}},{"./_an-object":9,"./_is-object":53,"./_new-promise-capability":70}],91:[function(t,e,r){e.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},{}],92:[function(t,e,r){var n=t("./_redefine");e.exports=function(t,e,r){for(var o in e)n(t,o,e[o],r);return t}},{"./_redefine":93}],93:[function(t,e,r){var n=t("./_global"),o=t("./_hide"),a=t("./_has"),i=t("./_uid")("src"),s="toString",u=Function[s],c=(""+u).split(s);t("./_core").inspectSource=function(t){return u.call(t)},(e.exports=function(t,e,r,s){var u="function"==typeof r;u&&(a(r,"name")||o(r,"name",e)),t[e]!==r&&(u&&(a(r,i)||o(r,i,t[e]?""+t[e]:c.join(String(e)))),t===n?t[e]=r:s?t[e]?t[e]=r:o(t,e,r):(delete t[e],o(t,e,r)))})(Function.prototype,s,function(){return"function"==typeof this&&this[i]||u.call(this)})},{"./_core":25,"./_global":42,"./_has":43,"./_hide":44,"./_uid":123}],94:[function(t,e,r){e.exports=function(t,e){var r=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,r)}}},{}],95:[function(t,e,r){e.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},{}],96:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_a-function"),a=t("./_ctx"),i=t("./_for-of");e.exports=function(t){n(n.S,t,{from:function(t){var e,r,n,s,u=arguments[1];return o(this),(e=void 0!==u)&&o(u),null==t?new this:(r=[],e?(n=0,s=a(u,arguments[2],2),i(t,!1,function(t){r.push(s(t,n++))})):i(t,!1,r.push,r),new this(r))}})}},{"./_a-function":5,"./_ctx":27,"./_export":35,"./_for-of":41}],97:[function(t,e,r){"use strict";var n=t("./_export");e.exports=function(t){n(n.S,t,{of:function(){for(var t=arguments.length,e=Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},{"./_export":35}],98:[function(t,e,r){var n=t("./_is-object"),o=t("./_an-object"),a=function(t,e){if(o(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,r,n){try{(n=t("./_ctx")(Function.call,t("./_object-gopd").f(Object.prototype,"__proto__").set,2))(e,[]),r=!(e instanceof Array)}catch(t){r=!0}return function(t,e){return a(t,e),r?t.__proto__=e:n(t,e),t}}({},!1):void 0),check:a}},{"./_an-object":9,"./_ctx":27,"./_is-object":53,"./_object-gopd":76}],99:[function(t,e,r){"use strict";var n=t("./_global"),o=t("./_object-dp"),a=t("./_descriptors"),i=t("./_wks")("species");e.exports=function(t){var e=n[t];a&&e&&!e[i]&&o.f(e,i,{configurable:!0,get:function(){return this}})}},{"./_descriptors":31,"./_global":42,"./_object-dp":73,"./_wks":127}],100:[function(t,e,r){var n=t("./_object-dp").f,o=t("./_has"),a=t("./_wks")("toStringTag");e.exports=function(t,e,r){t&&!o(t=r?t:t.prototype,a)&&n(t,a,{configurable:!0,value:e})}},{"./_has":43,"./_object-dp":73,"./_wks":127}],101:[function(t,e,r){var n=t("./_shared")("keys"),o=t("./_uid");e.exports=function(t){return n[t]||(n[t]=o(t))}},{"./_shared":102,"./_uid":123}],102:[function(t,e,r){var n=t("./_global"),o="__core-js_shared__",a=n[o]||(n[o]={});e.exports=function(t){return a[t]||(a[t]={})}},{"./_global":42}],103:[function(t,e,r){var n=t("./_an-object"),o=t("./_a-function"),a=t("./_wks")("species");e.exports=function(t,e){var r,i=n(t).constructor;return void 0===i||null==(r=n(i)[a])?e:o(r)}},{"./_a-function":5,"./_an-object":9,"./_wks":127}],104:[function(t,e,r){"use strict";var n=t("./_fails");e.exports=function(t,e){return!!t&&n(function(){e?t.call(null,function(){},1):t.call(null)})}},{"./_fails":37}],105:[function(t,e,r){var n=t("./_to-integer"),o=t("./_defined");e.exports=function(t){return function(e,r){var a,i,s=String(o(e)),u=n(r),c=s.length;return u<0||u>=c?t?"":void 0:(a=s.charCodeAt(u))<55296||a>56319||u+1===c||(i=s.charCodeAt(u+1))<56320||i>57343?t?s.charAt(u):a:t?s.slice(u,u+2):i-56320+(a-55296<<10)+65536}}},{"./_defined":30,"./_to-integer":115}],106:[function(t,e,r){var n=t("./_is-regexp"),o=t("./_defined");e.exports=function(t,e,r){if(n(e))throw TypeError("String#"+r+" doesn't accept regex!");return String(o(t))}},{"./_defined":30,"./_is-regexp":54}],107:[function(t,e,r){var n=t("./_export"),o=t("./_fails"),a=t("./_defined"),i=/"/g,s=function(t,e,r,n){var o=String(a(t)),s="<"+e;return""!==r&&(s+=" "+r+'="'+String(n).replace(i,"&quot;")+'"'),s+">"+o+"</"+e+">"};e.exports=function(t,e){var r={};r[t]=e(s),n(n.P+n.F*o(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",r)}},{"./_defined":30,"./_export":35,"./_fails":37}],108:[function(t,e,r){var n=t("./_to-length"),o=t("./_string-repeat"),a=t("./_defined");e.exports=function(t,e,r,i){var s=String(a(t)),u=s.length,c=void 0===r?" ":String(r),l=n(e);if(l<=u||""==c)return s;var p=l-u,h=o.call(c,Math.ceil(p/c.length));return h.length>p&&(h=h.slice(0,p)),i?h+s:s+h}},{"./_defined":30,"./_string-repeat":109,"./_to-length":117}],109:[function(t,e,r){"use strict";var n=t("./_to-integer"),o=t("./_defined");e.exports=function(t){var e=String(o(this)),r="",a=n(t);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(r+=e);return r}},{"./_defined":30,"./_to-integer":115}],110:[function(t,e,r){var n=t("./_export"),o=t("./_defined"),a=t("./_fails"),i=t("./_string-ws"),s="["+i+"]",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),l=function(t,e,r){var o={},s=a(function(){return!!i[t]()||"​"!="​"[t]()}),u=o[t]=s?e(p):i[t];r&&(o[r]=u),n(n.P+n.F*s,"String",o)},p=l.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};e.exports=l},{"./_defined":30,"./_export":35,"./_fails":37,"./_string-ws":111}],111:[function(t,e,r){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},{}],112:[function(t,e,r){var n,o,a,i=t("./_ctx"),s=t("./_invoke"),u=t("./_html"),c=t("./_dom-create"),l=t("./_global"),p=l.process,h=l.setImmediate,f=l.clearImmediate,d=l.MessageChannel,m=l.Dispatch,g=0,v={},y="onreadystatechange",_=function(){var t=+this;if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},b=function(t){_.call(t.data)};h&&f||(h=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return v[++g]=function(){s("function"==typeof t?t:Function(t),e)},n(g),g},f=function(t){delete v[t]},"process"==t("./_cof")(p)?n=function(t){p.nextTick(i(_,t,1))}:m&&m.now?n=function(t){m.now(i(_,t,1))}:d?(a=(o=new d).port2,o.port1.onmessage=b,n=i(a.postMessage,a,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(t){l.postMessage(t+"","*")},l.addEventListener("message",b,!1)):n=y in c("script")?function(t){u.appendChild(c("script"))[y]=function(){u.removeChild(this),_.call(t)}}:function(t){setTimeout(i(_,t,1),0)}),e.exports={set:h,clear:f}},{"./_cof":20,"./_ctx":27,"./_dom-create":32,"./_global":42,"./_html":45,"./_invoke":48}],113:[function(t,e,r){var n=t("./_to-integer"),o=Math.max,a=Math.min;e.exports=function(t,e){return(t=n(t))<0?o(t+e,0):a(t,e)}},{"./_to-integer":115}],114:[function(t,e,r){var n=t("./_to-integer"),o=t("./_to-length");e.exports=function(t){if(void 0===t)return 0;var e=n(t),r=o(e);if(e!==r)throw RangeError("Wrong length!");return r}},{"./_to-integer":115,"./_to-length":117}],115:[function(t,e,r){var n=Math.ceil,o=Math.floor;e.exports=function(t){return isNaN(t=+t)?0:(t>0?o:n)(t)}},{}],116:[function(t,e,r){var n=t("./_iobject"),o=t("./_defined");e.exports=function(t){return n(o(t))}},{"./_defined":30,"./_iobject":49}],117:[function(t,e,r){var n=t("./_to-integer"),o=Math.min;e.exports=function(t){return t>0?o(n(t),9007199254740991):0}},{"./_to-integer":115}],118:[function(t,e,r){var n=t("./_defined");e.exports=function(t){return Object(n(t))}},{"./_defined":30}],119:[function(t,e,r){var n=t("./_is-object");e.exports=function(t,e){if(!n(t))return t;var r,o;if(e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;if("function"==typeof(r=t.valueOf)&&!n(o=r.call(t)))return o;if(!e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":53}],120:[function(t,e,r){"use strict";if(t("./_descriptors")){var n=t("./_library"),o=t("./_global"),a=t("./_fails"),i=t("./_export"),s=t("./_typed"),u=t("./_typed-buffer"),c=t("./_ctx"),l=t("./_an-instance"),p=t("./_property-desc"),h=t("./_hide"),f=t("./_redefine-all"),d=t("./_to-integer"),m=t("./_to-length"),g=t("./_to-index"),v=t("./_to-absolute-index"),y=t("./_to-primitive"),_=t("./_has"),b=t("./_classof"),x=t("./_is-object"),w=t("./_to-object"),E=t("./_is-array-iter"),k=t("./_object-create"),S=t("./_object-gpo"),A=t("./_object-gopn").f,O=t("./core.get-iterator-method"),T=t("./_uid"),N=t("./_wks"),D=t("./_array-methods"),M=t("./_array-includes"),R=t("./_species-constructor"),P=t("./es6.array.iterator"),C=t("./_iterators"),I=t("./_iter-detect"),j=t("./_set-species"),z=t("./_array-fill"),F=t("./_array-copy-within"),L=t("./_object-dp"),B=t("./_object-gopd"),V=L.f,U=B.f,G=o.RangeError,q=o.TypeError,W=o.Uint8Array,X="ArrayBuffer",K="Shared"+X,H="BYTES_PER_ELEMENT",Y="prototype",Q=Array[Y],J=u.ArrayBuffer,Z=u.DataView,$=D(0),tt=D(2),et=D(3),rt=D(4),nt=D(5),ot=D(6),at=M(!0),it=M(!1),st=P.values,ut=P.keys,ct=P.entries,lt=Q.lastIndexOf,pt=Q.reduce,ht=Q.reduceRight,ft=Q.join,dt=Q.sort,mt=Q.slice,gt=Q.toString,vt=Q.toLocaleString,yt=N("iterator"),_t=N("toStringTag"),bt=T("typed_constructor"),xt=T("def_constructor"),wt=s.CONSTR,Et=s.TYPED,kt=s.VIEW,St="Wrong length!",At=D(1,function(t,e){return Mt(R(t,t[xt]),e)}),Ot=a(function(){return 1===new W(new Uint16Array([1]).buffer)[0]}),Tt=!!W&&!!W[Y].set&&a(function(){new W(1).set({})}),Nt=function(t,e){var r=d(t);if(r<0||r%e)throw G("Wrong offset!");return r},Dt=function(t){if(x(t)&&Et in t)return t;throw q(t+" is not a typed array!")},Mt=function(t,e){if(!(x(t)&&bt in t))throw q("It is not a typed array constructor!");return new t(e)},Rt=function(t,e){return Pt(R(t,t[xt]),e)},Pt=function(t,e){for(var r=0,n=e.length,o=Mt(t,n);n>r;)o[r]=e[r++];return o},Ct=function(t,e,r){V(t,e,{get:function(){return this._d[r]}})},It=function(t){var e,r,n,o,a,i,s=w(t),u=arguments.length,l=u>1?arguments[1]:void 0,p=void 0!==l,h=O(s);if(null!=h&&!E(h)){for(i=h.call(s),n=[],e=0;!(a=i.next()).done;e++)n.push(a.value);s=n}for(p&&u>2&&(l=c(l,arguments[2],2)),e=0,r=m(s.length),o=Mt(this,r);r>e;e++)o[e]=p?l(s[e],e):s[e];return o},jt=function(){for(var t=0,e=arguments.length,r=Mt(this,e);e>t;)r[t]=arguments[t++];return r},zt=!!W&&a(function(){vt.call(new W(1))}),Ft=function(){return vt.apply(zt?mt.call(Dt(this)):Dt(this),arguments)},Lt={copyWithin:function(t,e){return F.call(Dt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return rt(Dt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return z.apply(Dt(this),arguments)},filter:function(t){return Rt(this,tt(Dt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return nt(Dt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return ot(Dt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){$(Dt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return it(Dt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return at(Dt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ft.apply(Dt(this),arguments)},lastIndexOf:function(t){return lt.apply(Dt(this),arguments)},map:function(t){return At(Dt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return pt.apply(Dt(this),arguments)},reduceRight:function(t){return ht.apply(Dt(this),arguments)},reverse:function(){for(var t,e=this,r=Dt(e).length,n=Math.floor(r/2),o=0;o<n;)t=e[o],e[o++]=e[--r],e[r]=t;return e},some:function(t){return et(Dt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return dt.call(Dt(this),t)},subarray:function(t,e){var r=Dt(this),n=r.length,o=v(t,n);return new(R(r,r[xt]))(r.buffer,r.byteOffset+o*r.BYTES_PER_ELEMENT,m((void 0===e?n:v(e,n))-o))}},Bt=function(t,e){return Rt(this,mt.call(Dt(this),t,e))},Vt=function(t){Dt(this);var e=Nt(arguments[1],1),r=this.length,n=w(t),o=m(n.length),a=0;if(o+e>r)throw G(St);for(;a<o;)this[e+a]=n[a++]},Ut={entries:function(){return ct.call(Dt(this))},keys:function(){return ut.call(Dt(this))},values:function(){return st.call(Dt(this))}},Gt=function(t,e){return x(t)&&t[Et]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},qt=function(t,e){return Gt(t,e=y(e,!0))?p(2,t[e]):U(t,e)},Wt=function(t,e,r){return!(Gt(t,e=y(e,!0))&&x(r)&&_(r,"value"))||_(r,"get")||_(r,"set")||r.configurable||_(r,"writable")&&!r.writable||_(r,"enumerable")&&!r.enumerable?V(t,e,r):(t[e]=r.value,t)};wt||(B.f=qt,L.f=Wt),i(i.S+i.F*!wt,"Object",{getOwnPropertyDescriptor:qt,defineProperty:Wt}),a(function(){gt.call({})})&&(gt=vt=function(){return ft.call(this)});var Xt=f({},Lt);f(Xt,Ut),h(Xt,yt,Ut.values),f(Xt,{slice:Bt,set:Vt,constructor:function(){},toString:gt,toLocaleString:Ft}),Ct(Xt,"buffer","b"),Ct(Xt,"byteOffset","o"),Ct(Xt,"byteLength","l"),Ct(Xt,"length","e"),V(Xt,_t,{get:function(){return this[Et]}}),e.exports=function(t,e,r,u){var c=t+((u=!!u)?"Clamped":"")+"Array",p="get"+t,f="set"+t,d=o[c],v=d||{},y=d&&S(d),_=!d||!s.ABV,w={},E=d&&d[Y],O=function(t,r){V(t,r,{get:function(){return t=r,(n=this._d).v[p](t*e+n.o,Ot);var t,n},set:function(t){return n=r,o=t,a=this._d,u&&(o=(o=Math.round(o))<0?0:o>255?255:255&o),void a.v[f](n*e+a.o,o,Ot);var n,o,a},enumerable:!0})};_?(d=r(function(t,r,n,o){l(t,d,c,"_d");var a,i,s,u,p=0,f=0;if(x(r)){if(!(r instanceof J||(u=b(r))==X||u==K))return Et in r?Pt(d,r):It.call(d,r);a=r,f=Nt(n,e);var v=r.byteLength;if(void 0===o){if(v%e)throw G(St);if((i=v-f)<0)throw G(St)}else if((i=m(o)*e)+f>v)throw G(St);s=i/e}else s=g(r),a=new J(i=s*e);for(h(t,"_d",{b:a,o:f,l:i,e:s,v:new Z(a)});p<s;)O(t,p++)}),E=d[Y]=k(Xt),h(E,"constructor",d)):a(function(){d(1)})&&a(function(){new d(-1)})&&I(function(t){new d,new d(null),new d(1.5),new d(t)},!0)||(d=r(function(t,r,n,o){var a;return l(t,d,c),x(r)?r instanceof J||(a=b(r))==X||a==K?void 0!==o?new v(r,Nt(n,e),o):void 0!==n?new v(r,Nt(n,e)):new v(r):Et in r?Pt(d,r):It.call(d,r):new v(g(r))}),$(y!==Function.prototype?A(v).concat(A(y)):A(v),function(t){t in d||h(d,t,v[t])}),d[Y]=E,n||(E.constructor=d));var T=E[yt],N=!!T&&("values"==T.name||null==T.name),D=Ut.values;h(d,bt,!0),h(E,Et,c),h(E,kt,!0),h(E,xt,d),(u?new d(1)[_t]==c:_t in E)||V(E,_t,{get:function(){return c}}),w[c]=d,i(i.G+i.W+i.F*(d!=v),w),i(i.S,c,{BYTES_PER_ELEMENT:e}),i(i.S+i.F*a(function(){v.of.call(d,1)}),c,{from:It,of:jt}),H in E||h(E,H,e),i(i.P,c,Lt),j(c),i(i.P+i.F*Tt,c,{set:Vt}),i(i.P+i.F*!N,c,Ut),n||E.toString==gt||(E.toString=gt),i(i.P+i.F*a(function(){new d(1).slice()}),c,{slice:Bt}),i(i.P+i.F*(a(function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()})||!a(function(){E.toLocaleString.call([1,2])})),c,{toLocaleString:Ft}),C[c]=N?T:D,n||N||h(E,yt,D)}}else e.exports=function(){}},{"./_an-instance":8,"./_array-copy-within":10,"./_array-fill":11,"./_array-includes":13,"./_array-methods":14,"./_classof":19,"./_ctx":27,"./_descriptors":31,"./_export":35,"./_fails":37,"./_global":42,"./_has":43,"./_hide":44,"./_is-array-iter":50,"./_is-object":53,"./_iter-detect":58,"./_iterators":60,"./_library":61,"./_object-create":72,"./_object-dp":73,"./_object-gopd":76,"./_object-gopn":78,"./_object-gpo":80,"./_property-desc":91,"./_redefine-all":92,"./_set-species":99,"./_species-constructor":103,"./_to-absolute-index":113,"./_to-index":114,"./_to-integer":115,"./_to-length":117,"./_to-object":118,"./_to-primitive":119,"./_typed":122,"./_typed-buffer":121,"./_uid":123,"./_wks":127,"./core.get-iterator-method":128,"./es6.array.iterator":140}],121:[function(t,e,r){"use strict";var n=t("./_global"),o=t("./_descriptors"),a=t("./_library"),i=t("./_typed"),s=t("./_hide"),u=t("./_redefine-all"),c=t("./_fails"),l=t("./_an-instance"),p=t("./_to-integer"),h=t("./_to-length"),f=t("./_to-index"),d=t("./_object-gopn").f,m=t("./_object-dp").f,g=t("./_array-fill"),v=t("./_set-to-string-tag"),y="ArrayBuffer",_="DataView",b="prototype",x="Wrong index!",w=n[y],E=n[_],k=n.Math,S=n.RangeError,A=n.Infinity,O=w,T=k.abs,N=k.pow,D=k.floor,M=k.log,R=k.LN2,P="byteLength",C="byteOffset",I=o?"_b":"buffer",j=o?"_l":P,z=o?"_o":C;function F(t,e,r){var n,o,a,i=Array(r),s=8*r-e-1,u=(1<<s)-1,c=u>>1,l=23===e?N(2,-24)-N(2,-77):0,p=0,h=t<0||0===t&&1/t<0?1:0;for((t=T(t))!=t||t===A?(o=t!=t?1:0,n=u):(n=D(M(t)/R),t*(a=N(2,-n))<1&&(n--,a*=2),(t+=n+c>=1?l/a:l*N(2,1-c))*a>=2&&(n++,a/=2),n+c>=u?(o=0,n=u):n+c>=1?(o=(t*a-1)*N(2,e),n+=c):(o=t*N(2,c-1)*N(2,e),n=0));e>=8;i[p++]=255&o,o/=256,e-=8);for(n=n<<e|o,s+=e;s>0;i[p++]=255&n,n/=256,s-=8);return i[--p]|=128*h,i}function L(t,e,r){var n,o=8*r-e-1,a=(1<<o)-1,i=a>>1,s=o-7,u=r-1,c=t[u--],l=127&c;for(c>>=7;s>0;l=256*l+t[u],u--,s-=8);for(n=l&(1<<-s)-1,l>>=-s,s+=e;s>0;n=256*n+t[u],u--,s-=8);if(0===l)l=1-i;else{if(l===a)return n?NaN:c?-A:A;n+=N(2,e),l-=i}return(c?-1:1)*n*N(2,l-e)}function B(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function V(t){return[255&t]}function U(t){return[255&t,t>>8&255]}function G(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function q(t){return F(t,52,8)}function W(t){return F(t,23,4)}function X(t,e,r){m(t[b],e,{get:function(){return this[r]}})}function K(t,e,r,n){var o=f(+r);if(o+e>t[j])throw S(x);var a=t[I]._b,i=o+t[z],s=a.slice(i,i+e);return n?s:s.reverse()}function H(t,e,r,n,o,a){var i=f(+r);if(i+e>t[j])throw S(x);for(var s=t[I]._b,u=i+t[z],c=n(+o),l=0;l<e;l++)s[u+l]=c[a?l:e-l-1]}if(i.ABV){if(!c(function(){w(1)})||!c(function(){new w(-1)})||c(function(){return new w,new w(1.5),new w(NaN),w.name!=y})){for(var Y,Q=(w=function(t){return l(this,w),new O(f(t))})[b]=O[b],J=d(O),Z=0;J.length>Z;)(Y=J[Z++])in w||s(w,Y,O[Y]);a||(Q.constructor=w)}var $=new E(new w(2)),tt=E[b].setInt8;$.setInt8(0,2147483648),$.setInt8(1,2147483649),!$.getInt8(0)&&$.getInt8(1)||u(E[b],{setInt8:function(t,e){tt.call(this,t,e<<24>>24)},setUint8:function(t,e){tt.call(this,t,e<<24>>24)}},!0)}else w=function(t){l(this,w,y);var e=f(t);this._b=g.call(Array(e),0),this[j]=e},E=function(t,e,r){l(this,E,_),l(t,w,_);var n=t[j],o=p(e);if(o<0||o>n)throw S("Wrong offset!");if(o+(r=void 0===r?n-o:h(r))>n)throw S("Wrong length!");this[I]=t,this[z]=o,this[j]=r},o&&(X(w,P,"_l"),X(E,"buffer","_b"),X(E,P,"_l"),X(E,C,"_o")),u(E[b],{getInt8:function(t){return K(this,1,t)[0]<<24>>24},getUint8:function(t){return K(this,1,t)[0]},getInt16:function(t){var e=K(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=K(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return B(K(this,4,t,arguments[1]))},getUint32:function(t){return B(K(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return L(K(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return L(K(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){H(this,1,t,V,e)},setUint8:function(t,e){H(this,1,t,V,e)},setInt16:function(t,e){H(this,2,t,U,e,arguments[2])},setUint16:function(t,e){H(this,2,t,U,e,arguments[2])},setInt32:function(t,e){H(this,4,t,G,e,arguments[2])},setUint32:function(t,e){H(this,4,t,G,e,arguments[2])},setFloat32:function(t,e){H(this,4,t,W,e,arguments[2])},setFloat64:function(t,e){H(this,8,t,q,e,arguments[2])}});v(w,y),v(E,_),s(E[b],i.VIEW,!0),r[y]=w,r[_]=E},{"./_an-instance":8,"./_array-fill":11,"./_descriptors":31,"./_fails":37,"./_global":42,"./_hide":44,"./_library":61,"./_object-dp":73,"./_object-gopn":78,"./_redefine-all":92,"./_set-to-string-tag":100,"./_to-index":114,"./_to-integer":115,"./_to-length":117,"./_typed":122}],122:[function(t,e,r){for(var n,o=t("./_global"),a=t("./_hide"),i=t("./_uid"),s=i("typed_array"),u=i("view"),c=!(!o.ArrayBuffer||!o.DataView),l=c,p=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");p<9;)(n=o[h[p++]])?(a(n.prototype,s,!0),a(n.prototype,u,!0)):l=!1;e.exports={ABV:c,CONSTR:l,TYPED:s,VIEW:u}},{"./_global":42,"./_hide":44,"./_uid":123}],123:[function(t,e,r){var n=0,o=Math.random();e.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+o).toString(36))}},{}],124:[function(t,e,r){var n=t("./_is-object");e.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},{"./_is-object":53}],125:[function(t,e,r){var n=t("./_global"),o=t("./_core"),a=t("./_library"),i=t("./_wks-ext"),s=t("./_object-dp").f;e.exports=function(t){var e=o.Symbol||(o.Symbol=a?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:i.f(t)})}},{"./_core":25,"./_global":42,"./_library":61,"./_object-dp":73,"./_wks-ext":126}],126:[function(t,e,r){r.f=t("./_wks")},{"./_wks":127}],127:[function(t,e,r){var n=t("./_shared")("wks"),o=t("./_uid"),a=t("./_global").Symbol,i="function"==typeof a;(e.exports=function(t){return n[t]||(n[t]=i&&a[t]||(i?a:o)("Symbol."+t))}).store=n},{"./_global":42,"./_shared":102,"./_uid":123}],128:[function(t,e,r){var n=t("./_classof"),o=t("./_wks")("iterator"),a=t("./_iterators");e.exports=t("./_core").getIteratorMethod=function(t){if(null!=t)return t[o]||t["@@iterator"]||a[n(t)]}},{"./_classof":19,"./_core":25,"./_iterators":60,"./_wks":127}],129:[function(t,e,r){var n=t("./_export"),o=t("./_replacer")(/[\\^$*+?.()|[\]{}]/g,"\\$&");n(n.S,"RegExp",{escape:function(t){return o(t)}})},{"./_export":35,"./_replacer":94}],130:[function(t,e,r){var n=t("./_export");n(n.P,"Array",{copyWithin:t("./_array-copy-within")}),t("./_add-to-unscopables")("copyWithin")},{"./_add-to-unscopables":7,"./_array-copy-within":10,"./_export":35}],131:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_array-methods")(4);n(n.P+n.F*!t("./_strict-method")([].every,!0),"Array",{every:function(t){return o(this,t,arguments[1])}})},{"./_array-methods":14,"./_export":35,"./_strict-method":104}],132:[function(t,e,r){var n=t("./_export");n(n.P,"Array",{fill:t("./_array-fill")}),t("./_add-to-unscopables")("fill")},{"./_add-to-unscopables":7,"./_array-fill":11,"./_export":35}],133:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_array-methods")(2);n(n.P+n.F*!t("./_strict-method")([].filter,!0),"Array",{filter:function(t){return o(this,t,arguments[1])}})},{"./_array-methods":14,"./_export":35,"./_strict-method":104}],134:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_array-methods")(6),a="findIndex",i=!0;a in[]&&Array(1)[a](function(){i=!1}),n(n.P+n.F*i,"Array",{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),t("./_add-to-unscopables")(a)},{"./_add-to-unscopables":7,"./_array-methods":14,"./_export":35}],135:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_array-methods")(5),a="find",i=!0;a in[]&&Array(1)[a](function(){i=!1}),n(n.P+n.F*i,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),t("./_add-to-unscopables")(a)},{"./_add-to-unscopables":7,"./_array-methods":14,"./_export":35}],136:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_array-methods")(0),a=t("./_strict-method")([].forEach,!0);n(n.P+n.F*!a,"Array",{forEach:function(t){return o(this,t,arguments[1])}})},{"./_array-methods":14,"./_export":35,"./_strict-method":104}],137:[function(t,e,r){"use strict";var n=t("./_ctx"),o=t("./_export"),a=t("./_to-object"),i=t("./_iter-call"),s=t("./_is-array-iter"),u=t("./_to-length"),c=t("./_create-property"),l=t("./core.get-iterator-method");o(o.S+o.F*!t("./_iter-detect")(function(t){Array.from(t)}),"Array",{from:function(t){var e,r,o,p,h=a(t),f="function"==typeof this?this:Array,d=arguments.length,m=d>1?arguments[1]:void 0,g=void 0!==m,v=0,y=l(h);if(g&&(m=n(m,d>2?arguments[2]:void 0,2)),null==y||f==Array&&s(y))for(r=new f(e=u(h.length));e>v;v++)c(r,v,g?m(h[v],v):h[v]);else for(p=y.call(h),r=new f;!(o=p.next()).done;v++)c(r,v,g?i(p,m,[o.value,v],!0):o.value);return r.length=v,r}})},{"./_create-property":26,"./_ctx":27,"./_export":35,"./_is-array-iter":50,"./_iter-call":55,"./_iter-detect":58,"./_to-length":117,"./_to-object":118,"./core.get-iterator-method":128}],138:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_array-includes")(!1),a=[].indexOf,i=!!a&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(i||!t("./_strict-method")(a)),"Array",{indexOf:function(t){return i?a.apply(this,arguments)||0:o(this,t,arguments[1])}})},{"./_array-includes":13,"./_export":35,"./_strict-method":104}],139:[function(t,e,r){var n=t("./_export");n(n.S,"Array",{isArray:t("./_is-array")})},{"./_export":35,"./_is-array":51}],140:[function(t,e,r){"use strict";var n=t("./_add-to-unscopables"),o=t("./_iter-step"),a=t("./_iterators"),i=t("./_to-iobject");e.exports=t("./_iter-define")(Array,"Array",function(t,e){this._t=i(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},{"./_add-to-unscopables":7,"./_iter-define":57,"./_iter-step":59,"./_iterators":60,"./_to-iobject":116}],141:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_to-iobject"),a=[].join;n(n.P+n.F*(t("./_iobject")!=Object||!t("./_strict-method")(a)),"Array",{join:function(t){return a.call(o(this),void 0===t?",":t)}})},{"./_export":35,"./_iobject":49,"./_strict-method":104,"./_to-iobject":116}],142:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_to-iobject"),a=t("./_to-integer"),i=t("./_to-length"),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(u||!t("./_strict-method")(s)),"Array",{lastIndexOf:function(t){if(u)return s.apply(this,arguments)||0;var e=o(this),r=i(e.length),n=r-1;for(arguments.length>1&&(n=Math.min(n,a(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}})},{"./_export":35,"./_strict-method":104,"./_to-integer":115,"./_to-iobject":116,"./_to-length":117}],143:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_array-methods")(1);n(n.P+n.F*!t("./_strict-method")([].map,!0),"Array",{map:function(t){return o(this,t,arguments[1])}})},{"./_array-methods":14,"./_export":35,"./_strict-method":104}],144:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_create-property");n(n.S+n.F*t("./_fails")(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,r=new("function"==typeof this?this:Array)(e);e>t;)o(r,t,arguments[t++]);return r.length=e,r}})},{"./_create-property":26,"./_export":35,"./_fails":37}],145:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_array-reduce");n(n.P+n.F*!t("./_strict-method")([].reduceRight,!0),"Array",{reduceRight:function(t){return o(this,t,arguments.length,arguments[1],!0)}})},{"./_array-reduce":15,"./_export":35,"./_strict-method":104}],146:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_array-reduce");n(n.P+n.F*!t("./_strict-method")([].reduce,!0),"Array",{reduce:function(t){return o(this,t,arguments.length,arguments[1],!1)}})},{"./_array-reduce":15,"./_export":35,"./_strict-method":104}],147:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_html"),a=t("./_cof"),i=t("./_to-absolute-index"),s=t("./_to-length"),u=[].slice;n(n.P+n.F*t("./_fails")(function(){o&&u.call(o)}),"Array",{slice:function(t,e){var r=s(this.length),n=a(this);if(e=void 0===e?r:e,"Array"==n)return u.call(this,t,e);for(var o=i(t,r),c=i(e,r),l=s(c-o),p=Array(l),h=0;h<l;h++)p[h]="String"==n?this.charAt(o+h):this[o+h];return p}})},{"./_cof":20,"./_export":35,"./_fails":37,"./_html":45,"./_to-absolute-index":113,"./_to-length":117}],148:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_array-methods")(3);n(n.P+n.F*!t("./_strict-method")([].some,!0),"Array",{some:function(t){return o(this,t,arguments[1])}})},{"./_array-methods":14,"./_export":35,"./_strict-method":104}],149:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_a-function"),a=t("./_to-object"),i=t("./_fails"),s=[].sort,u=[1,2,3];n(n.P+n.F*(i(function(){u.sort(void 0)})||!i(function(){u.sort(null)})||!t("./_strict-method")(s)),"Array",{sort:function(t){return void 0===t?s.call(a(this)):s.call(a(this),o(t))}})},{"./_a-function":5,"./_export":35,"./_fails":37,"./_strict-method":104,"./_to-object":118}],150:[function(t,e,r){t("./_set-species")("Array")},{"./_set-species":99}],151:[function(t,e,r){var n=t("./_export");n(n.S,"Date",{now:function(){return(new Date).getTime()}})},{"./_export":35}],152:[function(t,e,r){var n=t("./_export"),o=t("./_date-to-iso-string");n(n.P+n.F*(Date.prototype.toISOString!==o),"Date",{toISOString:o})},{"./_date-to-iso-string":28,"./_export":35}],153:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_to-object"),a=t("./_to-primitive");n(n.P+n.F*t("./_fails")(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=o(this),r=a(e);return"number"!=typeof r||isFinite(r)?e.toISOString():null}})},{"./_export":35,"./_fails":37,"./_to-object":118,"./_to-primitive":119}],154:[function(t,e,r){var n=t("./_wks")("toPrimitive"),o=Date.prototype;n in o||t("./_hide")(o,n,t("./_date-to-primitive"))},{"./_date-to-primitive":29,"./_hide":44,"./_wks":127}],155:[function(t,e,r){var n=Date.prototype,o="Invalid Date",a="toString",i=n[a],s=n.getTime;new Date(NaN)+""!=o&&t("./_redefine")(n,a,function(){var t=s.call(this);return t==t?i.call(this):o})},{"./_redefine":93}],156:[function(t,e,r){var n=t("./_export");n(n.P,"Function",{bind:t("./_bind")})},{"./_bind":18,"./_export":35}],157:[function(t,e,r){"use strict";var n=t("./_is-object"),o=t("./_object-gpo"),a=t("./_wks")("hasInstance"),i=Function.prototype;a in i||t("./_object-dp").f(i,a,{value:function(t){if("function"!=typeof this||!n(t))return!1;if(!n(this.prototype))return t instanceof this;for(;t=o(t);)if(this.prototype===t)return!0;return!1}})},{"./_is-object":53,"./_object-dp":73,"./_object-gpo":80,"./_wks":127}],158:[function(t,e,r){var n=t("./_object-dp").f,o=Function.prototype,a=/^\s*function ([^ (]*)/;"name"in o||t("./_descriptors")&&n(o,"name",{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(t){return""}}})},{"./_descriptors":31,"./_object-dp":73}],159:[function(t,e,r){"use strict";var n=t("./_collection-strong"),o=t("./_validate-collection");e.exports=t("./_collection")("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=n.getEntry(o(this,"Map"),t);return e&&e.v},set:function(t,e){return n.def(o(this,"Map"),0===t?0:t,e)}},n,!0)},{"./_collection":24,"./_collection-strong":21,"./_validate-collection":124}],160:[function(t,e,r){var n=t("./_export"),o=t("./_math-log1p"),a=Math.sqrt,i=Math.acosh;n(n.S+n.F*!(i&&710==Math.floor(i(Number.MAX_VALUE))&&i(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:o(t-1+a(t-1)*a(t+1))}})},{"./_export":35,"./_math-log1p":64}],161:[function(t,e,r){var n=t("./_export"),o=Math.asinh;n(n.S+n.F*!(o&&1/o(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},{"./_export":35}],162:[function(t,e,r){var n=t("./_export"),o=Math.atanh;n(n.S+n.F*!(o&&1/o(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},{"./_export":35}],163:[function(t,e,r){var n=t("./_export"),o=t("./_math-sign");n(n.S,"Math",{cbrt:function(t){return o(t=+t)*Math.pow(Math.abs(t),1/3)}})},{"./_export":35,"./_math-sign":66}],164:[function(t,e,r){var n=t("./_export");n(n.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},{"./_export":35}],165:[function(t,e,r){var n=t("./_export"),o=Math.exp;n(n.S,"Math",{cosh:function(t){return(o(t=+t)+o(-t))/2}})},{"./_export":35}],166:[function(t,e,r){var n=t("./_export"),o=t("./_math-expm1");n(n.S+n.F*(o!=Math.expm1),"Math",{expm1:o})},{"./_export":35,"./_math-expm1":62}],167:[function(t,e,r){var n=t("./_export");n(n.S,"Math",{fround:t("./_math-fround")})},{"./_export":35,"./_math-fround":63}],168:[function(t,e,r){var n=t("./_export"),o=Math.abs;n(n.S,"Math",{hypot:function(t,e){for(var r,n,a=0,i=0,s=arguments.length,u=0;i<s;)u<(r=o(arguments[i++]))?(a=a*(n=u/r)*n+1,u=r):a+=r>0?(n=r/u)*n:r;return u===1/0?1/0:u*Math.sqrt(a)}})},{"./_export":35}],169:[function(t,e,r){var n=t("./_export"),o=Math.imul;n(n.S+n.F*t("./_fails")(function(){return-5!=o(4294967295,5)||2!=o.length}),"Math",{imul:function(t,e){var r=65535,n=+t,o=+e,a=r&n,i=r&o;return 0|a*i+((r&n>>>16)*i+a*(r&o>>>16)<<16>>>0)}})},{"./_export":35,"./_fails":37}],170:[function(t,e,r){var n=t("./_export");n(n.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},{"./_export":35}],171:[function(t,e,r){var n=t("./_export");n(n.S,"Math",{log1p:t("./_math-log1p")})},{"./_export":35,"./_math-log1p":64}],172:[function(t,e,r){var n=t("./_export");n(n.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},{"./_export":35}],173:[function(t,e,r){var n=t("./_export");n(n.S,"Math",{sign:t("./_math-sign")})},{"./_export":35,"./_math-sign":66}],174:[function(t,e,r){var n=t("./_export"),o=t("./_math-expm1"),a=Math.exp;n(n.S+n.F*t("./_fails")(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(o(t)-o(-t))/2:(a(t-1)-a(-t-1))*(Math.E/2)}})},{"./_export":35,"./_fails":37,"./_math-expm1":62}],175:[function(t,e,r){var n=t("./_export"),o=t("./_math-expm1"),a=Math.exp;n(n.S,"Math",{tanh:function(t){var e=o(t=+t),r=o(-t);return e==1/0?1:r==1/0?-1:(e-r)/(a(t)+a(-t))}})},{"./_export":35,"./_math-expm1":62}],176:[function(t,e,r){var n=t("./_export");n(n.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},{"./_export":35}],177:[function(t,e,r){"use strict";var n=t("./_global"),o=t("./_has"),a=t("./_cof"),i=t("./_inherit-if-required"),s=t("./_to-primitive"),u=t("./_fails"),c=t("./_object-gopn").f,l=t("./_object-gopd").f,p=t("./_object-dp").f,h=t("./_string-trim").trim,f="Number",d=n[f],m=d,g=d.prototype,v=a(t("./_object-create")(g))==f,y="trim"in String.prototype,_=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){var r,n,o,a=(e=y?e.trim():h(e,3)).charCodeAt(0);if(43===a||45===a){if(88===(r=e.charCodeAt(2))||120===r)return NaN}else if(48===a){switch(e.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+e}for(var i,u=e.slice(2),c=0,l=u.length;c<l;c++)if((i=u.charCodeAt(c))<48||i>o)return NaN;return parseInt(u,n)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof d&&(v?u(function(){g.valueOf.call(r)}):a(r)!=f)?i(new m(_(e)),r,d):_(e)};for(var b,x=t("./_descriptors")?c(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;x.length>w;w++)o(m,b=x[w])&&!o(d,b)&&p(d,b,l(m,b));d.prototype=g,g.constructor=d,t("./_redefine")(n,f,d)}},{"./_cof":20,"./_descriptors":31,"./_fails":37,"./_global":42,"./_has":43,"./_inherit-if-required":47,"./_object-create":72,"./_object-dp":73,"./_object-gopd":76,"./_object-gopn":78,"./_redefine":93,"./_string-trim":110,"./_to-primitive":119}],178:[function(t,e,r){var n=t("./_export");n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},{"./_export":35}],179:[function(t,e,r){var n=t("./_export"),o=t("./_global").isFinite;n(n.S,"Number",{isFinite:function(t){return"number"==typeof t&&o(t)}})},{"./_export":35,"./_global":42}],180:[function(t,e,r){var n=t("./_export");n(n.S,"Number",{isInteger:t("./_is-integer")})},{"./_export":35,"./_is-integer":52}],181:[function(t,e,r){var n=t("./_export");n(n.S,"Number",{isNaN:function(t){return t!=t}})},{"./_export":35}],182:[function(t,e,r){var n=t("./_export"),o=t("./_is-integer"),a=Math.abs;n(n.S,"Number",{isSafeInteger:function(t){return o(t)&&a(t)<=9007199254740991}})},{"./_export":35,"./_is-integer":52}],183:[function(t,e,r){var n=t("./_export");n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{"./_export":35}],184:[function(t,e,r){var n=t("./_export");n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{"./_export":35}],185:[function(t,e,r){var n=t("./_export"),o=t("./_parse-float");n(n.S+n.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},{"./_export":35,"./_parse-float":87}],186:[function(t,e,r){var n=t("./_export"),o=t("./_parse-int");n(n.S+n.F*(Number.parseInt!=o),"Number",{parseInt:o})},{"./_export":35,"./_parse-int":88}],187:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_to-integer"),a=t("./_a-number-value"),i=t("./_string-repeat"),s=1..toFixed,u=Math.floor,c=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",p=function(t,e){for(var r=-1,n=e;++r<6;)n+=t*c[r],c[r]=n%1e7,n=u(n/1e7)},h=function(t){for(var e=6,r=0;--e>=0;)r+=c[e],c[e]=u(r/t),r=r%t*1e7},f=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==c[t]){var r=String(c[t]);e=""===e?r:e+i.call("0",7-r.length)+r}return e},d=function(t,e,r){return 0===e?r:e%2==1?d(t,e-1,r*t):d(t*t,e/2,r)};n(n.P+n.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!t("./_fails")(function(){s.call({})})),"Number",{toFixed:function(t){var e,r,n,s,u=a(this,l),c=o(t),m="",g="0";if(c<0||c>20)throw RangeError(l);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(m="-",u=-u),u>1e-21)if(r=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(u*d(2,69,1))-69)<0?u*d(2,-e,1):u/d(2,e,1),r*=4503599627370496,(e=52-e)>0){for(p(0,r),n=c;n>=7;)p(1e7,0),n-=7;for(p(d(10,n,1),0),n=e-1;n>=23;)h(1<<23),n-=23;h(1<<n),p(1,1),h(2),g=f()}else p(0,r),p(1<<-e,0),g=f()+i.call("0",c);return g=c>0?m+((s=g.length)<=c?"0."+i.call("0",c-s)+g:g.slice(0,s-c)+"."+g.slice(s-c)):m+g}})},{"./_a-number-value":6,"./_export":35,"./_fails":37,"./_string-repeat":109,"./_to-integer":115}],188:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_fails"),a=t("./_a-number-value"),i=1..toPrecision;n(n.P+n.F*(o(function(){return"1"!==i.call(1,void 0)})||!o(function(){i.call({})})),"Number",{toPrecision:function(t){var e=a(this,"Number#toPrecision: incorrect invocation!");return void 0===t?i.call(e):i.call(e,t)}})},{"./_a-number-value":6,"./_export":35,"./_fails":37}],189:[function(t,e,r){var n=t("./_export");n(n.S+n.F,"Object",{assign:t("./_object-assign")})},{"./_export":35,"./_object-assign":71}],190:[function(t,e,r){var n=t("./_export");n(n.S,"Object",{create:t("./_object-create")})},{"./_export":35,"./_object-create":72}],191:[function(t,e,r){var n=t("./_export");n(n.S+n.F*!t("./_descriptors"),"Object",{defineProperties:t("./_object-dps")})},{"./_descriptors":31,"./_export":35,"./_object-dps":74}],192:[function(t,e,r){var n=t("./_export");n(n.S+n.F*!t("./_descriptors"),"Object",{defineProperty:t("./_object-dp").f})},{"./_descriptors":31,"./_export":35,"./_object-dp":73}],193:[function(t,e,r){var n=t("./_is-object"),o=t("./_meta").onFreeze;t("./_object-sap")("freeze",function(t){return function(e){return t&&n(e)?t(o(e)):e}})},{"./_is-object":53,"./_meta":67,"./_object-sap":84}],194:[function(t,e,r){var n=t("./_to-iobject"),o=t("./_object-gopd").f;t("./_object-sap")("getOwnPropertyDescriptor",function(){return function(t,e){return o(n(t),e)}})},{"./_object-gopd":76,"./_object-sap":84,"./_to-iobject":116}],195:[function(t,e,r){t("./_object-sap")("getOwnPropertyNames",function(){return t("./_object-gopn-ext").f})},{"./_object-gopn-ext":77,"./_object-sap":84}],196:[function(t,e,r){var n=t("./_to-object"),o=t("./_object-gpo");t("./_object-sap")("getPrototypeOf",function(){return function(t){return o(n(t))}})},{"./_object-gpo":80,"./_object-sap":84,"./_to-object":118}],197:[function(t,e,r){var n=t("./_is-object");t("./_object-sap")("isExtensible",function(t){return function(e){return!!n(e)&&(!t||t(e))}})},{"./_is-object":53,"./_object-sap":84}],198:[function(t,e,r){var n=t("./_is-object");t("./_object-sap")("isFrozen",function(t){return function(e){return!n(e)||!!t&&t(e)}})},{"./_is-object":53,"./_object-sap":84}],199:[function(t,e,r){var n=t("./_is-object");t("./_object-sap")("isSealed",function(t){return function(e){return!n(e)||!!t&&t(e)}})},{"./_is-object":53,"./_object-sap":84}],200:[function(t,e,r){var n=t("./_export");n(n.S,"Object",{is:t("./_same-value")})},{"./_export":35,"./_same-value":95}],201:[function(t,e,r){var n=t("./_to-object"),o=t("./_object-keys");t("./_object-sap")("keys",function(){return function(t){return o(n(t))}})},{"./_object-keys":82,"./_object-sap":84,"./_to-object":118}],202:[function(t,e,r){var n=t("./_is-object"),o=t("./_meta").onFreeze;t("./_object-sap")("preventExtensions",function(t){return function(e){return t&&n(e)?t(o(e)):e}})},{"./_is-object":53,"./_meta":67,"./_object-sap":84}],203:[function(t,e,r){var n=t("./_is-object"),o=t("./_meta").onFreeze;t("./_object-sap")("seal",function(t){return function(e){return t&&n(e)?t(o(e)):e}})},{"./_is-object":53,"./_meta":67,"./_object-sap":84}],204:[function(t,e,r){var n=t("./_export");n(n.S,"Object",{setPrototypeOf:t("./_set-proto").set})},{"./_export":35,"./_set-proto":98}],205:[function(t,e,r){"use strict";var n=t("./_classof"),o={};o[t("./_wks")("toStringTag")]="z",o+""!="[object z]"&&t("./_redefine")(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},{"./_classof":19,"./_redefine":93,"./_wks":127}],206:[function(t,e,r){var n=t("./_export"),o=t("./_parse-float");n(n.G+n.F*(parseFloat!=o),{parseFloat:o})},{"./_export":35,"./_parse-float":87}],207:[function(t,e,r){var n=t("./_export"),o=t("./_parse-int");n(n.G+n.F*(parseInt!=o),{parseInt:o})},{"./_export":35,"./_parse-int":88}],208:[function(t,e,r){"use strict";var n,o,a,i,s=t("./_library"),u=t("./_global"),c=t("./_ctx"),l=t("./_classof"),p=t("./_export"),h=t("./_is-object"),f=t("./_a-function"),d=t("./_an-instance"),m=t("./_for-of"),g=t("./_species-constructor"),v=t("./_task").set,y=t("./_microtask")(),_=t("./_new-promise-capability"),b=t("./_perform"),x=t("./_promise-resolve"),w="Promise",E=u.TypeError,k=u.process,S=u[w],A="process"==l(k),O=function(){},T=o=_.f,N=!!function(){try{var e=S.resolve(1),r=(e.constructor={})[t("./_wks")("species")]=function(t){t(O,O)};return(A||"function"==typeof PromiseRejectionEvent)&&e.then(O)instanceof r}catch(t){}}(),D=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},M=function(t,e){if(!t._n){t._n=!0;var r=t._c;y(function(){for(var n=t._v,o=1==t._s,a=0,i=function(e){var r,a,i=o?e.ok:e.fail,s=e.resolve,u=e.reject,c=e.domain;try{i?(o||(2==t._h&&C(t),t._h=1),!0===i?r=n:(c&&c.enter(),r=i(n),c&&c.exit()),r===e.promise?u(E("Promise-chain cycle")):(a=D(r))?a.call(r,s,u):s(r)):u(n)}catch(t){u(t)}};r.length>a;)i(r[a++]);t._c=[],t._n=!1,e&&!t._h&&R(t)})}},R=function(t){v.call(u,function(){var e,r,n,o=t._v,a=P(t);if(a&&(e=b(function(){A?k.emit("unhandledRejection",o,t):(r=u.onunhandledrejection)?r({promise:t,reason:o}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",o)}),t._h=A||P(t)?2:1),t._a=void 0,a&&e.e)throw e.v})},P=function(t){if(1==t._h)return!1;for(var e,r=t._a||t._c,n=0;r.length>n;)if((e=r[n++]).fail||!P(e.promise))return!1;return!0},C=function(t){v.call(u,function(){var e;A?k.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},I=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),M(e,!0))},j=function(t){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw E("Promise can't be resolved itself");(e=D(t))?y(function(){var n={_w:r,_d:!1};try{e.call(t,c(j,n,1),c(I,n,1))}catch(t){I.call(n,t)}}):(r._v=t,r._s=1,M(r,!1))}catch(t){I.call({_w:r,_d:!1},t)}}};N||(S=function(t){d(this,S,w,"_h"),f(t),n.call(this);try{t(c(j,this,1),c(I,this,1))}catch(t){I.call(this,t)}},(n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=t("./_redefine-all")(S.prototype,{then:function(t,e){var r=T(g(this,S));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=A?k.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&M(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),a=function(){var t=new n;this.promise=t,this.resolve=c(j,t,1),this.reject=c(I,t,1)},_.f=T=function(t){return t===S||t===i?new a(t):o(t)}),p(p.G+p.W+p.F*!N,{Promise:S}),t("./_set-to-string-tag")(S,w),t("./_set-species")(w),i=t("./_core")[w],p(p.S+p.F*!N,w,{reject:function(t){var e=T(this);return(0,e.reject)(t),e.promise}}),p(p.S+p.F*(s||!N),w,{resolve:function(t){return x(s&&this===i?S:this,t)}}),p(p.S+p.F*!(N&&t("./_iter-detect")(function(t){S.all(t).catch(O)})),w,{all:function(t){var e=this,r=T(e),n=r.resolve,o=r.reject,a=b(function(){var r=[],a=0,i=1;m(t,!1,function(t){var s=a++,u=!1;r.push(void 0),i++,e.resolve(t).then(function(t){u||(u=!0,r[s]=t,--i||n(r))},o)}),--i||n(r)});return a.e&&o(a.v),r.promise},race:function(t){var e=this,r=T(e),n=r.reject,o=b(function(){m(t,!1,function(t){e.resolve(t).then(r.resolve,n)})});return o.e&&n(o.v),r.promise}})},{"./_a-function":5,"./_an-instance":8,"./_classof":19,"./_core":25,"./_ctx":27,"./_export":35,"./_for-of":41,"./_global":42,"./_is-object":53,"./_iter-detect":58,"./_library":61,"./_microtask":69,"./_new-promise-capability":70,"./_perform":89,"./_promise-resolve":90,"./_redefine-all":92,"./_set-species":99,"./_set-to-string-tag":100,"./_species-constructor":103,"./_task":112,"./_wks":127}],209:[function(t,e,r){var n=t("./_export"),o=t("./_a-function"),a=t("./_an-object"),i=(t("./_global").Reflect||{}).apply,s=Function.apply;n(n.S+n.F*!t("./_fails")(function(){i(function(){})}),"Reflect",{apply:function(t,e,r){var n=o(t),u=a(r);return i?i(n,e,u):s.call(n,e,u)}})},{"./_a-function":5,"./_an-object":9,"./_export":35,"./_fails":37,"./_global":42}],210:[function(t,e,r){var n=t("./_export"),o=t("./_object-create"),a=t("./_a-function"),i=t("./_an-object"),s=t("./_is-object"),u=t("./_fails"),c=t("./_bind"),l=(t("./_global").Reflect||{}).construct,p=u(function(){function t(){}return!(l(function(){},[],t)instanceof t)}),h=!u(function(){l(function(){})});n(n.S+n.F*(p||h),"Reflect",{construct:function(t,e){a(t),i(e);var r=arguments.length<3?t:a(arguments[2]);if(h&&!p)return l(t,e,r);if(t==r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(c.apply(t,n))}var u=r.prototype,f=o(s(u)?u:Object.prototype),d=Function.apply.call(t,f,e);return s(d)?d:f}})},{"./_a-function":5,"./_an-object":9,"./_bind":18,"./_export":35,"./_fails":37,"./_global":42,"./_is-object":53,"./_object-create":72}],211:[function(t,e,r){var n=t("./_object-dp"),o=t("./_export"),a=t("./_an-object"),i=t("./_to-primitive");o(o.S+o.F*t("./_fails")(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,r){a(t),e=i(e,!0),a(r);try{return n.f(t,e,r),!0}catch(t){return!1}}})},{"./_an-object":9,"./_export":35,"./_fails":37,"./_object-dp":73,"./_to-primitive":119}],212:[function(t,e,r){var n=t("./_export"),o=t("./_object-gopd").f,a=t("./_an-object");n(n.S,"Reflect",{deleteProperty:function(t,e){var r=o(a(t),e);return!(r&&!r.configurable)&&delete t[e]}})},{"./_an-object":9,"./_export":35,"./_object-gopd":76}],213:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_an-object"),a=function(t){this._t=o(t),this._i=0;var e,r=this._k=[];for(e in t)r.push(e)};t("./_iter-create")(a,"Object",function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}}),n(n.S,"Reflect",{enumerate:function(t){return new a(t)}})},{"./_an-object":9,"./_export":35,"./_iter-create":56}],214:[function(t,e,r){var n=t("./_object-gopd"),o=t("./_export"),a=t("./_an-object");o(o.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return n.f(a(t),e)}})},{"./_an-object":9,"./_export":35,"./_object-gopd":76}],215:[function(t,e,r){var n=t("./_export"),o=t("./_object-gpo"),a=t("./_an-object");n(n.S,"Reflect",{getPrototypeOf:function(t){return o(a(t))}})},{"./_an-object":9,"./_export":35,"./_object-gpo":80}],216:[function(t,e,r){var n=t("./_object-gopd"),o=t("./_object-gpo"),a=t("./_has"),i=t("./_export"),s=t("./_is-object"),u=t("./_an-object");i(i.S,"Reflect",{get:function t(e,r){var i,c,l=arguments.length<3?e:arguments[2];return u(e)===l?e[r]:(i=n.f(e,r))?a(i,"value")?i.value:void 0!==i.get?i.get.call(l):void 0:s(c=o(e))?t(c,r,l):void 0}})},{"./_an-object":9,"./_export":35,"./_has":43,"./_is-object":53,"./_object-gopd":76,"./_object-gpo":80}],217:[function(t,e,r){var n=t("./_export");n(n.S,"Reflect",{has:function(t,e){return e in t}})},{"./_export":35}],218:[function(t,e,r){var n=t("./_export"),o=t("./_an-object"),a=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(t){return o(t),!a||a(t)}})},{"./_an-object":9,"./_export":35}],219:[function(t,e,r){var n=t("./_export");n(n.S,"Reflect",{ownKeys:t("./_own-keys")})},{"./_export":35,"./_own-keys":86}],220:[function(t,e,r){var n=t("./_export"),o=t("./_an-object"),a=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(t){o(t);try{return a&&a(t),!0}catch(t){return!1}}})},{"./_an-object":9,"./_export":35}],221:[function(t,e,r){var n=t("./_export"),o=t("./_set-proto");o&&n(n.S,"Reflect",{setPrototypeOf:function(t,e){o.check(t,e);try{return o.set(t,e),!0}catch(t){return!1}}})},{"./_export":35,"./_set-proto":98}],222:[function(t,e,r){var n=t("./_object-dp"),o=t("./_object-gopd"),a=t("./_object-gpo"),i=t("./_has"),s=t("./_export"),u=t("./_property-desc"),c=t("./_an-object"),l=t("./_is-object");s(s.S,"Reflect",{set:function t(e,r,s){var p,h,f=arguments.length<4?e:arguments[3],d=o.f(c(e),r);if(!d){if(l(h=a(e)))return t(h,r,s,f);d=u(0)}return i(d,"value")?!(!1===d.writable||!l(f)||((p=o.f(f,r)||u(0)).value=s,n.f(f,r,p),0)):void 0!==d.set&&(d.set.call(f,s),!0)}})},{"./_an-object":9,"./_export":35,"./_has":43,"./_is-object":53,"./_object-dp":73,"./_object-gopd":76,"./_object-gpo":80,"./_property-desc":91}],223:[function(t,e,r){var n=t("./_global"),o=t("./_inherit-if-required"),a=t("./_object-dp").f,i=t("./_object-gopn").f,s=t("./_is-regexp"),u=t("./_flags"),c=n.RegExp,l=c,p=c.prototype,h=/a/g,f=/a/g,d=new c(h)!==h;if(t("./_descriptors")&&(!d||t("./_fails")(function(){return f[t("./_wks")("match")]=!1,c(h)!=h||c(f)==f||"/a/i"!=c(h,"i")}))){c=function(t,e){var r=this instanceof c,n=s(t),a=void 0===e;return!r&&n&&t.constructor===c&&a?t:o(d?new l(n&&!a?t.source:t,e):l((n=t instanceof c)?t.source:t,n&&a?u.call(t):e),r?this:p,c)};for(var m=function(t){t in c||a(c,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})},g=i(l),v=0;g.length>v;)m(g[v++]);p.constructor=c,c.prototype=p,t("./_redefine")(n,"RegExp",c)}t("./_set-species")("RegExp")},{"./_descriptors":31,"./_fails":37,"./_flags":39,"./_global":42,"./_inherit-if-required":47,"./_is-regexp":54,"./_object-dp":73,"./_object-gopn":78,"./_redefine":93,"./_set-species":99,"./_wks":127}],224:[function(t,e,r){t("./_descriptors")&&"g"!=/./g.flags&&t("./_object-dp").f(RegExp.prototype,"flags",{configurable:!0,get:t("./_flags")})},{"./_descriptors":31,"./_flags":39,"./_object-dp":73}],225:[function(t,e,r){t("./_fix-re-wks")("match",1,function(t,e,r){return[function(r){"use strict";var n=t(this),o=null==r?void 0:r[e];return void 0!==o?o.call(r,n):new RegExp(r)[e](String(n))},r]})},{"./_fix-re-wks":38}],226:[function(t,e,r){t("./_fix-re-wks")("replace",2,function(t,e,r){return[function(n,o){"use strict";var a=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,a,o):r.call(String(a),n,o)},r]})},{"./_fix-re-wks":38}],227:[function(t,e,r){t("./_fix-re-wks")("search",1,function(t,e,r){return[function(r){"use strict";var n=t(this),o=null==r?void 0:r[e];return void 0!==o?o.call(r,n):new RegExp(r)[e](String(n))},r]})},{"./_fix-re-wks":38}],228:[function(t,e,r){t("./_fix-re-wks")("split",2,function(e,r,n){"use strict";var o=t("./_is-regexp"),a=n,i=[].push,s="split",u="length",c="lastIndex";if("c"=="abbc"[s](/(b)*/)[1]||4!="test"[s](/(?:)/,-1)[u]||2!="ab"[s](/(?:ab)*/)[u]||4!="."[s](/(.?)(.?)/)[u]||"."[s](/()()/)[u]>1||""[s](/.?/)[u]){var l=void 0===/()??/.exec("")[1];n=function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!o(t))return a.call(r,t,e);var n,s,p,h,f,d=[],m=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,v=void 0===e?4294967295:e>>>0,y=new RegExp(t.source,m+"g");for(l||(n=new RegExp("^"+y.source+"$(?!\\s)",m));(s=y.exec(r))&&!((p=s.index+s[0][u])>g&&(d.push(r.slice(g,s.index)),!l&&s[u]>1&&s[0].replace(n,function(){for(f=1;f<arguments[u]-2;f++)void 0===arguments[f]&&(s[f]=void 0)}),s[u]>1&&s.index<r[u]&&i.apply(d,s.slice(1)),h=s[0][u],g=p,d[u]>=v));)y[c]===s.index&&y[c]++;return g===r[u]?!h&&y.test("")||d.push(""):d.push(r.slice(g)),d[u]>v?d.slice(0,v):d}}else"0"[s](void 0,0)[u]&&(n=function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)});return[function(t,o){var a=e(this),i=null==t?void 0:t[r];return void 0!==i?i.call(t,a,o):n.call(String(a),t,o)},n]})},{"./_fix-re-wks":38,"./_is-regexp":54}],229:[function(t,e,r){"use strict";t("./es6.regexp.flags");var n=t("./_an-object"),o=t("./_flags"),a=t("./_descriptors"),i="toString",s=/./[i],u=function(e){t("./_redefine")(RegExp.prototype,i,e,!0)};t("./_fails")(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?u(function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!a&&t instanceof RegExp?o.call(t):void 0)}):s.name!=i&&u(function(){return s.call(this)})},{"./_an-object":9,"./_descriptors":31,"./_fails":37,"./_flags":39,"./_redefine":93,"./es6.regexp.flags":224}],230:[function(t,e,r){"use strict";var n=t("./_collection-strong"),o=t("./_validate-collection");e.exports=t("./_collection")("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(o(this,"Set"),t=0===t?0:t,t)}},n)},{"./_collection":24,"./_collection-strong":21,"./_validate-collection":124}],231:[function(t,e,r){"use strict";t("./_string-html")("anchor",function(t){return function(e){return t(this,"a","name",e)}})},{"./_string-html":107}],232:[function(t,e,r){"use strict";t("./_string-html")("big",function(t){return function(){return t(this,"big","","")}})},{"./_string-html":107}],233:[function(t,e,r){"use strict";t("./_string-html")("blink",function(t){return function(){return t(this,"blink","","")}})},{"./_string-html":107}],234:[function(t,e,r){"use strict";t("./_string-html")("bold",function(t){return function(){return t(this,"b","","")}})},{"./_string-html":107}],235:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_string-at")(!1);n(n.P,"String",{codePointAt:function(t){return o(this,t)}})},{"./_export":35,"./_string-at":105}],236:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_to-length"),a=t("./_string-context"),i="endsWith",s=""[i];n(n.P+n.F*t("./_fails-is-regexp")(i),"String",{endsWith:function(t){var e=a(this,t,i),r=arguments.length>1?arguments[1]:void 0,n=o(e.length),u=void 0===r?n:Math.min(o(r),n),c=String(t);return s?s.call(e,c,u):e.slice(u-c.length,u)===c}})},{"./_export":35,"./_fails-is-regexp":36,"./_string-context":106,"./_to-length":117}],237:[function(t,e,r){"use strict";t("./_string-html")("fixed",function(t){return function(){return t(this,"tt","","")}})},{"./_string-html":107}],238:[function(t,e,r){"use strict";t("./_string-html")("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},{"./_string-html":107}],239:[function(t,e,r){"use strict";t("./_string-html")("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},{"./_string-html":107}],240:[function(t,e,r){var n=t("./_export"),o=t("./_to-absolute-index"),a=String.fromCharCode,i=String.fromCodePoint;n(n.S+n.F*(!!i&&1!=i.length),"String",{fromCodePoint:function(t){for(var e,r=[],n=arguments.length,i=0;n>i;){if(e=+arguments[i++],o(e,1114111)!==e)throw RangeError(e+" is not a valid code point");r.push(e<65536?a(e):a(55296+((e-=65536)>>10),e%1024+56320))}return r.join("")}})},{"./_export":35,"./_to-absolute-index":113}],241:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_string-context"),a="includes";n(n.P+n.F*t("./_fails-is-regexp")(a),"String",{includes:function(t){return!!~o(this,t,a).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},{"./_export":35,"./_fails-is-regexp":36,"./_string-context":106}],242:[function(t,e,r){"use strict";t("./_string-html")("italics",function(t){return function(){return t(this,"i","","")}})},{"./_string-html":107}],243:[function(t,e,r){"use strict";var n=t("./_string-at")(!0);t("./_iter-define")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})})},{"./_iter-define":57,"./_string-at":105}],244:[function(t,e,r){"use strict";t("./_string-html")("link",function(t){return function(e){return t(this,"a","href",e)}})},{"./_string-html":107}],245:[function(t,e,r){var n=t("./_export"),o=t("./_to-iobject"),a=t("./_to-length");n(n.S,"String",{raw:function(t){for(var e=o(t.raw),r=a(e.length),n=arguments.length,i=[],s=0;r>s;)i.push(String(e[s++])),s<n&&i.push(String(arguments[s]));return i.join("")}})},{"./_export":35,"./_to-iobject":116,"./_to-length":117}],246:[function(t,e,r){var n=t("./_export");n(n.P,"String",{repeat:t("./_string-repeat")})},{"./_export":35,"./_string-repeat":109}],247:[function(t,e,r){"use strict";t("./_string-html")("small",function(t){return function(){return t(this,"small","","")}})},{"./_string-html":107}],248:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_to-length"),a=t("./_string-context"),i="startsWith",s=""[i];n(n.P+n.F*t("./_fails-is-regexp")(i),"String",{startsWith:function(t){var e=a(this,t,i),r=o(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return s?s.call(e,n,r):e.slice(r,r+n.length)===n}})},{"./_export":35,"./_fails-is-regexp":36,"./_string-context":106,"./_to-length":117}],249:[function(t,e,r){"use strict";t("./_string-html")("strike",function(t){return function(){return t(this,"strike","","")}})},{"./_string-html":107}],250:[function(t,e,r){"use strict";t("./_string-html")("sub",function(t){return function(){return t(this,"sub","","")}})},{"./_string-html":107}],251:[function(t,e,r){"use strict";t("./_string-html")("sup",function(t){return function(){return t(this,"sup","","")}})},{"./_string-html":107}],252:[function(t,e,r){"use strict";t("./_string-trim")("trim",function(t){return function(){return t(this,3)}})},{"./_string-trim":110}],253:[function(t,e,r){"use strict";var n=t("./_global"),o=t("./_has"),a=t("./_descriptors"),i=t("./_export"),s=t("./_redefine"),u=t("./_meta").KEY,c=t("./_fails"),l=t("./_shared"),p=t("./_set-to-string-tag"),h=t("./_uid"),f=t("./_wks"),d=t("./_wks-ext"),m=t("./_wks-define"),g=t("./_enum-keys"),v=t("./_is-array"),y=t("./_an-object"),_=t("./_to-iobject"),b=t("./_to-primitive"),x=t("./_property-desc"),w=t("./_object-create"),E=t("./_object-gopn-ext"),k=t("./_object-gopd"),S=t("./_object-dp"),A=t("./_object-keys"),O=k.f,T=S.f,N=E.f,D=n.Symbol,M=n.JSON,R=M&&M.stringify,P="prototype",C=f("_hidden"),I=f("toPrimitive"),j={}.propertyIsEnumerable,z=l("symbol-registry"),F=l("symbols"),L=l("op-symbols"),B=Object[P],V="function"==typeof D,U=n.QObject,G=!U||!U[P]||!U[P].findChild,q=a&&c(function(){return 7!=w(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=O(B,e);n&&delete B[e],T(t,e,r),n&&t!==B&&T(B,e,n)}:T,W=function(t){var e=F[t]=w(D[P]);return e._k=t,e},X=V&&"symbol"==typeof D.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof D},K=function(t,e,r){return t===B&&K(L,e,r),y(t),e=b(e,!0),y(r),o(F,e)?(r.enumerable?(o(t,C)&&t[C][e]&&(t[C][e]=!1),r=w(r,{enumerable:x(0,!1)})):(o(t,C)||T(t,C,x(1,{})),t[C][e]=!0),q(t,e,r)):T(t,e,r)},H=function(t,e){y(t);for(var r,n=g(e=_(e)),o=0,a=n.length;a>o;)K(t,r=n[o++],e[r]);return t},Y=function(t){var e=j.call(this,t=b(t,!0));return!(this===B&&o(F,t)&&!o(L,t))&&(!(e||!o(this,t)||!o(F,t)||o(this,C)&&this[C][t])||e)},Q=function(t,e){if(t=_(t),e=b(e,!0),t!==B||!o(F,e)||o(L,e)){var r=O(t,e);return!r||!o(F,e)||o(t,C)&&t[C][e]||(r.enumerable=!0),r}},J=function(t){for(var e,r=N(_(t)),n=[],a=0;r.length>a;)o(F,e=r[a++])||e==C||e==u||n.push(e);return n},Z=function(t){for(var e,r=t===B,n=N(r?L:_(t)),a=[],i=0;n.length>i;)!o(F,e=n[i++])||r&&!o(B,e)||a.push(F[e]);return a};V||(s((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(r){this===B&&e.call(L,r),o(this,C)&&o(this[C],t)&&(this[C][t]=!1),q(this,t,x(1,r))};return a&&G&&q(B,t,{configurable:!0,set:e}),W(t)})[P],"toString",function(){return this._k}),k.f=Q,S.f=K,t("./_object-gopn").f=E.f=J,t("./_object-pie").f=Y,t("./_object-gops").f=Z,a&&!t("./_library")&&s(B,"propertyIsEnumerable",Y,!0),d.f=function(t){return W(f(t))}),i(i.G+i.W+i.F*!V,{Symbol:D});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;$.length>tt;)f($[tt++]);for(var et=A(f.store),rt=0;et.length>rt;)m(et[rt++]);i(i.S+i.F*!V,"Symbol",{for:function(t){return o(z,t+="")?z[t]:z[t]=D(t)},keyFor:function(t){if(!X(t))throw TypeError(t+" is not a symbol!");for(var e in z)if(z[e]===t)return e},useSetter:function(){G=!0},useSimple:function(){G=!1}}),i(i.S+i.F*!V,"Object",{create:function(t,e){return void 0===e?w(t):H(w(t),e)},defineProperty:K,defineProperties:H,getOwnPropertyDescriptor:Q,getOwnPropertyNames:J,getOwnPropertySymbols:Z}),M&&i(i.S+i.F*(!V||c(function(){var t=D();return"[null]"!=R([t])||"{}"!=R({a:t})||"{}"!=R(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!X(t)){for(var e,r,n=[t],o=1;arguments.length>o;)n.push(arguments[o++]);return"function"==typeof(e=n[1])&&(r=e),!r&&v(e)||(e=function(t,e){if(r&&(e=r.call(this,t,e)),!X(e))return e}),n[1]=e,R.apply(M,n)}}}),D[P][I]||t("./_hide")(D[P],I,D[P].valueOf),p(D,"Symbol"),p(Math,"Math",!0),p(n.JSON,"JSON",!0)},{"./_an-object":9,"./_descriptors":31,"./_enum-keys":34,"./_export":35,"./_fails":37,"./_global":42,"./_has":43,"./_hide":44,"./_is-array":51,"./_library":61,"./_meta":67,"./_object-create":72,"./_object-dp":73,"./_object-gopd":76,"./_object-gopn":78,"./_object-gopn-ext":77,"./_object-gops":79,"./_object-keys":82,"./_object-pie":83,"./_property-desc":91,"./_redefine":93,"./_set-to-string-tag":100,"./_shared":102,"./_to-iobject":116,"./_to-primitive":119,"./_uid":123,"./_wks":127,"./_wks-define":125,"./_wks-ext":126}],254:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_typed"),a=t("./_typed-buffer"),i=t("./_an-object"),s=t("./_to-absolute-index"),u=t("./_to-length"),c=t("./_is-object"),l=t("./_global").ArrayBuffer,p=t("./_species-constructor"),h=a.ArrayBuffer,f=a.DataView,d=o.ABV&&l.isView,m=h.prototype.slice,g=o.VIEW,v="ArrayBuffer";n(n.G+n.W+n.F*(l!==h),{ArrayBuffer:h}),n(n.S+n.F*!o.CONSTR,v,{isView:function(t){return d&&d(t)||c(t)&&g in t}}),n(n.P+n.U+n.F*t("./_fails")(function(){return!new h(2).slice(1,void 0).byteLength}),v,{slice:function(t,e){if(void 0!==m&&void 0===e)return m.call(i(this),t);for(var r=i(this).byteLength,n=s(t,r),o=s(void 0===e?r:e,r),a=new(p(this,h))(u(o-n)),c=new f(this),l=new f(a),d=0;n<o;)l.setUint8(d++,c.getUint8(n++));return a}}),t("./_set-species")(v)},{"./_an-object":9,"./_export":35,"./_fails":37,"./_global":42,"./_is-object":53,"./_set-species":99,"./_species-constructor":103,"./_to-absolute-index":113,"./_to-length":117,"./_typed":122,"./_typed-buffer":121}],255:[function(t,e,r){var n=t("./_export");n(n.G+n.W+n.F*!t("./_typed").ABV,{DataView:t("./_typed-buffer").DataView})},{"./_export":35,"./_typed":122,"./_typed-buffer":121}],256:[function(t,e,r){t("./_typed-array")("Float32",4,function(t){return function(e,r,n){return t(this,e,r,n)}})},{"./_typed-array":120}],257:[function(t,e,r){t("./_typed-array")("Float64",8,function(t){return function(e,r,n){return t(this,e,r,n)}})},{"./_typed-array":120}],258:[function(t,e,r){t("./_typed-array")("Int16",2,function(t){return function(e,r,n){return t(this,e,r,n)}})},{"./_typed-array":120}],259:[function(t,e,r){t("./_typed-array")("Int32",4,function(t){return function(e,r,n){return t(this,e,r,n)}})},{"./_typed-array":120}],260:[function(t,e,r){t("./_typed-array")("Int8",1,function(t){return function(e,r,n){return t(this,e,r,n)}})},{"./_typed-array":120}],261:[function(t,e,r){t("./_typed-array")("Uint16",2,function(t){return function(e,r,n){return t(this,e,r,n)}})},{"./_typed-array":120}],262:[function(t,e,r){t("./_typed-array")("Uint32",4,function(t){return function(e,r,n){return t(this,e,r,n)}})},{"./_typed-array":120}],263:[function(t,e,r){t("./_typed-array")("Uint8",1,function(t){return function(e,r,n){return t(this,e,r,n)}})},{"./_typed-array":120}],264:[function(t,e,r){t("./_typed-array")("Uint8",1,function(t){return function(e,r,n){return t(this,e,r,n)}},!0)},{"./_typed-array":120}],265:[function(t,e,r){"use strict";var n,o=t("./_array-methods")(0),a=t("./_redefine"),i=t("./_meta"),s=t("./_object-assign"),u=t("./_collection-weak"),c=t("./_is-object"),l=t("./_fails"),p=t("./_validate-collection"),h="WeakMap",f=i.getWeak,d=Object.isExtensible,m=u.ufstore,g={},v=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(t){if(c(t)){var e=f(t);return!0===e?m(p(this,h)).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(p(this,h),t,e)}},_=e.exports=t("./_collection")(h,v,y,u,!0,!0);l(function(){return 7!=(new _).set((Object.freeze||Object)(g),7).get(g)})&&(s((n=u.getConstructor(v,h)).prototype,y),i.NEED=!0,o(["delete","has","get","set"],function(t){var e=_.prototype,r=e[t];a(e,t,function(e,o){if(c(e)&&!d(e)){this._f||(this._f=new n);var a=this._f[t](e,o);return"set"==t?this:a}return r.call(this,e,o)})}))},{"./_array-methods":14,"./_collection":24,"./_collection-weak":23,"./_fails":37,"./_is-object":53,"./_meta":67,"./_object-assign":71,"./_redefine":93,"./_validate-collection":124}],266:[function(t,e,r){"use strict";var n=t("./_collection-weak"),o=t("./_validate-collection"),a="WeakSet";t("./_collection")(a,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(o(this,a),t,!0)}},n,!1,!0)},{"./_collection":24,"./_collection-weak":23,"./_validate-collection":124}],267:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_flatten-into-array"),a=t("./_to-object"),i=t("./_to-length"),s=t("./_a-function"),u=t("./_array-species-create");n(n.P,"Array",{flatMap:function(t){var e,r,n=a(this);return s(t),e=i(n.length),r=u(n,0),o(r,n,n,e,0,1,t,arguments[1]),r}}),t("./_add-to-unscopables")("flatMap")},{"./_a-function":5,"./_add-to-unscopables":7,"./_array-species-create":17,"./_export":35,"./_flatten-into-array":40,"./_to-length":117,"./_to-object":118}],268:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_flatten-into-array"),a=t("./_to-object"),i=t("./_to-length"),s=t("./_to-integer"),u=t("./_array-species-create");n(n.P,"Array",{flatten:function(){var t=arguments[0],e=a(this),r=i(e.length),n=u(e,0);return o(n,e,e,r,0,void 0===t?1:s(t)),n}}),t("./_add-to-unscopables")("flatten")},{"./_add-to-unscopables":7,"./_array-species-create":17,"./_export":35,"./_flatten-into-array":40,"./_to-integer":115,"./_to-length":117,"./_to-object":118}],269:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_array-includes")(!0);n(n.P,"Array",{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),t("./_add-to-unscopables")("includes")},{"./_add-to-unscopables":7,"./_array-includes":13,"./_export":35}],270:[function(t,e,r){var n=t("./_export"),o=t("./_microtask")(),a=t("./_global").process,i="process"==t("./_cof")(a);n(n.G,{asap:function(t){var e=i&&a.domain;o(e?e.bind(t):t)}})},{"./_cof":20,"./_export":35,"./_global":42,"./_microtask":69}],271:[function(t,e,r){var n=t("./_export"),o=t("./_cof");n(n.S,"Error",{isError:function(t){return"Error"===o(t)}})},{"./_cof":20,"./_export":35}],272:[function(t,e,r){var n=t("./_export");n(n.G,{global:t("./_global")})},{"./_export":35,"./_global":42}],273:[function(t,e,r){t("./_set-collection-from")("Map")},{"./_set-collection-from":96}],274:[function(t,e,r){t("./_set-collection-of")("Map")},{"./_set-collection-of":97}],275:[function(t,e,r){var n=t("./_export");n(n.P+n.R,"Map",{toJSON:t("./_collection-to-json")("Map")})},{"./_collection-to-json":22,"./_export":35}],276:[function(t,e,r){var n=t("./_export");n(n.S,"Math",{clamp:function(t,e,r){return Math.min(r,Math.max(e,t))}})},{"./_export":35}],277:[function(t,e,r){var n=t("./_export");n(n.S,"Math",{DEG_PER_RAD:Math.PI/180})},{"./_export":35}],278:[function(t,e,r){var n=t("./_export"),o=180/Math.PI;n(n.S,"Math",{degrees:function(t){return t*o}})},{"./_export":35}],279:[function(t,e,r){var n=t("./_export"),o=t("./_math-scale"),a=t("./_math-fround");n(n.S,"Math",{fscale:function(t,e,r,n,i){return a(o(t,e,r,n,i))}})},{"./_export":35,"./_math-fround":63,"./_math-scale":65}],280:[function(t,e,r){var n=t("./_export");n(n.S,"Math",{iaddh:function(t,e,r,n){var o=t>>>0,a=r>>>0;return(e>>>0)+(n>>>0)+((o&a|(o|a)&~(o+a>>>0))>>>31)|0}})},{"./_export":35}],281:[function(t,e,r){var n=t("./_export");n(n.S,"Math",{imulh:function(t,e){var r=+t,n=+e,o=65535&r,a=65535&n,i=r>>16,s=n>>16,u=(i*a>>>0)+(o*a>>>16);return i*s+(u>>16)+((o*s>>>0)+(65535&u)>>16)}})},{"./_export":35}],282:[function(t,e,r){var n=t("./_export");n(n.S,"Math",{isubh:function(t,e,r,n){var o=t>>>0,a=r>>>0;return(e>>>0)-(n>>>0)-((~o&a|~(o^a)&o-a>>>0)>>>31)|0}})},{"./_export":35}],283:[function(t,e,r){var n=t("./_export");n(n.S,"Math",{RAD_PER_DEG:180/Math.PI})},{"./_export":35}],284:[function(t,e,r){var n=t("./_export"),o=Math.PI/180;n(n.S,"Math",{radians:function(t){return t*o}})},{"./_export":35}],285:[function(t,e,r){var n=t("./_export");n(n.S,"Math",{scale:t("./_math-scale")})},{"./_export":35,"./_math-scale":65}],286:[function(t,e,r){var n=t("./_export");n(n.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:t>0}})},{"./_export":35}],287:[function(t,e,r){var n=t("./_export");n(n.S,"Math",{umulh:function(t,e){var r=+t,n=+e,o=65535&r,a=65535&n,i=r>>>16,s=n>>>16,u=(i*a>>>0)+(o*a>>>16);return i*s+(u>>>16)+((o*s>>>0)+(65535&u)>>>16)}})},{"./_export":35}],288:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_to-object"),a=t("./_a-function"),i=t("./_object-dp");t("./_descriptors")&&n(n.P+t("./_object-forced-pam"),"Object",{__defineGetter__:function(t,e){i.f(o(this),t,{get:a(e),enumerable:!0,configurable:!0})}})},{"./_a-function":5,"./_descriptors":31,"./_export":35,"./_object-dp":73,"./_object-forced-pam":75,"./_to-object":118}],289:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_to-object"),a=t("./_a-function"),i=t("./_object-dp");t("./_descriptors")&&n(n.P+t("./_object-forced-pam"),"Object",{__defineSetter__:function(t,e){i.f(o(this),t,{set:a(e),enumerable:!0,configurable:!0})}})},{"./_a-function":5,"./_descriptors":31,"./_export":35,"./_object-dp":73,"./_object-forced-pam":75,"./_to-object":118}],290:[function(t,e,r){var n=t("./_export"),o=t("./_object-to-array")(!0);n(n.S,"Object",{entries:function(t){return o(t)}})},{"./_export":35,"./_object-to-array":85}],291:[function(t,e,r){var n=t("./_export"),o=t("./_own-keys"),a=t("./_to-iobject"),i=t("./_object-gopd"),s=t("./_create-property");n(n.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,r,n=a(t),u=i.f,c=o(n),l={},p=0;c.length>p;)void 0!==(r=u(n,e=c[p++]))&&s(l,e,r);return l}})},{"./_create-property":26,"./_export":35,"./_object-gopd":76,"./_own-keys":86,"./_to-iobject":116}],292:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_to-object"),a=t("./_to-primitive"),i=t("./_object-gpo"),s=t("./_object-gopd").f;t("./_descriptors")&&n(n.P+t("./_object-forced-pam"),"Object",{__lookupGetter__:function(t){var e,r=o(this),n=a(t,!0);do{if(e=s(r,n))return e.get}while(r=i(r))}})},{"./_descriptors":31,"./_export":35,"./_object-forced-pam":75,"./_object-gopd":76,"./_object-gpo":80,"./_to-object":118,"./_to-primitive":119}],293:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_to-object"),a=t("./_to-primitive"),i=t("./_object-gpo"),s=t("./_object-gopd").f;t("./_descriptors")&&n(n.P+t("./_object-forced-pam"),"Object",{__lookupSetter__:function(t){var e,r=o(this),n=a(t,!0);do{if(e=s(r,n))return e.set}while(r=i(r))}})},{"./_descriptors":31,"./_export":35,"./_object-forced-pam":75,"./_object-gopd":76,"./_object-gpo":80,"./_to-object":118,"./_to-primitive":119}],294:[function(t,e,r){var n=t("./_export"),o=t("./_object-to-array")(!1);n(n.S,"Object",{values:function(t){return o(t)}})},{"./_export":35,"./_object-to-array":85}],295:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_global"),a=t("./_core"),i=t("./_microtask")(),s=t("./_wks")("observable"),u=t("./_a-function"),c=t("./_an-object"),l=t("./_an-instance"),p=t("./_redefine-all"),h=t("./_hide"),f=t("./_for-of"),d=f.RETURN,m=function(t){return null==t?void 0:u(t)},g=function(t){var e=t._c;e&&(t._c=void 0,e())},v=function(t){return void 0===t._o},y=function(t){v(t)||(t._o=void 0,g(t))},_=function(t,e){c(t),this._c=void 0,this._o=t,t=new b(this);try{var r=e(t),n=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){n.unsubscribe()}:u(r),this._c=r)}catch(e){return void t.error(e)}v(this)&&g(this)};_.prototype=p({},{unsubscribe:function(){y(this)}});var b=function(t){this._s=t};b.prototype=p({},{next:function(t){var e=this._s;if(!v(e)){var r=e._o;try{var n=m(r.next);if(n)return n.call(r,t)}catch(t){try{y(e)}finally{throw t}}}},error:function(t){var e=this._s;if(v(e))throw t;var r=e._o;e._o=void 0;try{var n=m(r.error);if(!n)throw t;t=n.call(r,t)}catch(t){try{g(e)}finally{throw t}}return g(e),t},complete:function(t){var e=this._s;if(!v(e)){var r=e._o;e._o=void 0;try{var n=m(r.complete);t=n?n.call(r,t):void 0}catch(t){try{g(e)}finally{throw t}}return g(e),t}}});var x=function(t){l(this,x,"Observable","_f")._f=u(t)};p(x.prototype,{subscribe:function(t){return new _(t,this._f)},forEach:function(t){var e=this;return new(a.Promise||o.Promise)(function(r,n){u(t);var o=e.subscribe({next:function(e){try{return t(e)}catch(t){n(t),o.unsubscribe()}},error:n,complete:r})})}}),p(x,{from:function(t){var e="function"==typeof this?this:x,r=m(c(t)[s]);if(r){var n=c(r.call(t));return n.constructor===e?n:new e(function(t){return n.subscribe(t)})}return new e(function(e){var r=!1;return i(function(){if(!r){try{if(f(t,!1,function(t){if(e.next(t),r)return d})===d)return}catch(t){if(r)throw t;return void e.error(t)}e.complete()}}),function(){r=!0}})},of:function(){for(var t=0,e=arguments.length,r=Array(e);t<e;)r[t]=arguments[t++];return new("function"==typeof this?this:x)(function(t){var e=!1;return i(function(){if(!e){for(var n=0;n<r.length;++n)if(t.next(r[n]),e)return;t.complete()}}),function(){e=!0}})}}),h(x.prototype,s,function(){return this}),n(n.G,{Observable:x}),t("./_set-species")("Observable")},{"./_a-function":5,"./_an-instance":8,"./_an-object":9,"./_core":25,"./_export":35,"./_for-of":41,"./_global":42,"./_hide":44,"./_microtask":69,"./_redefine-all":92,"./_set-species":99,"./_wks":127}],296:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_core"),a=t("./_global"),i=t("./_species-constructor"),s=t("./_promise-resolve");n(n.P+n.R,"Promise",{finally:function(t){var e=i(this,o.Promise||a.Promise),r="function"==typeof t;return this.then(r?function(r){return s(e,t()).then(function(){return r})}:t,r?function(r){return s(e,t()).then(function(){throw r})}:t)}})},{"./_core":25,"./_export":35,"./_global":42,"./_promise-resolve":90,"./_species-constructor":103}],297:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_new-promise-capability"),a=t("./_perform");n(n.S,"Promise",{try:function(t){var e=o.f(this),r=a(t);return(r.e?e.reject:e.resolve)(r.v),e.promise}})},{"./_export":35,"./_new-promise-capability":70,"./_perform":89}],298:[function(t,e,r){var n=t("./_metadata"),o=t("./_an-object"),a=n.key,i=n.set;n.exp({defineMetadata:function(t,e,r,n){i(t,e,o(r),a(n))}})},{"./_an-object":9,"./_metadata":68}],299:[function(t,e,r){var n=t("./_metadata"),o=t("./_an-object"),a=n.key,i=n.map,s=n.store;n.exp({deleteMetadata:function(t,e){var r=arguments.length<3?void 0:a(arguments[2]),n=i(o(e),r,!1);if(void 0===n||!n.delete(t))return!1;if(n.size)return!0;var u=s.get(e);return u.delete(r),!!u.size||s.delete(e)}})},{"./_an-object":9,"./_metadata":68}],300:[function(t,e,r){var n=t("./es6.set"),o=t("./_array-from-iterable"),a=t("./_metadata"),i=t("./_an-object"),s=t("./_object-gpo"),u=a.keys,c=a.key,l=function(t,e){var r=u(t,e),a=s(t);if(null===a)return r;var i=l(a,e);return i.length?r.length?o(new n(r.concat(i))):i:r};a.exp({getMetadataKeys:function(t){return l(i(t),arguments.length<2?void 0:c(arguments[1]))}})},{"./_an-object":9,"./_array-from-iterable":12,"./_metadata":68,"./_object-gpo":80,"./es6.set":230}],301:[function(t,e,r){var n=t("./_metadata"),o=t("./_an-object"),a=t("./_object-gpo"),i=n.has,s=n.get,u=n.key,c=function(t,e,r){if(i(t,e,r))return s(t,e,r);var n=a(e);return null!==n?c(t,n,r):void 0};n.exp({getMetadata:function(t,e){return c(t,o(e),arguments.length<3?void 0:u(arguments[2]))}})},{"./_an-object":9,"./_metadata":68,"./_object-gpo":80}],302:[function(t,e,r){var n=t("./_metadata"),o=t("./_an-object"),a=n.keys,i=n.key;n.exp({getOwnMetadataKeys:function(t){return a(o(t),arguments.length<2?void 0:i(arguments[1]))}})},{"./_an-object":9,"./_metadata":68}],303:[function(t,e,r){var n=t("./_metadata"),o=t("./_an-object"),a=n.get,i=n.key;n.exp({getOwnMetadata:function(t,e){return a(t,o(e),arguments.length<3?void 0:i(arguments[2]))}})},{"./_an-object":9,"./_metadata":68}],304:[function(t,e,r){var n=t("./_metadata"),o=t("./_an-object"),a=t("./_object-gpo"),i=n.has,s=n.key,u=function(t,e,r){if(i(t,e,r))return!0;var n=a(e);return null!==n&&u(t,n,r)};n.exp({hasMetadata:function(t,e){return u(t,o(e),arguments.length<3?void 0:s(arguments[2]))}})},{"./_an-object":9,"./_metadata":68,"./_object-gpo":80}],305:[function(t,e,r){var n=t("./_metadata"),o=t("./_an-object"),a=n.has,i=n.key;n.exp({hasOwnMetadata:function(t,e){return a(t,o(e),arguments.length<3?void 0:i(arguments[2]))}})},{"./_an-object":9,"./_metadata":68}],306:[function(t,e,r){var n=t("./_metadata"),o=t("./_an-object"),a=t("./_a-function"),i=n.key,s=n.set;n.exp({metadata:function(t,e){return function(r,n){s(t,e,(void 0!==n?o:a)(r),i(n))}}})},{"./_a-function":5,"./_an-object":9,"./_metadata":68}],307:[function(t,e,r){t("./_set-collection-from")("Set")},{"./_set-collection-from":96}],308:[function(t,e,r){t("./_set-collection-of")("Set")},{"./_set-collection-of":97}],309:[function(t,e,r){var n=t("./_export");n(n.P+n.R,"Set",{toJSON:t("./_collection-to-json")("Set")})},{"./_collection-to-json":22,"./_export":35}],310:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_string-at")(!0);n(n.P,"String",{at:function(t){return o(this,t)}})},{"./_export":35,"./_string-at":105}],311:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_defined"),a=t("./_to-length"),i=t("./_is-regexp"),s=t("./_flags"),u=RegExp.prototype,c=function(t,e){this._r=t,this._s=e};t("./_iter-create")(c,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),n(n.P,"String",{matchAll:function(t){if(o(this),!i(t))throw TypeError(t+" is not a regexp!");var e=String(this),r="flags"in u?String(t.flags):s.call(t),n=new RegExp(t.source,~r.indexOf("g")?r:"g"+r);return n.lastIndex=a(t.lastIndex),new c(n,e)}})},{"./_defined":30,"./_export":35,"./_flags":39,"./_is-regexp":54,"./_iter-create":56,"./_to-length":117}],312:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_string-pad");n(n.P,"String",{padEnd:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},{"./_export":35,"./_string-pad":108}],313:[function(t,e,r){"use strict";var n=t("./_export"),o=t("./_string-pad");n(n.P,"String",{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},{"./_export":35,"./_string-pad":108}],314:[function(t,e,r){"use strict";t("./_string-trim")("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},{"./_string-trim":110}],315:[function(t,e,r){"use strict";t("./_string-trim")("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},{"./_string-trim":110}],316:[function(t,e,r){t("./_wks-define")("asyncIterator")},{"./_wks-define":125}],317:[function(t,e,r){t("./_wks-define")("observable")},{"./_wks-define":125}],318:[function(t,e,r){var n=t("./_export");n(n.S,"System",{global:t("./_global")})},{"./_export":35,"./_global":42}],319:[function(t,e,r){t("./_set-collection-from")("WeakMap")},{"./_set-collection-from":96}],320:[function(t,e,r){t("./_set-collection-of")("WeakMap")},{"./_set-collection-of":97}],321:[function(t,e,r){t("./_set-collection-from")("WeakSet")},{"./_set-collection-from":96}],322:[function(t,e,r){t("./_set-collection-of")("WeakSet")},{"./_set-collection-of":97}],323:[function(t,e,r){for(var n=t("./es6.array.iterator"),o=t("./_object-keys"),a=t("./_redefine"),i=t("./_global"),s=t("./_hide"),u=t("./_iterators"),c=t("./_wks"),l=c("iterator"),p=c("toStringTag"),h=u.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=o(f),m=0;m<d.length;m++){var g,v=d[m],y=f[v],_=i[v],b=_&&_.prototype;if(b&&(b[l]||s(b,l,h),b[p]||s(b,p,v),u[v]=h,y))for(g in n)b[g]||a(b,g,n[g],!0)}},{"./_global":42,"./_hide":44,"./_iterators":60,"./_object-keys":82,"./_redefine":93,"./_wks":127,"./es6.array.iterator":140}],324:[function(t,e,r){var n=t("./_export"),o=t("./_task");n(n.G+n.B,{setImmediate:o.set,clearImmediate:o.clear})},{"./_export":35,"./_task":112}],325:[function(t,e,r){var n=t("./_global"),o=t("./_export"),a=n.navigator,i=[].slice,s=!!a&&/MSIE .\./.test(a.userAgent),u=function(t){return function(e,r){var n=arguments.length>2,o=!!n&&i.call(arguments,2);return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,o)}:e,r)}};o(o.G+o.B+o.F*s,{setTimeout:u(n.setTimeout),setInterval:u(n.setInterval)})},{"./_export":35,"./_global":42}],326:[function(t,e,r){t("./modules/es6.symbol"),t("./modules/es6.object.create"),t("./modules/es6.object.define-property"),t("./modules/es6.object.define-properties"),t("./modules/es6.object.get-own-property-descriptor"),t("./modules/es6.object.get-prototype-of"),t("./modules/es6.object.keys"),t("./modules/es6.object.get-own-property-names"),t("./modules/es6.object.freeze"),t("./modules/es6.object.seal"),t("./modules/es6.object.prevent-extensions"),t("./modules/es6.object.is-frozen"),t("./modules/es6.object.is-sealed"),t("./modules/es6.object.is-extensible"),t("./modules/es6.object.assign"),t("./modules/es6.object.is"),t("./modules/es6.object.set-prototype-of"),t("./modules/es6.object.to-string"),t("./modules/es6.function.bind"),t("./modules/es6.function.name"),t("./modules/es6.function.has-instance"),t("./modules/es6.parse-int"),t("./modules/es6.parse-float"),t("./modules/es6.number.constructor"),t("./modules/es6.number.to-fixed"),t("./modules/es6.number.to-precision"),t("./modules/es6.number.epsilon"),t("./modules/es6.number.is-finite"),t("./modules/es6.number.is-integer"),t("./modules/es6.number.is-nan"),t("./modules/es6.number.is-safe-integer"),t("./modules/es6.number.max-safe-integer"),t("./modules/es6.number.min-safe-integer"),t("./modules/es6.number.parse-float"),t("./modules/es6.number.parse-int"),t("./modules/es6.math.acosh"),t("./modules/es6.math.asinh"),t("./modules/es6.math.atanh"),t("./modules/es6.math.cbrt"),t("./modules/es6.math.clz32"),t("./modules/es6.math.cosh"),t("./modules/es6.math.expm1"),t("./modules/es6.math.fround"),t("./modules/es6.math.hypot"),t("./modules/es6.math.imul"),t("./modules/es6.math.log10"),t("./modules/es6.math.log1p"),t("./modules/es6.math.log2"),t("./modules/es6.math.sign"),t("./modules/es6.math.sinh"),t("./modules/es6.math.tanh"),t("./modules/es6.math.trunc"),t("./modules/es6.string.from-code-point"),t("./modules/es6.string.raw"),t("./modules/es6.string.trim"),t("./modules/es6.string.iterator"),t("./modules/es6.string.code-point-at"),t("./modules/es6.string.ends-with"),t("./modules/es6.string.includes"),t("./modules/es6.string.repeat"),t("./modules/es6.string.starts-with"),t("./modules/es6.string.anchor"),t("./modules/es6.string.big"),t("./modules/es6.string.blink"),t("./modules/es6.string.bold"),t("./modules/es6.string.fixed"),t("./modules/es6.string.fontcolor"),t("./modules/es6.string.fontsize"),t("./modules/es6.string.italics"),t("./modules/es6.string.link"),t("./modules/es6.string.small"),t("./modules/es6.string.strike"),t("./modules/es6.string.sub"),t("./modules/es6.string.sup"),t("./modules/es6.date.now"),t("./modules/es6.date.to-json"),t("./modules/es6.date.to-iso-string"),t("./modules/es6.date.to-string"),t("./modules/es6.date.to-primitive"),t("./modules/es6.array.is-array"),t("./modules/es6.array.from"),t("./modules/es6.array.of"),t("./modules/es6.array.join"),t("./modules/es6.array.slice"),t("./modules/es6.array.sort"),t("./modules/es6.array.for-each"),t("./modules/es6.array.map"),t("./modules/es6.array.filter"),t("./modules/es6.array.some"),t("./modules/es6.array.every"),t("./modules/es6.array.reduce"),t("./modules/es6.array.reduce-right"),t("./modules/es6.array.index-of"),t("./modules/es6.array.last-index-of"),t("./modules/es6.array.copy-within"),t("./modules/es6.array.fill"),t("./modules/es6.array.find"),t("./modules/es6.array.find-index"),t("./modules/es6.array.species"),t("./modules/es6.array.iterator"),t("./modules/es6.regexp.constructor"),t("./modules/es6.regexp.to-string"),t("./modules/es6.regexp.flags"),t("./modules/es6.regexp.match"),t("./modules/es6.regexp.replace"),t("./modules/es6.regexp.search"),t("./modules/es6.regexp.split"),t("./modules/es6.promise"),t("./modules/es6.map"),t("./modules/es6.set"),t("./modules/es6.weak-map"),t("./modules/es6.weak-set"),t("./modules/es6.typed.array-buffer"),t("./modules/es6.typed.data-view"),t("./modules/es6.typed.int8-array"),t("./modules/es6.typed.uint8-array"),t("./modules/es6.typed.uint8-clamped-array"),t("./modules/es6.typed.int16-array"),t("./modules/es6.typed.uint16-array"),t("./modules/es6.typed.int32-array"),t("./modules/es6.typed.uint32-array"),t("./modules/es6.typed.float32-array"),t("./modules/es6.typed.float64-array"),t("./modules/es6.reflect.apply"),t("./modules/es6.reflect.construct"),t("./modules/es6.reflect.define-property"),t("./modules/es6.reflect.delete-property"),t("./modules/es6.reflect.enumerate"),t("./modules/es6.reflect.get"),t("./modules/es6.reflect.get-own-property-descriptor"),t("./modules/es6.reflect.get-prototype-of"),t("./modules/es6.reflect.has"),t("./modules/es6.reflect.is-extensible"),t("./modules/es6.reflect.own-keys"),t("./modules/es6.reflect.prevent-extensions"),t("./modules/es6.reflect.set"),t("./modules/es6.reflect.set-prototype-of"),t("./modules/es7.array.includes"),t("./modules/es7.array.flat-map"),t("./modules/es7.array.flatten"),t("./modules/es7.string.at"),t("./modules/es7.string.pad-start"),t("./modules/es7.string.pad-end"),t("./modules/es7.string.trim-left"),t("./modules/es7.string.trim-right"),t("./modules/es7.string.match-all"),t("./modules/es7.symbol.async-iterator"),t("./modules/es7.symbol.observable"),t("./modules/es7.object.get-own-property-descriptors"),t("./modules/es7.object.values"),t("./modules/es7.object.entries"),t("./modules/es7.object.define-getter"),t("./modules/es7.object.define-setter"),t("./modules/es7.object.lookup-getter"),t("./modules/es7.object.lookup-setter"),t("./modules/es7.map.to-json"),t("./modules/es7.set.to-json"),t("./modules/es7.map.of"),t("./modules/es7.set.of"),t("./modules/es7.weak-map.of"),t("./modules/es7.weak-set.of"),t("./modules/es7.map.from"),t("./modules/es7.set.from"),t("./modules/es7.weak-map.from"),t("./modules/es7.weak-set.from"),t("./modules/es7.global"),t("./modules/es7.system.global"),t("./modules/es7.error.is-error"),t("./modules/es7.math.clamp"),t("./modules/es7.math.deg-per-rad"),t("./modules/es7.math.degrees"),t("./modules/es7.math.fscale"),t("./modules/es7.math.iaddh"),t("./modules/es7.math.isubh"),t("./modules/es7.math.imulh"),t("./modules/es7.math.rad-per-deg"),t("./modules/es7.math.radians"),t("./modules/es7.math.scale"),t("./modules/es7.math.umulh"),t("./modules/es7.math.signbit"),t("./modules/es7.promise.finally"),t("./modules/es7.promise.try"),t("./modules/es7.reflect.define-metadata"),t("./modules/es7.reflect.delete-metadata"),t("./modules/es7.reflect.get-metadata"),t("./modules/es7.reflect.get-metadata-keys"),t("./modules/es7.reflect.get-own-metadata"),t("./modules/es7.reflect.get-own-metadata-keys"),t("./modules/es7.reflect.has-metadata"),t("./modules/es7.reflect.has-own-metadata"),t("./modules/es7.reflect.metadata"),t("./modules/es7.asap"),t("./modules/es7.observable"),t("./modules/web.timers"),t("./modules/web.immediate"),t("./modules/web.dom.iterable"),e.exports=t("./modules/_core")},{"./modules/_core":25,"./modules/es6.array.copy-within":130,"./modules/es6.array.every":131,"./modules/es6.array.fill":132,"./modules/es6.array.filter":133,"./modules/es6.array.find":135,"./modules/es6.array.find-index":134,"./modules/es6.array.for-each":136,"./modules/es6.array.from":137,"./modules/es6.array.index-of":138,"./modules/es6.array.is-array":139,"./modules/es6.array.iterator":140,"./modules/es6.array.join":141,"./modules/es6.array.last-index-of":142,"./modules/es6.array.map":143,"./modules/es6.array.of":144,"./modules/es6.array.reduce":146,"./modules/es6.array.reduce-right":145,"./modules/es6.array.slice":147,"./modules/es6.array.some":148,"./modules/es6.array.sort":149,"./modules/es6.array.species":150,"./modules/es6.date.now":151,"./modules/es6.date.to-iso-string":152,"./modules/es6.date.to-json":153,"./modules/es6.date.to-primitive":154,"./modules/es6.date.to-string":155,"./modules/es6.function.bind":156,"./modules/es6.function.has-instance":157,"./modules/es6.function.name":158,"./modules/es6.map":159,"./modules/es6.math.acosh":160,"./modules/es6.math.asinh":161,"./modules/es6.math.atanh":162,"./modules/es6.math.cbrt":163,"./modules/es6.math.clz32":164,"./modules/es6.math.cosh":165,"./modules/es6.math.expm1":166,"./modules/es6.math.fround":167,"./modules/es6.math.hypot":168,"./modules/es6.math.imul":169,"./modules/es6.math.log10":170,"./modules/es6.math.log1p":171,"./modules/es6.math.log2":172,"./modules/es6.math.sign":173,"./modules/es6.math.sinh":174,"./modules/es6.math.tanh":175,"./modules/es6.math.trunc":176,"./modules/es6.number.constructor":177,"./modules/es6.number.epsilon":178,"./modules/es6.number.is-finite":179,"./modules/es6.number.is-integer":180,"./modules/es6.number.is-nan":181,"./modules/es6.number.is-safe-integer":182,"./modules/es6.number.max-safe-integer":183,"./modules/es6.number.min-safe-integer":184,"./modules/es6.number.parse-float":185,"./modules/es6.number.parse-int":186,"./modules/es6.number.to-fixed":187,"./modules/es6.number.to-precision":188,"./modules/es6.object.assign":189,"./modules/es6.object.create":190,"./modules/es6.object.define-properties":191,"./modules/es6.object.define-property":192,"./modules/es6.object.freeze":193,"./modules/es6.object.get-own-property-descriptor":194,"./modules/es6.object.get-own-property-names":195,"./modules/es6.object.get-prototype-of":196,"./modules/es6.object.is":200,"./modules/es6.object.is-extensible":197,"./modules/es6.object.is-frozen":198,"./modules/es6.object.is-sealed":199,"./modules/es6.object.keys":201,"./modules/es6.object.prevent-extensions":202,"./modules/es6.object.seal":203,"./modules/es6.object.set-prototype-of":204,"./modules/es6.object.to-string":205,"./modules/es6.parse-float":206,"./modules/es6.parse-int":207,"./modules/es6.promise":208,"./modules/es6.reflect.apply":209,"./modules/es6.reflect.construct":210,"./modules/es6.reflect.define-property":211,"./modules/es6.reflect.delete-property":212,"./modules/es6.reflect.enumerate":213,"./modules/es6.reflect.get":216,"./modules/es6.reflect.get-own-property-descriptor":214,"./modules/es6.reflect.get-prototype-of":215,"./modules/es6.reflect.has":217,"./modules/es6.reflect.is-extensible":218,"./modules/es6.reflect.own-keys":219,"./modules/es6.reflect.prevent-extensions":220,"./modules/es6.reflect.set":222,"./modules/es6.reflect.set-prototype-of":221,"./modules/es6.regexp.constructor":223,"./modules/es6.regexp.flags":224,"./modules/es6.regexp.match":225,"./modules/es6.regexp.replace":226,"./modules/es6.regexp.search":227,"./modules/es6.regexp.split":228,"./modules/es6.regexp.to-string":229,"./modules/es6.set":230,"./modules/es6.string.anchor":231,"./modules/es6.string.big":232,"./modules/es6.string.blink":233,"./modules/es6.string.bold":234,"./modules/es6.string.code-point-at":235,"./modules/es6.string.ends-with":236,"./modules/es6.string.fixed":237,"./modules/es6.string.fontcolor":238,"./modules/es6.string.fontsize":239,"./modules/es6.string.from-code-point":240,"./modules/es6.string.includes":241,"./modules/es6.string.italics":242,"./modules/es6.string.iterator":243,"./modules/es6.string.link":244,"./modules/es6.string.raw":245,"./modules/es6.string.repeat":246,"./modules/es6.string.small":247,"./modules/es6.string.starts-with":248,"./modules/es6.string.strike":249,"./modules/es6.string.sub":250,"./modules/es6.string.sup":251,"./modules/es6.string.trim":252,"./modules/es6.symbol":253,"./modules/es6.typed.array-buffer":254,"./modules/es6.typed.data-view":255,"./modules/es6.typed.float32-array":256,"./modules/es6.typed.float64-array":257,"./modules/es6.typed.int16-array":258,"./modules/es6.typed.int32-array":259,"./modules/es6.typed.int8-array":260,"./modules/es6.typed.uint16-array":261,"./modules/es6.typed.uint32-array":262,"./modules/es6.typed.uint8-array":263,"./modules/es6.typed.uint8-clamped-array":264,"./modules/es6.weak-map":265,"./modules/es6.weak-set":266,"./modules/es7.array.flat-map":267,"./modules/es7.array.flatten":268,"./modules/es7.array.includes":269,"./modules/es7.asap":270,"./modules/es7.error.is-error":271,"./modules/es7.global":272,"./modules/es7.map.from":273,"./modules/es7.map.of":274,"./modules/es7.map.to-json":275,"./modules/es7.math.clamp":276,"./modules/es7.math.deg-per-rad":277,"./modules/es7.math.degrees":278,"./modules/es7.math.fscale":279,"./modules/es7.math.iaddh":280,"./modules/es7.math.imulh":281,"./modules/es7.math.isubh":282,"./modules/es7.math.rad-per-deg":283,"./modules/es7.math.radians":284,"./modules/es7.math.scale":285,"./modules/es7.math.signbit":286,"./modules/es7.math.umulh":287,"./modules/es7.object.define-getter":288,"./modules/es7.object.define-setter":289,"./modules/es7.object.entries":290,"./modules/es7.object.get-own-property-descriptors":291,"./modules/es7.object.lookup-getter":292,"./modules/es7.object.lookup-setter":293,"./modules/es7.object.values":294,"./modules/es7.observable":295,"./modules/es7.promise.finally":296,"./modules/es7.promise.try":297,"./modules/es7.reflect.define-metadata":298,"./modules/es7.reflect.delete-metadata":299,"./modules/es7.reflect.get-metadata":301,"./modules/es7.reflect.get-metadata-keys":300,"./modules/es7.reflect.get-own-metadata":303,"./modules/es7.reflect.get-own-metadata-keys":302,"./modules/es7.reflect.has-metadata":304,"./modules/es7.reflect.has-own-metadata":305,"./modules/es7.reflect.metadata":306,"./modules/es7.set.from":307,"./modules/es7.set.of":308,"./modules/es7.set.to-json":309,"./modules/es7.string.at":310,"./modules/es7.string.match-all":311,"./modules/es7.string.pad-end":312,"./modules/es7.string.pad-start":313,"./modules/es7.string.trim-left":314,"./modules/es7.string.trim-right":315,"./modules/es7.symbol.async-iterator":316,"./modules/es7.symbol.observable":317,"./modules/es7.system.global":318,"./modules/es7.weak-map.from":319,"./modules/es7.weak-map.of":320,"./modules/es7.weak-set.from":321,"./modules/es7.weak-set.of":322,"./modules/web.dom.iterable":323,"./modules/web.immediate":324,"./modules/web.timers":325}],327:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IMAGENET_CLASSES={0:"tench, Tinca tinca",1:"goldfish, Carassius auratus",2:"great white shark, white shark, man-eater, man-eating shark, Carcharodon carcharias",3:"tiger shark, Galeocerdo cuvieri",4:"hammerhead, hammerhead shark",5:"electric ray, crampfish, numbfish, torpedo",6:"stingray",7:"cock",8:"hen",9:"ostrich, Struthio camelus",10:"brambling, Fringilla montifringilla",11:"goldfinch, Carduelis carduelis",12:"house finch, linnet, Carpodacus mexicanus",13:"junco, snowbird",14:"indigo bunting, indigo finch, indigo bird, Passerina cyanea",15:"robin, American robin, Turdus migratorius",16:"bulbul",17:"jay",18:"magpie",19:"chickadee",20:"water ouzel, dipper",21:"kite",22:"bald eagle, American eagle, Haliaeetus leucocephalus",23:"vulture",24:"great grey owl, great gray owl, Strix nebulosa",25:"European fire salamander, Salamandra salamandra",26:"common newt, Triturus vulgaris",27:"eft",28:"spotted salamander, Ambystoma maculatum",29:"axolotl, mud puppy, Ambystoma mexicanum",30:"bullfrog, Rana catesbeiana",31:"tree frog, tree-frog",32:"tailed frog, bell toad, ribbed toad, tailed toad, Ascaphus trui",33:"loggerhead, loggerhead turtle, Caretta caretta",34:"leatherback turtle, leatherback, leathery turtle, Dermochelys coriacea",35:"mud turtle",36:"terrapin",37:"box turtle, box tortoise",38:"banded gecko",39:"common iguana, iguana, Iguana iguana",40:"American chameleon, anole, Anolis carolinensis",41:"whiptail, whiptail lizard",42:"agama",43:"frilled lizard, Chlamydosaurus kingi",44:"alligator lizard",45:"Gila monster, Heloderma suspectum",46:"green lizard, Lacerta viridis",47:"African chameleon, Chamaeleo chamaeleon",48:"Komodo dragon, Komodo lizard, dragon lizard, giant lizard, Varanus komodoensis",49:"African crocodile, Nile crocodile, Crocodylus niloticus",50:"American alligator, Alligator mississipiensis",51:"triceratops",52:"thunder snake, worm snake, Carphophis amoenus",53:"ringneck snake, ring-necked snake, ring snake",54:"hognose snake, puff adder, sand viper",55:"green snake, grass snake",56:"king snake, kingsnake",57:"garter snake, grass snake",58:"water snake",59:"vine snake",60:"night snake, Hypsiglena torquata",61:"boa constrictor, Constrictor constrictor",62:"rock python, rock snake, Python sebae",63:"Indian cobra, Naja naja",64:"green mamba",65:"sea snake",66:"horned viper, cerastes, sand viper, horned asp, Cerastes cornutus",67:"diamondback, diamondback rattlesnake, Crotalus adamanteus",68:"sidewinder, horned rattlesnake, Crotalus cerastes",69:"trilobite",70:"harvestman, daddy longlegs, Phalangium opilio",71:"scorpion",72:"black and gold garden spider, Argiope aurantia",73:"barn spider, Araneus cavaticus",74:"garden spider, Aranea diademata",75:"black widow, Latrodectus mactans",76:"tarantula",77:"wolf spider, hunting spider",78:"tick",79:"centipede",80:"black grouse",81:"ptarmigan",82:"ruffed grouse, partridge, Bonasa umbellus",83:"prairie chicken, prairie grouse, prairie fowl",84:"peacock",85:"quail",86:"partridge",87:"African grey, African gray, Psittacus erithacus",88:"macaw",89:"sulphur-crested cockatoo, Kakatoe galerita, Cacatua galerita",90:"lorikeet",91:"coucal",92:"bee eater",93:"hornbill",94:"hummingbird",95:"jacamar",96:"toucan",97:"drake",98:"red-breasted merganser, Mergus serrator",99:"goose",100:"black swan, Cygnus atratus",101:"tusker",102:"echidna, spiny anteater, anteater",103:"platypus, duckbill, duckbilled platypus, duck-billed platypus, Ornithorhynchus anatinus",104:"wallaby, brush kangaroo",105:"koala, koala bear, kangaroo bear, native bear, Phascolarctos cinereus",106:"wombat",107:"jelly fish",108:"sea anemone, anemone",109:"brain coral",110:"flatworm, platyhelminth",111:"nematode, nematode worm, roundworm",112:"conch",113:"snail",114:"slug",115:"sea slug, nudibranch",116:"chiton, coat-of-mail shell, sea cradle, polyplacophore",117:"chambered nautilus, pearly nautilus, nautilus",118:"Dungeness crab, Cancer magister",119:"rock crab, Cancer irroratus",120:"fiddler crab",121:"king crab, Alaska crab, Alaskan king crab, Alaska king crab, Paralithodes camtschatica",122:"American lobster, Northern lobster, Maine lobster, Homarus americanus",123:"spiny lobster, langouste, rock lobster, crawfish, crayfish, sea crawfish",124:"crayfish, crawfish, crawdad, crawdaddy",125:"hermit crab",126:"isopod",127:"white stork, Ciconia ciconia",128:"black stork, Ciconia nigra",129:"spoonbill",130:"flamingo",131:"little blue heron, Egretta caerulea",132:"American egret, great white heron, Egretta albus",133:"bittern",134:"crane",135:"limpkin, Aramus pictus",136:"European gallinule, Porphyrio porphyrio",137:"American coot, marsh hen, mud hen, water hen, Fulica americana",138:"bustard",139:"ruddy turnstone, Arenaria interpres",140:"red-backed sandpiper, dunlin, Erolia alpina",141:"redshank, Tringa totanus",142:"dowitcher",143:"oystercatcher, oyster catcher",144:"pelican",145:"king penguin, Aptenodytes patagonica",146:"albatross, mollymawk",147:"grey whale, gray whale, devilfish, Eschrichtius gibbosus, Eschrichtius robustus",148:"killer whale, killer, orca, grampus, sea wolf, Orcinus orca",149:"dugong, Dugong dugon",150:"sea lion",151:"Chihuahua",152:"Japanese spaniel",153:"Maltese dog, Maltese terrier, Maltese",154:"Pekinese, Pekingese, Peke",155:"Shih-Tzu",156:"Blenheim spaniel",157:"papillon",158:"toy terrier",159:"Rhodesian ridgeback",160:"Afghan hound, Afghan",161:"basset, basset hound",162:"beagle",163:"bloodhound, sleuthhound",164:"bluetick",165:"black-and-tan coonhound",166:"Walker hound, Walker foxhound",167:"English foxhound",168:"redbone",169:"borzoi, Russian wolfhound",170:"Irish wolfhound",171:"Italian greyhound",172:"whippet",173:"Ibizan hound, Ibizan Podenco",174:"Norwegian elkhound, elkhound",175:"otterhound, otter hound",176:"Saluki, gazelle hound",177:"Scottish deerhound, deerhound",178:"Weimaraner",179:"Staffordshire bullterrier, Staffordshire bull terrier",180:"American Staffordshire terrier, Staffordshire terrier, American pit bull terrier, pit bull terrier",181:"Bedlington terrier",182:"Border terrier",183:"Kerry blue terrier",184:"Irish terrier",185:"Norfolk terrier",186:"Norwich terrier",187:"Yorkshire terrier",188:"wire-haired fox terrier",189:"Lakeland terrier",190:"Sealyham terrier, Sealyham",191:"Airedale, Airedale terrier",192:"cairn, cairn terrier",193:"Australian terrier",194:"Dandie Dinmont, Dandie Dinmont terrier",195:"Boston bull, Boston terrier",196:"miniature schnauzer",197:"giant schnauzer",198:"standard schnauzer",199:"Scotch terrier, Scottish terrier, Scottie",200:"Tibetan terrier, chrysanthemum dog",201:"silky terrier, Sydney silky",202:"soft-coated wheaten terrier",203:"West Highland white terrier",204:"Lhasa, Lhasa apso",205:"flat-coated retriever",206:"curly-coated retriever",207:"golden retriever",208:"Labrador retriever",209:"Chesapeake Bay retriever",210:"German short-haired pointer",211:"vizsla, Hungarian pointer",212:"English setter",213:"Irish setter, red setter",214:"Gordon setter",215:"Brittany spaniel",216:"clumber, clumber spaniel",217:"English springer, English springer spaniel",218:"Welsh springer spaniel",219:"cocker spaniel, English cocker spaniel, cocker",220:"Sussex spaniel",221:"Irish water spaniel",222:"kuvasz",223:"schipperke",224:"groenendael",225:"malinois",226:"briard",227:"kelpie",228:"komondor",229:"Old English sheepdog, bobtail",230:"Shetland sheepdog, Shetland sheep dog, Shetland",231:"collie",232:"Border collie",233:"Bouvier des Flandres, Bouviers des Flandres",234:"Rottweiler",235:"German shepherd, German shepherd dog, German police dog, alsatian",236:"Doberman, Doberman pinscher",237:"miniature pinscher",238:"Greater Swiss Mountain dog",239:"Bernese mountain dog",240:"Appenzeller",241:"EntleBucher",242:"boxer",243:"bull mastiff",244:"Tibetan mastiff",245:"French bulldog",246:"Great Dane",247:"Saint Bernard, St Bernard",248:"Eskimo dog, husky",249:"malamute, malemute, Alaskan malamute",250:"Siberian husky",251:"dalmatian, coach dog, carriage dog",252:"affenpinscher, monkey pinscher, monkey dog",253:"basenji",254:"pug, pug-dog",255:"Leonberg",256:"Newfoundland, Newfoundland dog",257:"Great Pyrenees",258:"Samoyed, Samoyede",259:"Pomeranian",260:"chow, chow chow",261:"keeshond",262:"Brabancon griffon",263:"Pembroke, Pembroke Welsh corgi",264:"Cardigan, Cardigan Welsh corgi",265:"toy poodle",266:"miniature poodle",267:"standard poodle",268:"Mexican hairless",269:"timber wolf, grey wolf, gray wolf, Canis lupus",270:"white wolf, Arctic wolf, Canis lupus tundrarum",271:"red wolf, maned wolf, Canis rufus, Canis niger",272:"coyote, prairie wolf, brush wolf, Canis latrans",273:"dingo, warrigal, warragal, Canis dingo",274:"dhole, Cuon alpinus",275:"African hunting dog, hyena dog, Cape hunting dog, Lycaon pictus",276:"hyena, hyaena",277:"red fox, Vulpes vulpes",278:"kit fox, Vulpes macrotis",279:"Arctic fox, white fox, Alopex lagopus",280:"grey fox, gray fox, Urocyon cinereoargenteus",281:"tabby, tabby cat",282:"tiger cat",283:"Persian cat",284:"Siamese cat, Siamese",285:"Egyptian cat",286:"cougar, puma, catamount, mountain lion, painter, panther, Felis concolor",287:"lynx, catamount",288:"leopard, Panthera pardus",289:"snow leopard, ounce, Panthera uncia",290:"jaguar, panther, Panthera onca, Felis onca",291:"lion, king of beasts, Panthera leo",292:"tiger, Panthera tigris",293:"cheetah, chetah, Acinonyx jubatus",294:"brown bear, bruin, Ursus arctos",295:"American black bear, black bear, Ursus americanus, Euarctos americanus",296:"ice bear, polar bear, Ursus Maritimus, Thalarctos maritimus",297:"sloth bear, Melursus ursinus, Ursus ursinus",298:"mongoose",299:"meerkat, mierkat",300:"tiger beetle",301:"ladybug, ladybeetle, lady beetle, ladybird, ladybird beetle",302:"ground beetle, carabid beetle",303:"long-horned beetle, longicorn, longicorn beetle",304:"leaf beetle, chrysomelid",305:"dung beetle",306:"rhinoceros beetle",307:"weevil",308:"fly",309:"bee",310:"ant, emmet, pismire",311:"grasshopper, hopper",312:"cricket",313:"walking stick, walkingstick, stick insect",314:"cockroach, roach",315:"mantis, mantid",316:"cicada, cicala",317:"leafhopper",318:"lacewing, lacewing fly",319:"dragonfly, darning needle, devil's darning needle, sewing needle, snake feeder, snake doctor, mosquito hawk, skeeter hawk",320:"damselfly",321:"admiral",322:"ringlet, ringlet butterfly",323:"monarch, monarch butterfly, milkweed butterfly, Danaus plexippus",324:"cabbage butterfly",325:"sulphur butterfly, sulfur butterfly",326:"lycaenid, lycaenid butterfly",327:"starfish, sea star",328:"sea urchin",329:"sea cucumber, holothurian",330:"wood rabbit, cottontail, cottontail rabbit",331:"hare",332:"Angora, Angora rabbit",333:"hamster",334:"porcupine, hedgehog",335:"fox squirrel, eastern fox squirrel, Sciurus niger",336:"marmot",337:"beaver",338:"guinea pig, Cavia cobaya",339:"sorrel",340:"zebra",341:"hog, pig, grunter, squealer, Sus scrofa",342:"wild boar, boar, Sus scrofa",343:"warthog",344:"hippopotamus, hippo, river horse, Hippopotamus amphibius",345:"ox",346:"water buffalo, water ox, Asiatic buffalo, Bubalus bubalis",347:"bison",348:"ram, tup",349:"bighorn, bighorn sheep, cimarron, Rocky Mountain bighorn, Rocky Mountain sheep, Ovis canadensis",350:"ibex, Capra ibex",351:"hartebeest",352:"impala, Aepyceros melampus",353:"gazelle",354:"Arabian camel, dromedary, Camelus dromedarius",355:"llama",356:"weasel",357:"mink",358:"polecat, fitch, foulmart, foumart, Mustela putorius",359:"black-footed ferret, ferret, Mustela nigripes",360:"otter",361:"skunk, polecat, wood pussy",362:"badger",363:"armadillo",364:"three-toed sloth, ai, Bradypus tridactylus",365:"orangutan, orang, orangutang, Pongo pygmaeus",366:"gorilla, Gorilla gorilla",367:"chimpanzee, chimp, Pan troglodytes",368:"gibbon, Hylobates lar",369:"siamang, Hylobates syndactylus, Symphalangus syndactylus",370:"guenon, guenon monkey",371:"patas, hussar monkey, Erythrocebus patas",372:"baboon",373:"macaque",374:"langur",375:"colobus, colobus monkey",376:"proboscis monkey, Nasalis larvatus",377:"marmoset",378:"capuchin, ringtail, Cebus capucinus",379:"howler monkey, howler",380:"titi, titi monkey",381:"spider monkey, Ateles geoffroyi",382:"squirrel monkey, Saimiri sciureus",383:"Madagascar cat, ring-tailed lemur, Lemur catta",384:"indri, indris, Indri indri, Indri brevicaudatus",385:"Indian elephant, Elephas maximus",386:"African elephant, Loxodonta africana",387:"lesser panda, red panda, panda, bear cat, cat bear, Ailurus fulgens",388:"giant panda, panda, panda bear, coon bear, Ailuropoda melanoleuca",389:"barracouta, snoek",390:"eel",391:"coho, cohoe, coho salmon, blue jack, silver salmon, Oncorhynchus kisutch",392:"rock beauty, Holocanthus tricolor",393:"anemone fish",394:"sturgeon",395:"gar, garfish, garpike, billfish, Lepisosteus osseus",396:"lionfish",397:"puffer, pufferfish, blowfish, globefish",398:"abacus",399:"abaya",400:"academic gown, academic robe, judge's robe",401:"accordion, piano accordion, squeeze box",402:"acoustic guitar",403:"aircraft carrier, carrier, flattop, attack aircraft carrier",404:"airliner",405:"airship, dirigible",406:"altar",407:"ambulance",408:"amphibian, amphibious vehicle",409:"analog clock",410:"apiary, bee house",411:"apron",412:"ashcan, trash can, garbage can, wastebin, ash bin, ash-bin, ashbin, dustbin, trash barrel, trash bin",413:"assault rifle, assault gun",414:"backpack, back pack, knapsack, packsack, rucksack, haversack",415:"bakery, bakeshop, bakehouse",416:"balance beam, beam",417:"balloon",418:"ballpoint, ballpoint pen, ballpen, Biro",419:"Band Aid",420:"banjo",421:"bannister, banister, balustrade, balusters, handrail",422:"barbell",423:"barber chair",424:"barbershop",425:"barn",426:"barometer",427:"barrel, cask",428:"barrow, garden cart, lawn cart, wheelbarrow",429:"baseball",430:"basketball",431:"bassinet",432:"bassoon",433:"bathing cap, swimming cap",434:"bath towel",435:"bathtub, bathing tub, bath, tub",436:"beach wagon, station wagon, wagon, estate car, beach waggon, station waggon, waggon",437:"beacon, lighthouse, beacon light, pharos",438:"beaker",439:"bearskin, busby, shako",440:"beer bottle",441:"beer glass",442:"bell cote, bell cot",443:"bib",444:"bicycle-built-for-two, tandem bicycle, tandem",445:"bikini, two-piece",446:"binder, ring-binder",447:"binoculars, field glasses, opera glasses",448:"birdhouse",449:"boathouse",450:"bobsled, bobsleigh, bob",451:"bolo tie, bolo, bola tie, bola",452:"bonnet, poke bonnet",453:"bookcase",454:"bookshop, bookstore, bookstall",455:"bottlecap",456:"bow",457:"bow tie, bow-tie, bowtie",458:"brass, memorial tablet, plaque",459:"brassiere, bra, bandeau",460:"breakwater, groin, groyne, mole, bulwark, seawall, jetty",461:"breastplate, aegis, egis",462:"broom",463:"bucket, pail",464:"buckle",465:"bulletproof vest",466:"bullet train, bullet",467:"butcher shop, meat market",468:"cab, hack, taxi, taxicab",469:"caldron, cauldron",470:"candle, taper, wax light",471:"cannon",472:"canoe",473:"can opener, tin opener",474:"cardigan",475:"car mirror",476:"carousel, carrousel, merry-go-round, roundabout, whirligig",477:"carpenter's kit, tool kit",478:"carton",479:"car wheel",480:"cash machine, cash dispenser, automated teller machine, automatic teller machine, automated teller, automatic teller, ATM",481:"cassette",482:"cassette player",483:"castle",484:"catamaran",485:"CD player",486:"cello, violoncello",487:"cellular telephone, cellular phone, cellphone, cell, mobile phone",488:"chain",489:"chainlink fence",490:"chain mail, ring mail, mail, chain armor, chain armour, ring armor, ring armour",491:"chain saw, chainsaw",492:"chest",493:"chiffonier, commode",494:"chime, bell, gong",495:"china cabinet, china closet",496:"Christmas stocking",497:"church, church building",498:"cinema, movie theater, movie theatre, movie house, picture palace",499:"cleaver, meat cleaver, chopper",500:"cliff dwelling",501:"cloak",502:"clog, geta, patten, sabot",503:"cocktail shaker",504:"coffee mug",505:"coffeepot",506:"coil, spiral, volute, whorl, helix",507:"combination lock",508:"computer keyboard, keypad",509:"confectionery, confectionary, candy store",510:"container ship, containership, container vessel",511:"convertible",512:"corkscrew, bottle screw",513:"cornet, horn, trumpet, trump",514:"cowboy boot",515:"cowboy hat, ten-gallon hat",516:"cradle",517:"crane",518:"crash helmet",519:"crate",520:"crib, cot",521:"Crock Pot",522:"croquet ball",523:"crutch",524:"cuirass",525:"dam, dike, dyke",526:"desk",527:"desktop computer",528:"dial telephone, dial phone",529:"diaper, nappy, napkin",530:"digital clock",531:"digital watch",532:"dining table, board",533:"dishrag, dishcloth",534:"dishwasher, dish washer, dishwashing machine",535:"disk brake, disc brake",536:"dock, dockage, docking facility",537:"dogsled, dog sled, dog sleigh",538:"dome",539:"doormat, welcome mat",540:"drilling platform, offshore rig",541:"drum, membranophone, tympan",542:"drumstick",543:"dumbbell",544:"Dutch oven",545:"electric fan, blower",546:"electric guitar",547:"electric locomotive",548:"entertainment center",549:"envelope",550:"espresso maker",551:"face powder",552:"feather boa, boa",553:"file, file cabinet, filing cabinet",554:"fireboat",555:"fire engine, fire truck",556:"fire screen, fireguard",557:"flagpole, flagstaff",558:"flute, transverse flute",559:"folding chair",560:"football helmet",561:"forklift",562:"fountain",563:"fountain pen",564:"four-poster",565:"freight car",566:"French horn, horn",567:"frying pan, frypan, skillet",568:"fur coat",569:"garbage truck, dustcart",570:"gasmask, respirator, gas helmet",571:"gas pump, gasoline pump, petrol pump, island dispenser",572:"goblet",573:"go-kart",574:"golf ball",575:"golfcart, golf cart",576:"gondola",577:"gong, tam-tam",578:"gown",579:"grand piano, grand",580:"greenhouse, nursery, glasshouse",581:"grille, radiator grille",582:"grocery store, grocery, food market, market",583:"guillotine",584:"hair slide",585:"hair spray",586:"half track",587:"hammer",588:"hamper",589:"hand blower, blow dryer, blow drier, hair dryer, hair drier",590:"hand-held computer, hand-held microcomputer",591:"handkerchief, hankie, hanky, hankey",592:"hard disc, hard disk, fixed disk",593:"harmonica, mouth organ, harp, mouth harp",594:"harp",595:"harvester, reaper",596:"hatchet",597:"holster",598:"home theater, home theatre",599:"honeycomb",600:"hook, claw",601:"hoopskirt, crinoline",602:"horizontal bar, high bar",603:"horse cart, horse-cart",604:"hourglass",605:"iPod",606:"iron, smoothing iron",607:"jack-o'-lantern",608:"jean, blue jean, denim",609:"jeep, landrover",610:"jersey, T-shirt, tee shirt",611:"jigsaw puzzle",612:"jinrikisha, ricksha, rickshaw",613:"joystick",614:"kimono",615:"knee pad",616:"knot",617:"lab coat, laboratory coat",618:"ladle",619:"lampshade, lamp shade",620:"laptop, laptop computer",621:"lawn mower, mower",622:"lens cap, lens cover",623:"letter opener, paper knife, paperknife",624:"library",625:"lifeboat",626:"lighter, light, igniter, ignitor",627:"limousine, limo",628:"liner, ocean liner",629:"lipstick, lip rouge",630:"Loafer",631:"lotion",632:"loudspeaker, speaker, speaker unit, loudspeaker system, speaker system",633:"loupe, jeweler's loupe",634:"lumbermill, sawmill",635:"magnetic compass",636:"mailbag, postbag",637:"mailbox, letter box",638:"maillot",639:"maillot, tank suit",640:"manhole cover",641:"maraca",642:"marimba, xylophone",643:"mask",644:"matchstick",645:"maypole",646:"maze, labyrinth",647:"measuring cup",648:"medicine chest, medicine cabinet",649:"megalith, megalithic structure",650:"microphone, mike",651:"microwave, microwave oven",652:"military uniform",653:"milk can",654:"minibus",655:"miniskirt, mini",656:"minivan",657:"missile",658:"mitten",659:"mixing bowl",660:"mobile home, manufactured home",661:"Model T",662:"modem",663:"monastery",664:"monitor",665:"moped",666:"mortar",667:"mortarboard",668:"mosque",669:"mosquito net",670:"motor scooter, scooter",671:"mountain bike, all-terrain bike, off-roader",672:"mountain tent",673:"mouse, computer mouse",674:"mousetrap",675:"moving van",676:"muzzle",677:"nail",678:"neck brace",679:"necklace",680:"nipple",681:"notebook, notebook computer",682:"obelisk",683:"oboe, hautboy, hautbois",684:"ocarina, sweet potato",685:"odometer, hodometer, mileometer, milometer",686:"oil filter",687:"organ, pipe organ",688:"oscilloscope, scope, cathode-ray oscilloscope, CRO",689:"overskirt",690:"oxcart",691:"oxygen mask",692:"packet",693:"paddle, boat paddle",694:"paddlewheel, paddle wheel",695:"padlock",696:"paintbrush",697:"pajama, pyjama, pj's, jammies",698:"palace",699:"panpipe, pandean pipe, syrinx",700:"paper towel",701:"parachute, chute",702:"parallel bars, bars",703:"park bench",704:"parking meter",705:"passenger car, coach, carriage",706:"patio, terrace",707:"pay-phone, pay-station",708:"pedestal, plinth, footstall",709:"pencil box, pencil case",710:"pencil sharpener",711:"perfume, essence",712:"Petri dish",713:"photocopier",714:"pick, plectrum, plectron",715:"pickelhaube",716:"picket fence, paling",717:"pickup, pickup truck",718:"pier",719:"piggy bank, penny bank",720:"pill bottle",721:"pillow",722:"ping-pong ball",723:"pinwheel",724:"pirate, pirate ship",725:"pitcher, ewer",726:"plane, carpenter's plane, woodworking plane",727:"planetarium",728:"plastic bag",729:"plate rack",730:"plow, plough",731:"plunger, plumber's helper",732:"Polaroid camera, Polaroid Land camera",733:"pole",734:"police van, police wagon, paddy wagon, patrol wagon, wagon, black Maria",735:"poncho",736:"pool table, billiard table, snooker table",737:"pop bottle, soda bottle",738:"pot, flowerpot",739:"potter's wheel",740:"power drill",741:"prayer rug, prayer mat",742:"printer",743:"prison, prison house",744:"projectile, missile",745:"projector",746:"puck, hockey puck",747:"punching bag, punch bag, punching ball, punchball",748:"purse",749:"quill, quill pen",750:"quilt, comforter, comfort, puff",751:"racer, race car, racing car",752:"racket, racquet",753:"radiator",754:"radio, wireless",755:"radio telescope, radio reflector",756:"rain barrel",757:"recreational vehicle, RV, R.V.",758:"reel",759:"reflex camera",760:"refrigerator, icebox",761:"remote control, remote",762:"restaurant, eating house, eating place, eatery",763:"revolver, six-gun, six-shooter",764:"rifle",765:"rocking chair, rocker",766:"rotisserie",767:"rubber eraser, rubber, pencil eraser",768:"rugby ball",769:"rule, ruler",770:"running shoe",771:"safe",772:"safety pin",773:"saltshaker, salt shaker",774:"sandal",775:"sarong",776:"sax, saxophone",777:"scabbard",778:"scale, weighing machine",779:"school bus",780:"schooner",781:"scoreboard",782:"screen, CRT screen",783:"screw",784:"screwdriver",785:"seat belt, seatbelt",786:"sewing machine",787:"shield, buckler",788:"shoe shop, shoe-shop, shoe store",789:"shoji",790:"shopping basket",791:"shopping cart",792:"shovel",793:"shower cap",794:"shower curtain",795:"ski",796:"ski mask",797:"sleeping bag",798:"slide rule, slipstick",799:"sliding door",800:"slot, one-armed bandit",801:"snorkel",802:"snowmobile",803:"snowplow, snowplough",804:"soap dispenser",805:"soccer ball",806:"sock",807:"solar dish, solar collector, solar furnace",808:"sombrero",809:"soup bowl",810:"space bar",811:"space heater",812:"space shuttle",813:"spatula",814:"speedboat",815:"spider web, spider's web",816:"spindle",817:"sports car, sport car",818:"spotlight, spot",819:"stage",820:"steam locomotive",821:"steel arch bridge",822:"steel drum",823:"stethoscope",824:"stole",825:"stone wall",826:"stopwatch, stop watch",827:"stove",828:"strainer",829:"streetcar, tram, tramcar, trolley, trolley car",830:"stretcher",831:"studio couch, day bed",832:"stupa, tope",833:"submarine, pigboat, sub, U-boat",834:"suit, suit of clothes",835:"sundial",836:"sunglass",837:"sunglasses, dark glasses, shades",838:"sunscreen, sunblock, sun blocker",839:"suspension bridge",840:"swab, swob, mop",841:"sweatshirt",842:"swimming trunks, bathing trunks",843:"swing",844:"switch, electric switch, electrical switch",845:"syringe",846:"table lamp",847:"tank, army tank, armored combat vehicle, armoured combat vehicle",848:"tape player",849:"teapot",850:"teddy, teddy bear",851:"television, television system",852:"tennis ball",853:"thatch, thatched roof",854:"theater curtain, theatre curtain",855:"thimble",856:"thresher, thrasher, threshing machine",857:"throne",858:"tile roof",859:"toaster",860:"tobacco shop, tobacconist shop, tobacconist",861:"toilet seat",862:"torch",863:"totem pole",864:"tow truck, tow car, wrecker",865:"toyshop",866:"tractor",867:"trailer truck, tractor trailer, trucking rig, rig, articulated lorry, semi",868:"tray",869:"trench coat",870:"tricycle, trike, velocipede",871:"trimaran",872:"tripod",873:"triumphal arch",874:"trolleybus, trolley coach, trackless trolley",875:"trombone",876:"tub, vat",877:"turnstile",878:"typewriter keyboard",879:"umbrella",880:"unicycle, monocycle",881:"upright, upright piano",882:"vacuum, vacuum cleaner",883:"vase",884:"vault",885:"velvet",886:"vending machine",887:"vestment",888:"viaduct",889:"violin, fiddle",890:"volleyball",891:"waffle iron",892:"wall clock",893:"wallet, billfold, notecase, pocketbook",894:"wardrobe, closet, press",895:"warplane, military plane",896:"washbasin, handbasin, washbowl, lavabo, wash-hand basin",897:"washer, automatic washer, washing machine",898:"water bottle",899:"water jug",900:"water tower",901:"whiskey jug",902:"whistle",903:"wig",904:"window screen",905:"window shade",906:"Windsor tie",907:"wine bottle",908:"wing",909:"wok",910:"wooden spoon",911:"wool, woolen, woollen",912:"worm fence, snake fence, snake-rail fence, Virginia fence",913:"wreck",914:"yawl",915:"yurt",916:"web site, website, internet site, site",917:"comic book",918:"crossword puzzle, crossword",919:"street sign",920:"traffic light, traffic signal, stoplight",921:"book jacket, dust cover, dust jacket, dust wrapper",922:"menu",923:"plate",924:"guacamole",925:"consomme",926:"hot pot, hotpot",927:"trifle",928:"ice cream, icecream",929:"ice lolly, lolly, lollipop, popsicle",930:"French loaf",931:"bagel, beigel",932:"pretzel",933:"cheeseburger",934:"hotdog, hot dog, red hot",935:"mashed potato",936:"head cabbage",937:"broccoli",938:"cauliflower",939:"zucchini, courgette",940:"spaghetti squash",941:"acorn squash",942:"butternut squash",943:"cucumber, cuke",944:"artichoke, globe artichoke",945:"bell pepper",946:"cardoon",947:"mushroom",948:"Granny Smith",949:"strawberry",950:"orange",951:"lemon",952:"fig",953:"pineapple, ananas",954:"banana",955:"jackfruit, jak, jack",956:"custard apple",957:"pomegranate",958:"hay",959:"carbonara",960:"chocolate sauce, chocolate syrup",961:"dough",962:"meat loaf, meatloaf",963:"pizza, pizza pie",964:"potpie",965:"burrito",966:"red wine",967:"espresso",968:"cup",969:"eggnog",970:"alp",971:"bubble",972:"cliff, drop, drop-off",973:"coral reef",974:"geyser",975:"lakeside, lakeshore",976:"promontory, headland, head, foreland",977:"sandbar, sand bar",978:"seashore, coast, seacoast, sea-coast",979:"valley, vale",980:"volcano",981:"ballplayer, baseball player",982:"groom, bridegroom",983:"scuba diver",984:"rapeseed",985:"daisy",986:"yellow lady's slipper, yellow lady-slipper, Cypripedium calceolus, Cypripedium parviflorum",987:"corn",988:"acorn",989:"hip, rose hip, rosehip",990:"buckeye, horse chestnut, conker",991:"coral fungus",992:"agaric",993:"gyromitra",994:"stinkhorn, carrion fungus",995:"earthstar",996:"hen-of-the-woods, hen of the woods, Polyporus frondosus, Grifola frondosa",997:"bolete",998:"ear, spike, capitulum",999:"toilet tissue, toilet paper, bathroom tissue"}},{}],328:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./squeezenet");r.SqueezeNet=n.SqueezeNet},{"./squeezenet":329}],329:[function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,a){function i(t){try{u(n.next(t))}catch(t){a(t)}}function s(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(i,s)}u((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=n[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(r,"__esModule",{value:!0});var a=t("deeplearn"),i=t("../util"),s=t("./imagenet_classes"),u=function(){function t(t){this.math=t,this.preprocessOffset=a.Array1D.new([103.939,116.779,123.68])}return t.prototype.load=function(){return n(this,void 0,void 0,function(){var t,e;return o(this,function(r){switch(r.label){case 0:return t=new a.CheckpointLoader("https://storage.googleapis.com/learnjs-data/checkpoint_zoo/squeezenet1_1/"),e=this,[4,t.getAllVariables()];case 1:return e.variables=r.sent(),[2]}})})},t.prototype.predict=function(t){return this.predictWithActivation(t).logits},t.prototype.predictWithActivation=function(t,e){var r=this,n=this.math.scope(function(){var n,o=r.math.subtract(t.asType("float32"),r.preprocessOffset),a=r.math.conv2d(o,r.variables["conv1_W:0"],r.variables["conv1_b:0"],2,0),i=r.math.relu(a);"conv_1"===e&&(n=i);var s=r.math.maxPool(i,3,2,0);"maxpool_1"===e&&(n=s);var u=r.fireModule(s,2);"fire2"===e&&(n=u);var c=r.fireModule(u,3);"fire3"===e&&(n=c);var l=r.math.maxPool(c,3,2,"valid");"maxpool_2"===e&&(n=l);var p=r.fireModule(l,4);"fire4"===e&&(n=p);var h=r.fireModule(p,5);"fire5"===e&&(n=h);var f=r.math.maxPool(h,3,2,0);"maxpool_3"===e&&(n=f);var d=r.fireModule(f,6);"fire6"===e&&(n=d);var m=r.fireModule(d,7);"fire7"===e&&(n=m);var g=r.fireModule(m,8);"fire8"===e&&(n=g);var v=r.fireModule(g,9);"fire9"===e&&(n=v);var y=r.math.conv2d(v,r.variables["conv10_W:0"],r.variables["conv10_b:0"],1,0);return"conv10"===e&&(n=y),[r.math.avgPool(y,y.shape[0],1,0).as1D(),n]}),o=n[0];return{activation:n[1],logits:o}},t.prototype.fireModule=function(t,e){var r=this.math.conv2d(t,this.variables["fire"+e+"/squeeze1x1_W:0"],this.variables["fire"+e+"/squeeze1x1_b:0"],1,0),n=this.math.relu(r),o=this.math.conv2d(n,this.variables["fire"+e+"/expand1x1_W:0"],this.variables["fire"+e+"/expand1x1_b:0"],1,0),a=this.math.relu(o),i=this.math.conv2d(n,this.variables["fire"+e+"/expand3x3_W:0"],this.variables["fire"+e+"/expand3x3_b:0"],1,1),s=this.math.relu(i);return this.math.concat3D(a,s,2)},t.prototype.getTopKClasses=function(t,e){return n(this,void 0,void 0,function(){var r,n,a,u,c,l,p,h,f=this;return o(this,function(o){switch(o.label){case 0:return r=this.math.scope(function(){return f.math.softmax(t).asType("float32")}),u=(a=i).topK,[4,r.data()];case 1:for(n=u.apply(a,[o.sent(),e]),r.dispose(),c=n.indices,l=n.values,p={},h=0;h<c.length;h++)p[s.IMAGENET_CLASSES[c[h]]]=l[h];return[2,p]}})})},t.prototype.dispose=function(){for(var t in this.preprocessOffset.dispose(),this.variables)this.variables[t].dispose()},t}();r.SqueezeNet=u},{"../util":330,"./imagenet_classes":327,deeplearn:371}],330:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.topK=function(t,e){for(var r=[],n=0;n<t.length;n++)r.push({value:t[n],index:n});r.sort(function(t,e){return e.value-t.value});var o=new Float32Array(e),a=new Int32Array(e);for(n=0;n<e;n++)o[n]=r[n].value,a[n]=r[n].index;return{values:o,indices:a}}},{}],331:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../math/ndarray"),o="manifest.json",a=function(){function t(t){this.urlPath=t,"/"!==this.urlPath.charAt(this.urlPath.length-1)&&(this.urlPath+="/")}return t.prototype.loadManifest=function(){var t=this;return new Promise(function(e,r){var n=new XMLHttpRequest;n.open("GET",t.urlPath+o),n.onload=function(){t.checkpointManifest=JSON.parse(n.responseText),e()},n.onerror=function(e){throw new Error(o+" not found at "+t.urlPath+". "+e)},n.send()})},t.prototype.getCheckpointManifest=function(){var t=this;return null==this.checkpointManifest?new Promise(function(e,r){t.loadManifest().then(function(){e(t.checkpointManifest)})}):new Promise(function(e,r){e(t.checkpointManifest)})},t.prototype.getAllVariables=function(){var t=this;return null!=this.variables?new Promise(function(e,r){e(t.variables)}):new Promise(function(e,r){t.getCheckpointManifest().then(function(r){for(var n=Object.keys(t.checkpointManifest),o=[],a=0;a<n.length;a++)o.push(t.getVariable(n[a]));Promise.all(o).then(function(r){t.variables={};for(var o=0;o<r.length;o++)t.variables[n[o]]=r[o];e(t.variables)})})})},t.prototype.getVariable=function(t){var e=this;if(!(t in this.checkpointManifest))throw new Error("Cannot load non-existant variable "+t);var r=function(r,o){var a=new XMLHttpRequest;a.responseType="arraybuffer";var i=e.checkpointManifest[t].filename;a.open("GET",e.urlPath+i),a.onload=function(){if(404===a.status)throw new Error("Not found variable "+t);var o=new Float32Array(a.response),i=n.NDArray.make(e.checkpointManifest[t].shape,{values:o});r(i)},a.onerror=function(e){throw new Error("Could not fetch variable "+t+": "+e)},a.send()};return null==this.checkpointManifest?new Promise(function(t,n){e.loadManifest().then(function(){new Promise(r).then(t)})}):new Promise(r)},t}();r.CheckpointLoader=a},{"../math/ndarray":431}],332:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../math/ndarray"),o=t("../util"),a=function(){function t(t){this.dataShapes=t,this.normalizationInfo={}}return t.prototype.getDataShape=function(t){return this.dataShapes[t]},t.prototype.getData=function(){return this.dataset},t.prototype.getStats=function(){var t=this;if(null==this.dataset)throw new Error("Data is null.");return this.dataset.map(function(e){return t.getStatsForData(e)})},t.prototype.getStatsForData=function(t){var e=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,n=t.map(function(t,e){return e});o.shuffle(n),n=n.slice(.1*n.length);for(var a=0;a<n.length;a++)for(var i=t[n[a]].dataSync(),s=0;s<i.length;s++)e=Math.min(e,i[s]),r=Math.max(r,i[s]);return{inputMin:e,inputMax:r,exampleCount:t.length,shape:t[0].shape}},t.prototype.normalizeExamplesToRange=function(t,e,r,a,i){var s=r instanceof Float32Array&&e instanceof Float32Array,u=a instanceof Float32Array&&i instanceof Float32Array,c=o.sizeFromShape(t[0].shape),l=[];return t.forEach(function(t){for(var o=t.dataSync(),p=new Float32Array(c),h=0;h<c;h++){var f=s?e[h]:e,d=(s?r[h]:r)-f,m=u?a[h]:a,g=(u?i[h]:i)-m;p[h]=0===d?m:m+g*(o[h]-f)/d}l.push(n.NDArray.make(t.shape,{values:p},"float32"))}),l},t.prototype.computeBounds=function(t){var e=this;if(null==this.dataset)throw new Error("Data is null.");var r=o.sizeFromShape(this.dataset[t][0].shape);this.normalizationInfo[t]={isNormalized:!1,minValues:new Float32Array(r),maxValues:new Float32Array(r)};for(var n=0;n<r;n++)this.normalizationInfo[t].minValues[n]=Number.POSITIVE_INFINITY,this.normalizationInfo[t].maxValues[n]=Number.NEGATIVE_INFINITY;this.dataset[t].forEach(function(n){for(var o=n.dataSync(),a=0;a<r;a++)e.normalizationInfo[t].minValues[a]=Math.min(e.normalizationInfo[t].minValues[a],o[a]),e.normalizationInfo[t].maxValues[a]=Math.max(e.normalizationInfo[t].maxValues[a],o[a])})},t.prototype.normalizeWithinBounds=function(t,e,r){if(null==this.dataset)throw new Error("Data is null.");if(t>=this.dataset.length)throw new Error("dataIndex out of bounds.");var n,o;null==this.normalizationInfo[t]&&this.computeBounds(t),this.normalizationInfo[t].isNormalized?(n=this.normalizationInfo[t].lowerBound,o=this.normalizationInfo[t].upperBound):(n=this.normalizationInfo[t].minValues,o=this.normalizationInfo[t].maxValues),this.dataset[t]=this.normalizeExamplesToRange(this.dataset[t],n,o,e,r),this.normalizationInfo[t].isNormalized=!0,this.normalizationInfo[t].lowerBound=e,this.normalizationInfo[t].upperBound=r},t.prototype.isNormalized=function(t){return null!=this.normalizationInfo&&this.normalizationInfo[t].isNormalized},t.prototype.removeNormalization=function(t){if(null==this.dataset)throw new Error("Training or test data is null.");this.isNormalized(t)&&(this.dataset[t]=this.normalizeExamplesToRange(this.dataset[t],this.normalizationInfo[t].lowerBound,this.normalizationInfo[t].upperBound,this.normalizationInfo[t].minValues,this.normalizationInfo[t].maxValues),this.normalizationInfo[t].isNormalized=!1)},t.prototype.unnormalizeExamples=function(t,e){return this.isNormalized(e)?this.normalizeExamplesToRange(t,this.normalizationInfo[e].lowerBound,this.normalizationInfo[e].upperBound,this.normalizationInfo[e].minValues,this.normalizationInfo[e].maxValues):t},t.prototype.dispose=function(){if(null!=this.dataset){for(var t=0;t<this.dataset.length;t++)for(var e=0;e<this.dataset[t].length;e++)this.dataset[t][e].dispose();this.dataset=[]}},t}();r.InMemoryDataset=a},{"../math/ndarray":431,"../util":448}],333:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../math/ndarray"),i=t("../util"),s=function(){function t(t){this.inputs=t,this.idx=0,this.inputCounter=0,this.epoch=0,this.shuffledIndices=i.createShuffledIndices(t[0].length),this.numInputs=t.length;for(var e=this.inputs[0].length,r=0;r<this.numInputs;r++)i.assert(this.inputs[r].length===e,"Number of examples must match across different inputs.");for(r=0;r<this.numInputs;r++)for(var n=this.inputs[r][0].shape,o=0;o<this.inputs[r].length;o++)i.assertShapesMatch(n,this.inputs[r][o].shape)}return t.prototype.getCurrentExampleIndex=function(){var t=this.idx;return this.inputCounter++,this.inputCounter>=this.numInputs&&(this.idx++,this.inputCounter=0,this.idx>=this.inputs[0].length&&(this.idx=0,this.epoch++)),t},t.prototype.getNextInput=function(t){var e=this.getCurrentExampleIndex();return this.inputs[t][this.shuffledIndices[e]]},t.prototype.getEpoch=function(){return this.epoch},t.prototype.getInputProviders=function(){for(var t=[],e=0;e<this.numInputs;e++)t.push(this.getInputProvider(e));return t},t}();r.InMemoryShuffledInputProviderBuilder=s;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getInputProvider=function(t){var e=this;return{getNextCopy:function(r){return a.NDArray.like(e.getNextInput(t))},disposeCopy:function(t,e){e.dispose()}}},e}(s);r.InCPUMemoryShuffledInputProviderBuilder=u;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getInputProvider=function(t){var e=this;return{getNextCopy:function(r){return r.clone(e.getNextInput(t))},disposeCopy:function(t,e){e.dispose()}}},e}(s);r.InGPUMemoryShuffledInputProviderBuilder=c},{"../math/ndarray":431,"../util":448}],334:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../math/ndarray"),i=t("../util"),s=t("./dataset"),u=1e3;r.getXhrDatasetConfig=function(t){return new Promise(function(e,r){var n=new XMLHttpRequest;n.open("GET",t),n.onload=function(){e(JSON.parse(n.responseText))},n.onerror=function(t){r(t)},n.send()})};var c=function(t){function e(e){var r=t.call(this,e.data.map(function(t){return t.shape}))||this;return r.xhrDatasetConfig=e,r}return o(e,t),e.prototype.getNDArray=function(t){var e,r,n,o="png"===t.dataType?(r=t,n=t.shape,new Promise(function(t,e){var o=new Image;o.setAttribute("crossOrigin",""),o.onload=function(){var e=function(t,e){var r=document.createElement("canvas"),n=r.getContext("2d"),o=t.height,a=i.sizeFromShape(e),s=new Uint8Array(o*a);if(t.width!==e[0]*e[1])throw new Error("Image width ("+t.width+") must be multiple of rows*columns ("+e[0]+"*"+e[1]+") of the ndarray");r.width=t.width,r.height=u;for(var c=r.width,h=r.height,f=c,d=h,m=e[2],g=0,v=Math.ceil(o/r.height),y=0;y<v;++y){var _=y*r.height;y===v-1&&o%r.height>0&&(r.height=o%r.height,h=r.height,d=h),n.drawImage(t,0,_,c,h,0,0,f,d);var b=n.getImageData(0,0,r.width,r.height).data;1===m?l(b,s,g):p(b,s,g),g+=r.height*a}return s}(o,n);o.src="",o=null,t(e)},o.src=r.path})):(e=t,new Promise(function(t,r){var n=new XMLHttpRequest;n.open("GET",e.path),n.responseType="arraybuffer",n.onload=function(r){var o="float32"===e.dataType?new Float32Array(n.response):new Uint8Array(n.response);t(o)},n.onerror=function(t){return r(t)},n.send()})),s=i.sizeFromShape(t.shape);return o.then(function(e){for(var r=[],n=0;n<e.length/s;n++){var o=e.subarray(n*s,(n+1)*s),i=a.NDArray.make(t.shape,{values:new Float32Array(o)},"float32");r.push(i)}return r})},e.prototype.fetchData=function(){var t=this;return new Promise(function(e,r){var n=t.xhrDatasetConfig.data.map(function(e){return t.getNDArray(e)});Promise.all(n).then(function(r){t.dataset=r,e()})})},e}(s.InMemoryDataset);function l(t,e,r){for(var n=r,o=0;o<t.length;o+=4)e[n++]=t[o]}function p(t,e,r){for(var n=r,o=0;o<t.length;o+=4)e[n]=t[o],e[n+1]=t[o+1],e[n+2]=t[o+2],n+=3}r.XhrDataset=c},{"../math/ndarray":431,"../util":448,"./dataset":332}],335:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isMobile=function(){var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}},{}],336:[function(t,e,r){(function(e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o,a=t("./device_util"),i=t("./math/math"),s=t("./util");function u(t,e){return null!=t.getExtension(e)}function c(t){if(0===t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var e=document.createElement("canvas");return 1===t?e.getContext("webgl")||e.getContext("experimental-webgl"):e.getContext("webgl2")}function l(t){if(null!=t){var e=t.getExtension("WEBGL_lose_context");if(null==e)throw new Error("Extension WEBGL_lose_context not supported on this browser.");e.loseContext()}}function p(t){var e=c(t);return null!=e&&(l(e),!0)}(o=n=r.Type||(r.Type={}))[o.NUMBER=0]="NUMBER",o[o.BOOLEAN=1]="BOOLEAN",r.URL_PROPERTIES=[{name:"DEBUG",type:n.BOOLEAN},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",type:n.NUMBER},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",type:n.BOOLEAN},{name:"WEBGL_VERSION",type:n.NUMBER},{name:"WEBGL_FLOAT_TEXTURE_ENABLED",type:n.BOOLEAN},{name:"WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED",type:n.BOOLEAN}];var h=function(){function t(t){this.features={},this.globalMath=null,this.BACKEND_REGISTRY={},this.backends=this.BACKEND_REGISTRY,null!=t&&(this.features=t),this.get("DEBUG")&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}return t.prototype.get=function(t){return t in this.features?this.features[t]:(this.features[t]=this.evaluateFeature(t),this.features[t])},t.prototype.set=function(t,e){this.features[t]=e},t.prototype.getBestBackendType=function(){for(var t=["webgl","cpu"],e=0;e<t.length;++e){var r=t[e];if(r in this.backends)return r}throw new Error("No backend found in registry.")},t.prototype.evaluateFeature=function(t){if("DEBUG"===t)return!1;if("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"===t){var e=this.get("WEBGL_VERSION");return 0===e?0:function(t){if(0===t)return 0;var e,r=c(t);return e=u(r,"EXT_disjoint_timer_query_webgl2")&&2===t?2:u(r,"EXT_disjoint_timer_query")?1:0,null!=r&&l(r),e}(e)}if("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE"===t)return this.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!a.isMobile();if("WEBGL_VERSION"===t)return p(2)?2:p(1)?1:0;if("WEBGL_FLOAT_TEXTURE_ENABLED"===t)return function(t){if(0===t)return!1;var e=c(t);if(1===t){if(!u(e,"OES_texture_float"))return!1}else if(!u(e,"EXT_color_buffer_float"))return!1;var r=e.createFramebuffer(),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);var o=2===t?e.RGBA32F:e.RGBA;e.texImage2D(e.TEXTURE_2D,0,o,1,1,0,e.RGBA,e.FLOAT,null),e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;e.readPixels(0,0,1,1,e.RGBA,e.FLOAT,new Float32Array(4));var i=e.getError()===e.NO_ERROR;return l(e),a&&i}(this.get("WEBGL_VERSION"));if("WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED"===t)return function(t){if(2!==t)return!1;var e=c(t),r=u(e,"WEBGL_get_buffer_sub_data_async");return l(e),r}(this.get("WEBGL_VERSION"));throw new Error("Unknown feature "+t+".")},t.prototype.setFeatures=function(t){this.reset(),this.features=t,this.backends={}},t.prototype.reset=function(){if(this.features=m(),null!=this.globalMath&&(this.globalMath.dispose(),this.globalMath=null),this.backends!==this.BACKEND_REGISTRY){for(var t in this.backends)this.backends[t].dispose();this.backends=this.BACKEND_REGISTRY}},t.prototype.setMath=function(t){this.globalMath=t},t.prototype.getBackend=function(t){return this.backends[t]},t.prototype.addCustomBackend=function(t,e){if(t in this.backends)throw new Error(t+" backend was already registered");try{var r=e();return this.backends[t]=r,!0}catch(t){return!1}},t.prototype.registerBackend=function(t,e){if(t in this.BACKEND_REGISTRY)throw new Error(t+" backend was already registered as global");try{var r=e();return this.BACKEND_REGISTRY[t]=r,!0}catch(t){return!1}},Object.defineProperty(t.prototype,"math",{get:function(){if(null==this.globalMath){var t=this.getBestBackendType();this.setMath(new i.NDArrayMath(t,!1))}return this.globalMath},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"engine",{get:function(){return this.globalMath.engine},enumerable:!0,configurable:!0}),t}();r.Environment=h;var f,d="dljsflags";function m(){var t={};if("undefined"==typeof window)return t;var e=s.getQueryParams(window.location.search);if(d in e){var o={};e[d].split(",").forEach(function(t){var e=t.split(":"),r=e[0],n=e[1];o[r]=n}),r.URL_PROPERTIES.forEach(function(e){e.name in o&&(console.log("Setting feature override from URL "+e.name+": "+o[e.name]),e.type===n.NUMBER?t[e.name]=+o[e.name]:e.type===n.BOOLEAN?t[e.name]="true"===o[e.name]:console.warn("Unknown URL param: "+e.name+"."))})}return t}r.ENV=((f=function(){var t;if("undefined"!=typeof window)t=window;else{if(void 0===e)throw new Error("Could not find a global object");t=e}return t}()).ENV=f.ENV||new h(m()),f.ENV)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./device_util":335,"./math/math":429,"./util":448}],337:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../math/ndarray"),o=function(){function t(){this.one=n.Scalar.new(1)}return t.prototype.output=function(t,e){return t.tanh(e)},t.prototype.der=function(t,e,r){var n=this;return t.scope(function(){var e=t.multiplyStrict(r,r);return t.subtract(n.one,e)})},t.prototype.dispose=function(){this.one.dispose()},t}();r.TanHFunc=o;var a=function(){function t(){}return t.prototype.output=function(t,e){return t.relu(e)},t.prototype.der=function(t,e,r){return t.step(e)},t.prototype.dispose=function(){},t}();r.ReLUFunc=a;var i=function(){function t(t){this.alpha=t}return t.prototype.output=function(t,e){return t.leakyRelu(e,this.alpha)},t.prototype.der=function(t,e,r){return t.step(e,this.alpha)},t.prototype.dispose=function(){},t}();r.LeakyReluFunc=i;var s=function(){function t(){}return t.prototype.output=function(t,e){return t.sigmoid(e)},t.prototype.der=function(t,e,r){return t.scope(function(){var e=t.multiplyStrict(r,r);return t.subStrict(r,e)})},t.prototype.dispose=function(){},t}();r.SigmoidFunc=s;var u=function(){function t(){this.two=n.Scalar.new(2)}return t.prototype.output=function(t,e){return t.multiplyStrict(e,e)},t.prototype.der=function(t,e,r){return t.multiply(this.two,e)},t.prototype.dispose=function(){this.two.dispose()},t}();r.SquareFunc=u;var c=function(){function t(){}return t.prototype.output=function(t,e){return t.elu(e)},t.prototype.der=function(t,e,r){throw new Error("Not implemented")},t.prototype.dispose=function(){},t}();r.EluFunc=c},{"../math/ndarray":431}],338:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../initializers"),i=t("../math/concat_util"),s=t("../math/conv_util"),u=t("../math/ndarray"),c=t("../util"),l=function(){function t(t){this.g=t}return t.prototype.dense=function(t,e,r,n,o,i,s){void 0===n&&(n=null),void 0===o&&(o=!0),void 0===i&&(i=new a.VarianceScalingInitializer),void 0===s&&(s=new a.ZerosInitializer);var u=this.g.variable(t+"-weights",i.initialize([e.shape[0],r],e.shape[0],r)),c=this.g.matmul(e,u);if(o){var l=this.g.variable(t+"-bias",s.initialize([r],e.shape[0],r));c=this.g.add(c,l)}return null!=n&&(c=n(c)),c},t}();r.GraphLayers=l;var p=function(){function t(){this.nodes=[],this.layers=new l(this)}return t.prototype.variable=function(t,e){return this.addNodeAndReturnOutput(new d(this,t,e))},t.prototype.placeholder=function(t,e){return this.addNodeAndReturnOutput(new m(this,t,e))},t.prototype.constant=function(t){var e;if("number"==typeof t)e=u.Scalar.new(t);else if(t instanceof u.NDArray)e=t;else{if(!(t instanceof Array))throw new Error("unimplemented constant type.");var r=c.flatten(t),n=new Float32Array(r);e=u.NDArray.make(c.inferShape(t),{values:n})}return this.addNodeAndReturnOutput(new g(this,e))},t.prototype.reshape=function(t,e){return this.addNodeAndReturnOutput(new v(this,"Reshape",t,e))},t.prototype.fusedLinearCombination=function(t,e,r,n){return this.addNodeAndReturnOutput(new y(this,t,e,r,n))},t.prototype.add=function(t,e){return this.addNodeAndReturnOutput(new _(this,t,e))},t.prototype.subtract=function(t,e){return this.addNodeAndReturnOutput(new b(this,t,e))},t.prototype.multiply=function(t,e){return this.addNodeAndReturnOutput(new x(this,t,e))},t.prototype.divide=function(t,e){return this.addNodeAndReturnOutput(new w(this,t,e))},t.prototype.reduceSum=function(t){return this.addNodeAndReturnOutput(new E(this,t))},t.prototype.concat1d=function(t,e){return this.addNodeAndReturnOutput(new k(this,t,e))},t.prototype.concat2d=function(t,e,r){return this.addNodeAndReturnOutput(new S(this,t,e,r))},t.prototype.concat3d=function(t,e,r){return this.addNodeAndReturnOutput(new A(this,t,e,r))},t.prototype.concat4d=function(t,e,r){return this.addNodeAndReturnOutput(new O(this,t,e,r))},t.prototype.matmul=function(t,e){return this.addNodeAndReturnOutput(new T(this,t,e))},t.prototype.conv2d=function(t,e,r,n,o,a,i){return void 0===a&&(a=1),this.addNodeAndReturnOutput(new N(this,t,e,r,n,o,a,i))},t.prototype.maxPool=function(t,e,r,n){return void 0===r&&(r=1),this.addNodeAndReturnOutput(new D(this,t,e,r,n))},t.prototype.exp=function(t){return this.addNodeAndReturnOutput(new I(this,t))},t.prototype.log=function(t){return this.addNodeAndReturnOutput(new j(this,t))},t.prototype.relu=function(t){return this.addNodeAndReturnOutput(new M(this,t))},t.prototype.leakyRelu=function(t,e){return this.addNodeAndReturnOutput(new R(this,t,e))},t.prototype.prelu=function(t,e){return this.addNodeAndReturnOutput(new P(this,t,e))},t.prototype.elu=function(t){return this.addNodeAndReturnOutput(new C(this,t))},t.prototype.tanh=function(t){return this.addNodeAndReturnOutput(new z(this,t))},t.prototype.sigmoid=function(t){return this.addNodeAndReturnOutput(new F(this,t))},t.prototype.square=function(t){return this.addNodeAndReturnOutput(new L(this,t))},t.prototype.softmax=function(t){return this.addNodeAndReturnOutput(new V(this,t))},t.prototype.softmaxCrossEntropyCost=function(t,e){return this.addNodeAndReturnOutput(new B(this,t,e))},t.prototype.meanSquaredCost=function(t,e){return this.addNodeAndReturnOutput(new U(this,t,e))},t.prototype.argmax=function(t){return this.addNodeAndReturnOutput(new G(this,t))},t.prototype.argmaxEquals=function(t,e){return this.addNodeAndReturnOutput(new q(this,t,e))},t.prototype.addNodeAndReturnOutput=function(t){return this.nodes.push(t),t.validate(),t.output},t.prototype.getNodes=function(){return this.nodes},t}();r.Graph=p;var h=function(){function t(e){this.shape=e,this.id=t.nextID++}return t.nextID=0,t}();r.Tensor=h;var f=function(){function t(e,r,n,o){this.graph=e,this.name=r,this.inputs=n,this.output=o,this.id=t.nextID++,o.node=this}return t.nextID=0,t}();r.Node=f;var d=function(t){function e(e,r,n){var o=t.call(this,e,r,{},new h(n.shape))||this;return o.data=n,o}return o(e,t),e.prototype.validate=function(){c.assert(null!=this.data,"Error adding variable op: Data for variable '"+this.name+"' is null or undefined")},e}(f);r.VariableNode=d;var m=function(t){function e(e,r,n){return t.call(this,e,r,{},new h(n))||this}return o(e,t),e.prototype.validate=function(){},e}(f);r.PlaceholderNode=m;var g=function(t){function e(e,r){var n=t.call(this,e,"Constant",{},new h(r.shape))||this;return n.data=r,n}return o(e,t),e.prototype.validate=function(){c.assert(null!=this.data,"Error adding constant: data for placeholder '"+this.name+"' is null or undefined")},e}(f);r.ConstantNode=g;var v=function(t){function e(e,r,n,o){var a=t.call(this,e,r,{x:n},new h(o))||this;return a.name=r,a.x=n,a.shape=o,a}return o(e,t),e.prototype.validate=function(){var t=c.sizeFromShape(this.x.shape),e=c.sizeFromShape(this.shape);c.assert(t===e,"Error making reshape operation: input to reshape '"+this.name+"' of shape ("+this.x.shape+") does not match size of requested shape "+this.shape+".")},e.X="x",e}(f);r.ReshapeNode=v;var y=function(t){function e(e,r,n,o,a){var i=t.call(this,e,"Linear Combination",{t1:r,t2:n,c1:o,c2:a},new h(r.shape))||this;return i.t1=r,i.t2=n,i.c1=o,i.c2=a,i}return o(e,t),e.prototype.validate=function(){if(c.assertShapesMatch(this.t1.shape,this.t2.shape),!c.isScalarShape(this.c1.shape))throw new Error("Error adding fusedLinearCombination: c1 is not a scalar, got shape: "+this.c1.shape);if(!c.isScalarShape(this.c2.shape))throw new Error("Error adding fusedLinearCombination: c2 is not a scalar, got shape: "+this.c2.shape)},e.T1="t1",e.T2="t2",e.C1="c1",e.C2="c2",e}(f);r.FusedLinearCombinationNode=y;var _=function(t){function e(e,r,n){var o=t.call(this,e,"Add",{t1:r,t2:n},new h(1===c.sizeFromShape(r.shape)?n.shape:r.shape.length<n.shape.length?n.shape:r.shape))||this;return o.t1=r,o.t2=n,o}return o(e,t),e.prototype.validate=function(){c.assert(1===c.sizeFromShape(this.t1.shape)||1===c.sizeFromShape(this.t2.shape)||c.arraysEqual(this.t1.shape,this.t2.shape)||2===this.t1.shape.length&&1===this.t2.shape.length&&this.t1.shape[1]===this.t2.shape[0]||1===this.t1.shape.length&&2===this.t2.shape.length&&this.t1.shape[0]===this.t2.shape[1],"Error adding add operation op: one of inputs must be scalar, shapes "+this.t1.shape+" and "+this.t2.shape+" must match,or one of them can be broadcasted (2D and 1D).")},e.T1="t1",e.T2="t2",e}(f);r.AddNode=_;var b=function(t){function e(e,r,n){var o=t.call(this,e,"Subtract",{t1:r,t2:n},new h(1===c.sizeFromShape(r.shape)?n.shape:r.shape))||this;return o.t1=r,o.t2=n,o}return o(e,t),e.prototype.validate=function(){c.assert(1===c.sizeFromShape(this.t1.shape)||1===c.sizeFromShape(this.t2.shape)||c.arraysEqual(this.t1.shape,this.t2.shape),"Error adding subtract op: one of inputs must be scalar or the shapes "+this.t1.shape+" and "+this.t2.shape+" must match.")},e.T1="t1",e.T2="t2",e}(f);r.SubtractNode=b;var x=function(t){function e(e,r,n){var o=t.call(this,e,"Multiply",{t1:r,t2:n},new h(1===c.sizeFromShape(r.shape)?n.shape:r.shape))||this;return o.t1=r,o.t2=n,o}return o(e,t),e.prototype.validate=function(){c.assert(1===c.sizeFromShape(this.t1.shape)||1===c.sizeFromShape(this.t2.shape)||c.arraysEqual(this.t1.shape,this.t2.shape),"Error adding multiply op: one of inputs must be scalar or the shapes "+this.t1.shape+" and "+this.t2.shape+" must match.")},e.T1="t1",e.T2="t2",e}(f);r.MultiplyNode=x;var w=function(t){function e(e,r,n){var o=t.call(this,e,"Divide",{t1:r,t2:n},new h(1===c.sizeFromShape(r.shape)?n.shape:r.shape))||this;return o.t1=r,o.t2=n,o}return o(e,t),e.prototype.validate=function(){c.assert(1===c.sizeFromShape(this.t1.shape)||1===c.sizeFromShape(this.t2.shape)||c.arraysEqual(this.t1.shape,this.t2.shape),"Error adding divide op: one of inputs must be scalar or the shapes "+this.t1.shape+" and "+this.t2.shape+" must match.")},e.T1="t1",e.T2="t2",e}(f);r.DivideNode=w;var E=function(t){function e(e,r){return t.call(this,e,"ReduceSum",{x:r},new h([]))||this}return o(e,t),e.prototype.validate=function(){},e.X="x",e}(f);r.ReduceSumNode=E;var k=function(t){function e(e,r,n){return t.call(this,e,"Concat1D",{x1:r,x2:n},new h(i.computeOutShape1D(r.shape,n.shape)))||this}return o(e,t),e.prototype.validate=function(){},e.X1="x1",e.X2="x2",e}(f);r.Concat1DNode=k;var S=function(t){function e(e,r,n,o){var a=t.call(this,e,"Concat2D",{x1:r,x2:n},new h(i.computeOutShape(r.shape,n.shape,o)))||this;return a.x1=r,a.x2=n,a.axis=o,a}return o(e,t),e.prototype.validate=function(){i.assertParams(this.x1.shape,this.x2.shape,this.axis)},e.X1="x1",e.X2="x2",e.AXIS="axis",e}(f);r.Concat2DNode=S;var A=function(t){function e(e,r,n,o){var a=t.call(this,e,"Concat3D",{x1:r,x2:n},new h(i.computeOutShape(r.shape,n.shape,o)))||this;return a.x1=r,a.x2=n,a.axis=o,a}return o(e,t),e.prototype.validate=function(){i.assertParams(this.x1.shape,this.x2.shape,this.axis)},e.X1="x1",e.X2="x2",e.AXIS="axis",e}(f);r.Concat3DNode=A;var O=function(t){function e(e,r,n,o){var a=t.call(this,e,"Concat4D",{x1:r,x2:n},new h(i.computeOutShape(r.shape,n.shape,o)))||this;return a.x1=r,a.x2=n,a.axis=o,a}return o(e,t),e.prototype.validate=function(){i.assertParams(this.x1.shape,this.x2.shape,this.axis)},e.X1="x1",e.X2="x2",e.AXIS="axis",e}(f);r.Concat4DNode=O;var T=function(t){function e(e,r,n){var o,a,i=t.call(this,e,"MatMul",{x1:r,x2:n},new h((o=r.shape,a=n.shape,1===o.length&&1===a.length?[1]:1===o.length&&2===a.length?[a[1]]:2===o.length&&1===a.length?[o[0]]:[o[0],a[1]])))||this;return i.x1=r,i.x2=n,i}return o(e,t),e.prototype.validate=function(){if(2===this.x1.shape.length&&2===this.x2.shape.length)c.assert(this.x1.shape[1]===this.x2.shape[0],"Error adding matmul op: inner shapes of matrices with shapes "+this.x1.shape+" and "+this.x2.shape+" must match.");else if(2===this.x1.shape.length&&1===this.x2.shape.length)c.assert(this.x1.shape[1]===this.x2.shape[0],"Error adding matmul op: second dimension of matrix with shape "+this.x1.shape.toString()+" must match size of vector with shape "+this.x2.shape+".");else{if(1!==this.x1.shape.length||2!==this.x2.shape.length)throw new Error("Error adding matmul op: inputs must be vectors or matrices.");c.assert(this.x1.shape[0]===this.x2.shape[0],"Error adding matmul op: size of vector with shape "+this.x1.shape+" must match first dimension of matrix with shape "+this.x2.shape+".")}},e.X1="x1",e.X2="x2",e}(f);r.MatMulNode=T;var N=function(t){function e(e,r,n,o,a,i,u,c){void 0===u&&(u=1);var l=t.call(this,e,"Convolution 2D",{x:r,w:n,b:o},new h(s.computeOutputShape3D(r.shape,a,i,u,c)))||this;return l.x=r,l.w=n,l.b=o,l.fieldSize=a,l.outputDepth=i,l.stride=u,l.zeroPad=c,l}return o(e,t),e.prototype.validate=function(){c.assert(3===this.x.shape.length,"Error adding conv2d op: input must be of rank 3, but got shape: "+this.x.shape+"."),c.assert(4===this.w.shape.length,"Error adding conv2d op: weights must be of rank 4, but got shape: "+this.w.shape+"."),c.assert(1===this.b.shape.length,"Error adding conv2d op: biases must be of rank 1, but got shape: "+this.b.shape+"."),c.assert(this.x.shape[2]===this.w.shape[2],"Error adding conv2d op: depth of input ("+this.x.shape[2]+") must match input depth for weights ("+this.w.shape[2]+").")},e.X="x",e.W="w",e.B="b",e}(f);r.Convolution2DNode=N;var D=function(t){function e(e,r,n,o,a){void 0===o&&(o=1);var i=t.call(this,e,"Max pool",{x:r},new h(s.computeOutputShape3D(r.shape,n,r.shape[2],o,a)))||this;return i.x=r,i.fieldSize=n,i.stride=o,i.zeroPad=a,i}return o(e,t),e.prototype.validate=function(){c.assert(3===this.x.shape.length,"Error adding maxPool op: input must be of rank 3, but got shape: "+this.x.shape+".")},e.X="x",e}(f);r.MaxPoolNode=D;var M=function(t){function e(e,r){return t.call(this,e,"ReLU",{x:r},new h(r.shape))||this}return o(e,t),e.prototype.validate=function(){},e.X="x",e}(f);r.ReLUNode=M;var R=function(t){function e(e,r,n){var o=t.call(this,e,"LeakyReLU",{x:r},new h(r.shape))||this;return o.alpha=n,o}return o(e,t),e.prototype.validate=function(){},e.X="x",e}(f);r.LeakyReLUNode=R;var P=function(t){function e(e,r,n){var o=t.call(this,e,"PReLU",{x:r,alpha:n},new h(r.shape))||this;return o.x=r,o.alpha=n,o}return o(e,t),e.prototype.validate=function(){c.assert(c.arraysEqual(this.x.shape,this.alpha.shape),"Error adding pRelu op: the shapes x: "+this.x.shape+" and alpha: "+this.alpha.shape+" must match.")},e.X="x",e.ALPHA="alpha",e}(f);r.PReLUNode=P;var C=function(t){function e(e,r){return t.call(this,e,"Elu",{x:r},new h(r.shape))||this}return o(e,t),e.prototype.validate=function(){},e.X="x",e}(f);r.EluNode=C;var I=function(t){function e(e,r){return t.call(this,e,"Exp",{x:r},new h(r.shape))||this}return o(e,t),e.prototype.validate=function(){},e.X="x",e}(f);r.ExpNode=I;var j=function(t){function e(e,r){return t.call(this,e,"Log",{x:r},new h(r.shape))||this}return o(e,t),e.prototype.validate=function(){},e.X="x",e}(f);r.LogNode=j;var z=function(t){function e(e,r){return t.call(this,e,"TanH",{x:r},new h(r.shape))||this}return o(e,t),e.prototype.validate=function(){},e.X="x",e}(f);r.TanHNode=z;var F=function(t){function e(e,r){return t.call(this,e,"Sigmoid",{x:r},new h(r.shape))||this}return o(e,t),e.prototype.validate=function(){},e.X="x",e}(f);r.SigmoidNode=F;var L=function(t){function e(e,r){return t.call(this,e,"Square",{x:r},new h(r.shape))||this}return o(e,t),e.prototype.validate=function(){},e.X="x",e}(f);r.SquareNode=L;var B=function(t){function e(e,r,n){var o=t.call(this,e,"SoftmaxCrossEntropyCost",{x:r,target:n},new h([]))||this;return o.x=r,o.target=n,o}return o(e,t),e.prototype.validate=function(){c.assert(c.arraysEqual(this.x.shape,this.target.shape),"Error adding softmaxCrossEntropyCost op: x shape ("+this.x.shape+") must match target shape ("+this.target.shape+").")},e.X="x",e.TARGET="target",e}(f);r.SoftmaxCrossEntropyCostNode=B;var V=function(t){function e(e,r){var n=t.call(this,e,"Softmax",{x:r},new h(r.shape))||this;return n.x=r,n}return o(e,t),e.prototype.validate=function(){c.assert(1===this.x.shape.length,"The input to a softmax must be a 1-D tensor"),c.assert(this.x.shape[0]>=2,"The input to a softmax must have at least 2 values")},e.X="x",e}(f);r.SoftmaxNode=V;var U=function(t){function e(e,r,n){var o=t.call(this,e,"Mean Squared Cost",{label:r,prediction:n},new h([]))||this;return o.label=r,o.prediction=n,o}return o(e,t),e.prototype.validate=function(){c.assert(c.arraysEqual(this.label.shape,this.prediction.shape),"Error adding meanSquaredCost op: label shape ("+this.label.shape+") must match prediction shape ("+this.prediction.shape+").")},e.LABEL="label",e.PREDICTION="prediction",e}(f);r.MeanSquaredCostNode=U;var G=function(t){function e(e,r){var n=t.call(this,e,"ArgMax",{x:r},new h([1]))||this;return n.x=r,n}return o(e,t),e.prototype.validate=function(){c.assert(c.sizeFromShape(this.x.shape)>0,"Error adding argmax op: input tensor must have at least one entry.")},e.X="x",e}(f);r.ArgMaxNode=G;var q=function(t){function e(e,r,n){var o=t.call(this,e,"ArgMaxEquals",{x1:r,x2:n},new h([1]))||this;return o.x1=r,o.x2=n,o}return o(e,t),e.prototype.validate=function(){c.assert(c.arraysEqual(this.x1.shape,this.x2.shape),"Error adding ArgMaxEquals op: x1 shape ("+this.x1.shape+") must match x2 shape ("+this.x2.shape+").")},e.X1="x1",e.X2="x2",e}(f);r.ArgMaxEqualsNode=q},{"../initializers":372,"../math/concat_util":421,"../math/conv_util":423,"../math/ndarray":431,"../util":448}],339:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o,a=t("../math/ndarray"),i=t("./session");(o=n=r.MetricReduction||(r.MetricReduction={}))[o.SUM=0]="SUM",o[o.MEAN=1]="MEAN";var s=function(){function t(t,e,r){this.math=t,this.session=e,this.eventObserver=r,this.lastCostTimestamp=0,this.lastEvalTimestamp=0,this.resetStatistics(),this.zeroScalar=a.Scalar.new(0)}return t.prototype.resetStatistics=function(){this.totalBatchesTrained=0},t.prototype.train=function(t,e,r,o,i,s,u,c,l,p,h){void 0===l&&(l=n.MEAN),void 0===p&&(p=1500),void 0===h&&(h=500),this.costTensor=t,this.trainFeedEntries=e,this.metricTensor=s,this.metricFeedEntries=u,null!=c&&this.metricBatchSize!==c&&(null!=this.metricBatchSizeScalar&&this.metricBatchSizeScalar.dispose(),this.metricBatchSizeScalar=a.Scalar.new(c)),this.metricBatchSize=c,this.metricReduction=l,this.batchSize=r,this.optimizer=o,this.metricIntervalMs=p,this.costIntervalMs=h,this.currentTrainLoopNumBatches=i,this.batchesTrainedThisRun=0,this.isTraining=!0,this.trainStartTimestamp=performance.now(),this.trainNetwork()},t.prototype.stopTraining=function(){this.isTraining=!1},t.prototype.resumeTraining=function(){this.isTraining=!0,this.trainNetwork()},t.prototype.trainNetwork=function(){var t=this;if(this.batchesTrainedThisRun===this.currentTrainLoopNumBatches&&this.stopTraining(),this.isTraining){var e=performance.now(),r=null!=this.eventObserver.avgCostCallback&&e-this.lastCostTimestamp>this.costIntervalMs;r&&(this.lastCostTimestamp=e);var n=r?i.CostReduction.MEAN:i.CostReduction.NONE;this.math.scope(function(o){var a=t.session.train(t.costTensor,t.trainFeedEntries,t.batchSize,t.optimizer,n);if(r){var i=performance.now()-e;if(t.eventObserver.avgCostCallback(a),null!=t.eventObserver.trainExamplesPerSecCallback){var s=1e3*t.batchSize/i;t.eventObserver.trainExamplesPerSecCallback(s)}}null!=t.eventObserver.metricCallback&&null!=t.metricFeedEntries&&e-t.lastEvalTimestamp>t.metricIntervalMs&&(t.lastEvalTimestamp=e,null!=t.lastComputedMetric&&t.lastComputedMetric.dispose(),t.lastComputedMetric=t.computeMetric(),t.eventObserver.metricCallback(t.lastComputedMetric)),null!=t.eventObserver.totalTimeCallback&&t.eventObserver.totalTimeCallback((e-t.trainStartTimestamp)/1e3),t.batchesTrainedThisRun++,t.totalBatchesTrained++,null!=t.eventObserver.batchesTrainedCallback&&t.eventObserver.batchesTrainedCallback(t.totalBatchesTrained)}),requestAnimationFrame(function(){return t.trainNetwork()})}else null!=this.eventObserver.doneTrainingCallback&&this.eventObserver.doneTrainingCallback()},t.prototype.infer=function(t,e,r,n,o){var i=this;if(void 0===r&&(r=3e3),void 0===n&&(n=5),null==this.eventObserver.inferenceExamplesCallback&&null==this.eventObserver.inferenceExamplesPerSecCallback)throw new Error("Cannot start inference loop, no inference example or examples/sec observer provided.");for(var s=0;s<e.length;s++){if(e[s].data instanceof a.NDArray)throw new Error("Cannot start inference on the model runner with feed entries of type NDArray. Please use InputProviders.")}this.inferenceExampleIntervalMs=r,this.inferenceTensor=t,this.inferenceFeedEntries=e,this.inferenceExampleCount=n,this.currentInferenceLoopNumPasses=o,this.isInferring||(this.inferencePassesThisRun=0,requestAnimationFrame(function(){return i.inferNetwork()})),this.isInferring=!0},t.prototype.inferNetwork=function(){var t=this;this.isInferring&&this.inferencePassesThisRun!==this.currentInferenceLoopNumPasses&&(this.math.scope(function(e){for(var r=[],n=[],o=performance.now(),a=0;a<t.inferenceExampleCount;a++){for(var i=[],s=0;s<t.inferenceFeedEntries.length;s++){var u=t.inferenceFeedEntries[s],c=u.data.getNextCopy(t.math);i.push({tensor:u.tensor,data:c})}r.push(i),n.push(t.session.eval(t.inferenceTensor,i))}if(null!=t.eventObserver.inferenceExamplesPerSecCallback){n[n.length-1].dataSync();var l=performance.now()-o,p=1e3*t.inferenceExampleCount/l;t.eventObserver.inferenceExamplesPerSecCallback(p)}null!=t.eventObserver.inferenceExamplesCallback&&t.eventObserver.inferenceExamplesCallback(r,n),t.inferencePassesThisRun++}),this.lastInferTimeoutID=window.setTimeout(function(){return t.inferNetwork()},this.inferenceExampleIntervalMs))},t.prototype.stopInferring=function(){this.isInferring=!1,window.clearTimeout(this.lastInferTimeoutID)},t.prototype.isInferenceRunning=function(){return this.isInferring},t.prototype.computeMetric=function(){var t=this;if(null==this.metricFeedEntries)throw new Error("Cannot compute metric, no metric FeedEntries provided.");var e=this.zeroScalar;return this.math.scope(function(r){for(var o=0;o<t.metricBatchSize;o++){var a=t.session.eval(t.metricTensor,t.metricFeedEntries);e=t.math.add(e,a.toFloat())}return t.metricReduction===n.MEAN&&(e=t.math.divide(e,t.metricBatchSizeScalar)),e})},t.prototype.getTotalBatchesTrained=function(){return this.totalBatchesTrained},t.prototype.getLastComputedMetric=function(){return this.lastComputedMetric},t.prototype.setMath=function(t){this.math=t},t.prototype.setSession=function(t){this.session=t},t.prototype.setInferenceTensor=function(t){this.inferenceTensor=t},t.prototype.setInferenceExampleCount=function(t){this.inferenceExampleCount=t},t}();r.GraphRunner=s},{"../math/ndarray":431,"./session":368}],340:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./graph"),o=t("./priority_queue"),a=t("./priority_queue");r.getUnorderedEvaluationSet=function(t,e){var r={},n={},o=[],a=t.slice();e.forEach(function(t){return r[t.id]=t});for(var i=function(){var t=a.pop();null==n[t.id]&&(null==r[t.id]&&Object.keys(t.inputs).map(function(e){return t.inputs[e]}).forEach(function(t){return a.push(t.node)}),o.push(t),n[t.id]=t)};0!==a.length;)i();return o},r.getOrderedEvaluationSet=function(t){var e=[],r={},n={},i=new a.PriorityQueue(function(t,e){return o.defaultCompare(n[t.id],n[e.id])},function(t,e){return r[t.id]=e});for(t.forEach(function(t){return n[t.id]=0}),t.forEach(function(e){return Object.keys(e.inputs).map(function(t){return e.inputs[t]}).forEach(function(e){-1!==t.indexOf(e.node)&&n[e.node.id]++})}),t.forEach(function(t){return i.enqueue(t)});!i.empty();)e.unshift(i.dequeue()),Object.keys(e[0].inputs).map(function(t){return e[0].inputs[t]}).forEach(function(e){-1!==t.indexOf(e.node)&&(n[e.node.id]--,i.update(e.node,r[e.node.id]))});return e},r.isInputNode=function(t){return 0===Object.keys(t.inputs).length},r.shouldBackProp=function(t){return!(t.node instanceof n.ConstantNode)},r.isPassthroughNode=function(t,e){for(var r=Object.keys(t.inputs),n=0;n<r.length;n++){var o=t.inputs[r[n]];if(e.get(o,!0)===e.get(t.output,!0))return!0}return!1}},{"./graph":338,"./priority_queue":367}],341:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./graph"),o=t("./graph_util"),a=t("./ops/add"),i=t("./ops/argmax"),s=t("./ops/argmaxequals"),u=t("./ops/concat"),c=t("./ops/convolution"),l=t("./ops/divide"),p=t("./ops/element_wise_activation"),h=t("./ops/element_wise_cost"),f=t("./ops/exp"),d=t("./ops/linear_combination"),m=t("./ops/log"),g=t("./ops/matmul"),v=t("./ops/max_pool"),y=t("./ops/multiply"),_=t("./ops/reduce_sum"),b=t("./ops/reshape"),x=t("./ops/softmax"),w=t("./ops/subtract");r.emitFromGraphNodes=function(t){var e=[];return t.forEach(function(t){return Array.prototype.push.apply(e,function(t){if(t instanceof n.ReshapeNode)return[new b.Reshape(t.inputs[n.ReshapeNode.X],t.output)];if(t instanceof n.MatMulNode){var e=t.inputs[n.MatMulNode.X1],r=t.inputs[n.MatMulNode.X2];return[new g.MatMul(e,r,t.output)]}if(t instanceof n.Convolution2DNode){var E=t.inputs[n.Convolution2DNode.W],k=t.inputs[n.Convolution2DNode.X],S=t.inputs[n.Convolution2DNode.B];return[new c.Convolution2D(E,k,S,t.output,t.fieldSize,t.outputDepth,t.stride,t.zeroPad)]}if(t instanceof n.MaxPoolNode){var k=t.inputs[n.MaxPoolNode.X];return[new v.MaxPool(k,t.output,t.fieldSize,t.stride,t.zeroPad)]}if(t instanceof n.ExpNode)return[new f.Exp(t.inputs[n.ExpNode.X],t.output)];if(t instanceof n.LogNode)return[new m.Log(t.inputs[n.LogNode.X],t.output)];if(t instanceof n.ReLUNode)return[new p.ReLU(t.inputs[n.ReLUNode.X],t.output)];if(t instanceof n.LeakyReLUNode)return[new p.LeakyReLU(t.inputs[n.LeakyReLUNode.X],t.output,t.alpha)];if(t instanceof n.PReLUNode)return[new p.PReLU(t.inputs[n.PReLUNode.X],t.inputs[n.PReLUNode.ALPHA],t.output)];if(t instanceof n.EluNode)return[new p.Elu(t.inputs[n.EluNode.X],t.output)];if(t instanceof n.TanHNode)return[new p.TanH(t.inputs[n.TanHNode.X],t.output)];if(t instanceof n.SigmoidNode)return[new p.Sigmoid(t.inputs[n.SigmoidNode.X],t.output)];if(t instanceof n.SoftmaxCrossEntropyCostNode){var k=t.inputs[n.SoftmaxCrossEntropyCostNode.X],A=t.inputs[n.SoftmaxCrossEntropyCostNode.TARGET];return[new x.SoftmaxCrossEntropyCost(k,A,t.output)]}if(t instanceof n.SoftmaxNode)return[new x.Softmax(t.inputs[n.SoftmaxNode.X],t.output)];if(t instanceof n.MeanSquaredCostNode){var O=t.inputs[n.MeanSquaredCostNode.LABEL],T=t.inputs[n.MeanSquaredCostNode.PREDICTION];return[new h.MeanSquaredCost(O,T,t.output)]}if(t instanceof n.ArgMaxEqualsNode)return[new s.ArgMaxEquals(t.inputs[n.ArgMaxEqualsNode.X1],t.inputs[n.ArgMaxEqualsNode.X2],t.output)];if(t instanceof n.ArgMaxNode)return[new i.ArgMax(t.x,t.output)];if(t instanceof n.FusedLinearCombinationNode)return[new d.LinearCombination(t.inputs[n.FusedLinearCombinationNode.T1],t.inputs[n.FusedLinearCombinationNode.T2],t.inputs[n.FusedLinearCombinationNode.C1],t.inputs[n.FusedLinearCombinationNode.C2],t.output)];if(t instanceof n.Concat1DNode)return[new u.Concat1D(t.inputs[n.Concat1DNode.X1],t.inputs[n.Concat1DNode.X2],t.output)];if(t instanceof n.Concat2DNode)return[new u.Concat2D(t.inputs[n.Concat2DNode.X1],t.inputs[n.Concat2DNode.X2],t.axis,t.output)];if(t instanceof n.Concat3DNode)return[new u.Concat3D(t.inputs[n.Concat3DNode.X1],t.inputs[n.Concat3DNode.X2],t.axis,t.output)];if(t instanceof n.Concat4DNode)return[new u.Concat4D(t.inputs[n.Concat4DNode.X1],t.inputs[n.Concat4DNode.X2],t.axis,t.output)];if(t instanceof n.SquareNode)return[new p.Square(t.inputs[n.SquareNode.X],t.output)];if(t instanceof n.AddNode)return[new a.Add(t.inputs[n.AddNode.T1],t.inputs[n.AddNode.T2],t.output)];if(t instanceof n.SubtractNode)return[new w.Subtract(t.inputs[n.SubtractNode.T1],t.inputs[n.SubtractNode.T2],t.output)];if(t instanceof n.MultiplyNode)return[new y.Multiply(t.inputs[n.MultiplyNode.T1],t.inputs[n.MultiplyNode.T2],t.output)];if(t instanceof n.DivideNode)return[new l.Divide(t.inputs[n.DivideNode.T1],t.inputs[n.DivideNode.T2],t.output)];if(t instanceof n.ReduceSumNode)return[new _.ReduceSum(t.inputs[n.ReduceSumNode.X],t.output)];if(o.isInputNode(t))return[];throw Error("Unsupported node type: "+t.constructor.name)}(t))}),e}},{"./graph":338,"./graph_util":340,"./ops/add":342,"./ops/argmax":343,"./ops/argmaxequals":344,"./ops/concat":345,"./ops/convolution":346,"./ops/divide":347,"./ops/element_wise_activation":348,"./ops/element_wise_cost":349,"./ops/exp":350,"./ops/linear_combination":351,"./ops/log":352,"./ops/matmul":353,"./ops/max_pool":354,"./ops/multiply":355,"./ops/reduce_sum":357,"./ops/reshape":358,"./ops/softmax":359,"./ops/subtract":360}],342:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../util"),i=t("../graph_util"),s=function(t){function e(e,r,n){var o=t.call(this)||this;return o.x1Tensor=e,o.x2Tensor=r,o.yTensor=n,a.assert(1===a.sizeFromShape(e.shape)||1===a.sizeFromShape(r.shape)||a.arraysEqual(e.shape,r.shape)||2===e.shape.length&&1===r.shape.length&&e.shape[1]===r.shape[0]||1===e.shape.length&&2===r.shape.length&&e.shape[0]===r.shape[1],"One of t1 or t2 must be a scalar, or t1 and t2 must have the same shape, or one of them can be broadcasted (2D and 1D)."),o}return o(e,t),e.prototype.feedForward=function(t,e){var r=this,n=e.get(this.x1Tensor),o=e.get(this.x2Tensor);t.scope(function(i){var s;s=a.isScalarShape(n.shape)?t.scalarPlusArray(n,o):a.isScalarShape(o.shape)?t.scalarPlusArray(o,n):t.add(n,o),e.set(r.yTensor,i(s))})},e.prototype.backProp=function(t,e,r){var n=this,o=r.get(this.yTensor);t.scope(function(){if(i.shouldBackProp(n.x1Tensor))if(1===n.x1Tensor.shape.length&&2===n.x2Tensor.shape.length&&n.x1Tensor.shape[0]===n.x2Tensor.shape[1]){var e=t.sum(o,0);r.add(n.x1Tensor,e)}else if(a.isScalarShape(n.x1Tensor.shape)){e=t.sum(o);r.add(n.x1Tensor,e)}else r.add(n.x1Tensor,t.clone(o));if(i.shouldBackProp(n.x2Tensor))if(2===n.x1Tensor.shape.length&&1===n.x2Tensor.shape.length&&n.x1Tensor.shape[1]===n.x2Tensor.shape[0]){e=t.sum(o,0);r.add(n.x2Tensor,e)}else if(a.isScalarShape(n.x2Tensor.shape)){e=t.sum(o);r.add(n.x2Tensor,e)}else r.add(n.x2Tensor,t.clone(o))})},e.prototype.dispose=function(){null!=this.dySizeScalar&&this.dySizeScalar.dispose()},e}(t("./op").Operation);r.Add=s},{"../../util":448,"../graph_util":340,"./op":356}],343:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=function(t){function e(e,r){var n=t.call(this)||this;return n.xTensor=e,n.yTensor=r,n}return o(e,t),e.prototype.feedForward=function(t,e){var r=this,n=e.get(this.xTensor);t.scope(function(o){e.set(r.yTensor,o(t.argMax(n)))})},e.prototype.backProp=function(t,e,r){throw new Error("ArgMax backprop unimplemented")},e}(t("./op").Operation);r.ArgMax=a},{"./op":356}],344:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=function(t){function e(e,r,n){var o=t.call(this)||this;return o.x1Tensor=e,o.x2Tensor=r,o.yTensor=n,o}return o(e,t),e.prototype.feedForward=function(t,e){var r=this,n=e.get(this.x1Tensor),o=e.get(this.x2Tensor);t.scope(function(a){e.set(r.yTensor,a(t.argMaxEquals(n,o)))})},e.prototype.backProp=function(t,e,r){throw new Error("ArgMaxEquals backprop unimplemented")},e}(t("./op").Operation);r.ArgMaxEquals=a},{"./op":356}],345:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../math/concat_util"),i=t("../../util"),s=t("./op"),u=function(t){function e(e,r,n){var o=t.call(this)||this;return o.x1Tensor=e,o.x2Tensor=r,o.yTensor=n,o}return o(e,t),e.prototype.feedForward=function(t,e){var r=this,n=e.get(this.x1Tensor),o=e.get(this.x2Tensor);t.scope(function(a){var i=t.concat1D(n,o);e.set(r.yTensor,a(i))})},e.prototype.backProp=function(t,e,r){var n=this;t.scope(function(){h(t,n.x1Tensor,n.x2Tensor,n.yTensor,0,r,e)})},e}(s.Operation);r.Concat1D=u;var c=function(t){function e(e,r,n,o){var i=t.call(this)||this;return i.x1Tensor=e,i.x2Tensor=r,i.axis=n,i.yTensor=o,a.assertParams(e.shape,r.shape,n),i}return o(e,t),e.prototype.feedForward=function(t,e){var r=this,n=e.get(this.x1Tensor),o=e.get(this.x2Tensor);t.scope(function(a){var i=t.concat2D(n,o,r.axis);e.set(r.yTensor,a(i))})},e.prototype.backProp=function(t,e,r){var n=this;t.scope(function(){h(t,n.x1Tensor,n.x2Tensor,n.yTensor,n.axis,r,e)})},e}(s.Operation);r.Concat2D=c;var l=function(t){function e(e,r,n,o){var i=t.call(this)||this;return i.x1Tensor=e,i.x2Tensor=r,i.axis=n,i.yTensor=o,a.assertParams(e.shape,r.shape,n),i}return o(e,t),e.prototype.feedForward=function(t,e){var r=this,n=e.get(this.x1Tensor),o=e.get(this.x2Tensor);t.scope(function(a){var i=t.concat3D(n,o,r.axis);e.set(r.yTensor,a(i))})},e.prototype.backProp=function(t,e,r){var n=this;t.scope(function(){h(t,n.x1Tensor,n.x2Tensor,n.yTensor,n.axis,r,e)})},e}(s.Operation);r.Concat3D=l;var p=function(t){function e(e,r,n,o){var i=t.call(this)||this;return i.x1Tensor=e,i.x2Tensor=r,i.axis=n,i.yTensor=o,a.assertParams(e.shape,r.shape,n),i}return o(e,t),e.prototype.feedForward=function(t,e){var r=this,n=e.get(this.x1Tensor),o=e.get(this.x2Tensor);t.scope(function(a){var i=t.concat4D(n,o,r.axis);e.set(r.yTensor,a(i))})},e.prototype.backProp=function(t,e,r){var n=this;t.scope(function(){h(t,n.x1Tensor,n.x2Tensor,n.yTensor,n.axis,r,e)})},e}(s.Operation);function h(t,e,r,n,o,s,u){var c=s.get(n),l=u.get(e),p=u.get(r),h=l.as2D(-1,i.sizeFromShape(l.shape.slice(o))),f=p.as2D(-1,i.sizeFromShape(p.shape.slice(o))),d=a.computeGradientSliceShapes(h.shape,f.shape),m=d.aBegin,g=d.aSize,v=d.bBegin,y=d.bSize,_=c.as2D(-1,h.shape[1]+f.shape[1]),b=t.slice2D(_,m,g).reshapeAs(l),x=t.slice2D(_,v,y).reshapeAs(p);s.add(e,b),s.add(r,x)}r.Concat4D=p},{"../../math/concat_util":421,"../../util":448,"./op":356}],346:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../math/conv_util"),i=t("../../util"),s=function(t){function e(e,r,n,o,s,u,c,l){void 0===c&&(c=1);var p=t.call(this)||this;return p.wTensor=e,p.xTensor=r,p.bTensor=n,p.yTensor=o,p.fieldSize=s,p.outputDepth=u,p.stride=c,p.assertWeightsShape(e.shape),p.zeroPad=null!=l?l:a.computeDefaultPad(p.xTensor.shape,p.fieldSize,p.stride),i.assert(i.isInt(p.zeroPad),"The zero padding ("+p.zeroPad+") must be an integer. Change the stride and/or zero pad parameters"),p}return o(e,t),e.prototype.feedForward=function(t,e){var r=this,n=e.get(this.wTensor),o=e.get(this.bTensor),a=e.get(this.xTensor);t.scope(function(i){e.set(r.yTensor,i(t.conv2d(a,n,o,r.stride,r.zeroPad)))})},e.prototype.backProp=function(t,e,r){var n=this,o=e.get(this.wTensor),a=e.get(this.xTensor),i=r.get(this.yTensor);t.scope(function(){var e=t.conv2dDerFilter(a,i,o.shape,n.stride,n.zeroPad),s=t.conv2dDerBias(i),u=t.conv2dDerInput(a.shape,i,o,n.stride,n.zeroPad);r.add(n.wTensor,e),r.add(n.bTensor,s),r.add(n.xTensor,u)})},e.prototype.assertWeightsShape=function(t){i.assert(t[0]===this.fieldSize&&t[1]===this.fieldSize&&t[2]===this.xTensor.shape[2]&&t[3]===this.outputDepth,"weights must be of shape ["+this.fieldSize+","+this.fieldSize+","+this.xTensor.shape[2]+","+this.outputDepth+"] but they are ofshape ["+t+"]")},e}(t("./op").Operation);r.Convolution2D=s},{"../../math/conv_util":423,"../../util":448,"./op":356}],347:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../util"),i=t("../graph_util"),s=function(t){function e(e,r,n){var o=t.call(this)||this;return o.x1Tensor=e,o.x2Tensor=r,o.yTensor=n,a.assert(1===a.sizeFromShape(e.shape)||1===a.sizeFromShape(r.shape)||a.arraysEqual(e.shape,r.shape),"One of t1 or t2 must be a scalar, or t1 and t2 must have the same shape"),o}return o(e,t),e.prototype.feedForward=function(t,e){var r=this,n=e.get(this.x1Tensor),o=e.get(this.x2Tensor);t.scope(function(i){var s;s=a.isScalarShape(n.shape)?t.scalarDividedByArray(n,o):a.isScalarShape(o.shape)?t.arrayDividedByScalar(n,o):t.divide(n,o),e.set(r.yTensor,i(s))})},e.prototype.backProp=function(t,e,r){var n=this,o=e.get(this.x1Tensor),s=e.get(this.x2Tensor),u=r.get(this.yTensor),c=a.isScalarShape(o.shape),l=a.isScalarShape(s.shape);t.scope(function(){if(i.shouldBackProp(n.x1Tensor))if(c){var e=t.divide(u,s);r.add(n.x1Tensor,t.sum(e)),e.dispose()}else l?r.add(n.x1Tensor,t.arrayDividedByScalar(u,s)):r.add(n.x1Tensor,t.divide(u,s));if(i.shouldBackProp(n.x2Tensor)){var a=t.elementWiseMul(s,s),p=void 0;p=l?t.arrayDividedByScalar(o,a):c?t.scalarDividedByArray(o,a):t.divide(o,a);var h=t.neg(p),f=t.elementWiseMul(u,h);l?r.add(n.x2Tensor,t.sum(f)):r.add(n.x2Tensor,f)}})},e}(t("./op").Operation);r.Divide=s},{"../../util":448,"../graph_util":340,"./op":356}],348:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../activation_functions"),i=t("./op"),s=function(t){function e(e,r,n){var o=t.call(this)||this;return o.xTensor=e,o.yTensor=r,o.func=n,o}return o(e,t),e.prototype.feedForward=function(t,e){var r=this,n=e.get(this.xTensor);t.scope(function(o){e.set(r.yTensor,o(r.func.output(t,n)))})},e.prototype.backProp=function(t,e,r){var n=this,o=e.get(this.xTensor),a=e.get(this.yTensor),i=r.get(this.yTensor);t.scope(function(){var e=n.func.der(t,o,a);r.add(n.xTensor,t.elementWiseMul(i,e)),e.dispose()})},e.prototype.dispose=function(){this.func.dispose()},e}(i.Operation);r.ElementWiseActivation=s;var u=function(t){function e(e,r){return t.call(this,e,r,new a.ReLUFunc)||this}return o(e,t),e}(s);r.ReLU=u;var c=function(t){function e(e,r,n){return t.call(this,e,r,new a.LeakyReluFunc(n))||this}return o(e,t),e}(s);r.LeakyReLU=c;var l=function(t){function e(e,r){return t.call(this,e,r,new a.TanHFunc)||this}return o(e,t),e}(s);r.TanH=l;var p=function(t){function e(e,r){return t.call(this,e,r,new a.SigmoidFunc)||this}return o(e,t),e}(s);r.Sigmoid=p;var h=function(t){function e(e,r){return t.call(this,e,r,new a.SquareFunc)||this}return o(e,t),e}(s);r.Square=h;var f=function(t){function e(e,r){return t.call(this,e,r,new a.EluFunc)||this}return o(e,t),e}(s);r.Elu=f;var d=function(t){function e(e,r,n){var o=t.call(this)||this;return o.xTensor=e,o.alphaTensor=r,o.yTensor=n,o}return o(e,t),e.prototype.feedForward=function(t,e){var r=this,n=e.get(this.xTensor),o=e.get(this.alphaTensor);t.scope(function(a){e.set(r.yTensor,a(t.prelu(n,o)))})},e.prototype.backProp=function(t,e,r){throw new Error("Not implemented")},e}(i.Operation);r.PReLU=d},{"../activation_functions":337,"./op":356}],349:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../environment"),i=t("../../math/cost_functions"),s=t("../../math/ndarray"),u=t("../../util"),c=t("../graph_util"),l=function(t){function e(e,r,n,o){var i=t.call(this)||this;return i.x1Tensor=e,i.x2Tensor=r,i.yTensor=n,i.func=o,i.oneOverNScalar=a.ENV.math.keep(s.Scalar.new(1/u.sizeFromShape(e.shape))),i}return o(e,t),e.prototype.feedForward=function(t,e){var r=this,n=e.get(this.x1Tensor),o=e.get(this.x2Tensor);t.scope(function(a){var i=r.func.cost(t,n,o),s=t.sum(i),u=t.scalarTimesArray(r.oneOverNScalar,s);e.set(r.yTensor,a(u))})},e.prototype.backProp=function(t,e,r){var n=this,o=e.get(this.x1Tensor),a=e.get(this.x2Tensor);t.scope(function(){c.shouldBackProp(n.x1Tensor)&&r.add(n.x1Tensor,n.func.der(t,o,a)),c.shouldBackProp(n.x2Tensor)&&r.add(n.x2Tensor,n.func.der(t,a,o))})},e.prototype.dispose=function(){this.func.dispose(),this.oneOverNScalar.dispose()},e}(t("./op").Operation);r.ElementWiseCost=l;var p=function(t){function e(e,r,n){return t.call(this,e,r,n,new i.SquareCostFunc)||this}return o(e,t),e}(l);r.MeanSquaredCost=p},{"../../environment":336,"../../math/cost_functions":424,"../../math/ndarray":431,"../../util":448,"../graph_util":340,"./op":356}],350:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../graph_util"),i=function(t){function e(e,r){var n=t.call(this)||this;return n.xTensor=e,n.yTensor=r,n}return o(e,t),e.prototype.feedForward=function(t,e){var r=this,n=e.get(this.xTensor);t.scope(function(o){e.set(r.yTensor,o(t.exp(n)))})},e.prototype.backProp=function(t,e,r){var n=this,o=e.get(this.yTensor),i=r.get(this.yTensor);t.scope(function(){a.shouldBackProp(n.xTensor)&&r.add(n.xTensor,t.elementWiseMul(o,i))})},e}(t("./op").Operation);r.Exp=i},{"../graph_util":340,"./op":356}],351:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../graph_util"),i=function(t){function e(e,r,n,o,a){var i=t.call(this)||this;return i.x1Tensor=e,i.x2Tensor=r,i.c1Tensor=n,i.c2Tensor=o,i.outTensor=a,i}return o(e,t),e.prototype.feedForward=function(t,e){var r=this,n=e.get(this.x1Tensor),o=e.get(this.x2Tensor),a=e.get(this.c1Tensor).asScalar(),i=e.get(this.c2Tensor).asScalar();t.scope(function(s){e.set(r.outTensor,s(t.scaledArrayAdd(a,n,i,o)))})},e.prototype.backProp=function(t,e,r){var n=this,o=e.get(this.x1Tensor),i=e.get(this.x2Tensor),s=e.get(this.c1Tensor),u=e.get(this.c2Tensor),c=r.get(this.outTensor);t.scope(function(){if(a.shouldBackProp(n.x1Tensor)&&r.add(n.x1Tensor,t.scalarTimesArray(s,c)),a.shouldBackProp(n.x2Tensor)&&r.add(n.x2Tensor,t.scalarTimesArray(u,c)),a.shouldBackProp(n.c1Tensor)){var e=t.elementWiseMul(o,c);r.add(n.c1Tensor,t.sum(e))}if(a.shouldBackProp(n.c2Tensor)){var l=t.elementWiseMul(i,c);r.add(n.c2Tensor,t.sum(l))}})},e}(t("./op").Operation);r.LinearCombination=i},{"../graph_util":340,"./op":356}],352:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../graph_util"),i=function(t){function e(e,r){var n=t.call(this)||this;return n.xTensor=e,n.yTensor=r,n}return o(e,t),e.prototype.feedForward=function(t,e){var r=this,n=e.get(this.xTensor);t.scope(function(o){e.set(r.yTensor,o(t.log(n)))})},e.prototype.backProp=function(t,e,r){var n=this,o=e.get(this.xTensor),i=r.get(this.yTensor);t.scope(function(){a.shouldBackProp(n.xTensor)&&r.add(n.xTensor,t.divide(i,o))})},e}(t("./op").Operation);r.Log=i},{"../graph_util":340,"./op":356}],353:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../math/backends/types/matmul"),i=t("../graph_util"),s=function(t){function e(e,r,n){var o=t.call(this)||this;return o.x1Tensor=e,o.x2Tensor=r,o.yTensor=n,o}return o(e,t),e.prototype.feedForward=function(t,e){var r=this,n=e.get(this.x1Tensor),o=e.get(this.x2Tensor);t.scope(function(a){2===n.shape.length&&2===o.shape.length?e.set(r.yTensor,a(t.matMul(n,o))):2===n.shape.length&&1===o.shape.length?e.set(r.yTensor,a(t.matrixTimesVector(n,o))):1===n.shape.length&&2===o.shape.length&&e.set(r.yTensor,a(t.vectorTimesMatrix(n,o)))})},e.prototype.backProp=function(t,e,r){var n=this,o=e.get(this.x1Tensor),s=e.get(this.x2Tensor),u=r.get(this.yTensor);1===o.shape.length&&(o=o.reshape([1,o.size]),u=u.reshape([1,u.size])),1===s.shape.length&&(s=s.reshape([s.size,1]),u=u.reshape([u.size,1])),t.scope(function(){if(i.shouldBackProp(n.x1Tensor)){var e=t.matMul(u,s,a.MatrixOrientation.REGULAR,a.MatrixOrientation.TRANSPOSED);r.add(n.x1Tensor,1===n.x1Tensor.shape.length?e.as1D():e)}if(i.shouldBackProp(n.x2Tensor)){var c=t.matMul(o,u,a.MatrixOrientation.TRANSPOSED,a.MatrixOrientation.REGULAR);r.add(n.x2Tensor,1===n.x2Tensor.shape.length?c.as1D():c)}})},e}(t("./op").Operation);r.MatMul=s},{"../../math/backends/types/matmul":381,"../graph_util":340,"./op":356}],354:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../math/conv_util"),i=t("../../util"),s=function(t){function e(e,r,n,o,s){void 0===o&&(o=1);var u=t.call(this)||this;return u.xTensor=e,u.yTensor=r,u.fieldSize=n,u.stride=o,u.pad=null!=s?s:a.computeDefaultPad(e.shape,u.fieldSize,u.stride),i.assert(i.isInt(u.pad),"The zero padding ("+u.pad+") must be an integer. Change the stride and/or zero pad parameters"),u}return o(e,t),e.prototype.feedForward=function(t,e){var r=this,n=e.get(this.xTensor);t.scope(function(o){e.set(r.yTensor,o(t.maxPool(n,r.fieldSize,r.stride,r.pad)))})},e.prototype.backProp=function(t,e,r){var n=this,o=e.get(this.xTensor),a=r.get(this.yTensor);t.scope(function(){r.add(n.xTensor,t.maxPoolBackprop(a,o,n.fieldSize,n.stride,n.pad))})},e}(t("./op").Operation);r.MaxPool=s},{"../../math/conv_util":423,"../../util":448,"./op":356}],355:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../util"),i=t("../graph_util"),s=function(t){function e(e,r,n){var o=t.call(this)||this;return o.x1Tensor=e,o.x2Tensor=r,o.yTensor=n,a.assert(1===a.sizeFromShape(e.shape)||1===a.sizeFromShape(r.shape)||a.arraysEqual(e.shape,r.shape),"One of t1 or t2 must be a scalar, or t1 and t2 must have the same shape"),o}return o(e,t),e.prototype.feedForward=function(t,e){var r=this,n=e.get(this.x1Tensor),o=e.get(this.x2Tensor);t.scope(function(i){var s;s=a.isScalarShape(n.shape)?t.scalarTimesArray(n,o):a.isScalarShape(o.shape)?t.scalarTimesArray(o,n):t.elementWiseMul(n,o),e.set(r.yTensor,i(s))})},e.prototype.backProp=function(t,e,r){var n=this,o=e.get(this.x1Tensor),s=e.get(this.x2Tensor),u=r.get(this.yTensor);t.scope(function(){if(i.shouldBackProp(n.x1Tensor))if(a.isScalarShape(n.x1Tensor.shape)){var e=t.elementWiseMul(u,s);r.add(n.x1Tensor,t.sum(e))}else a.isScalarShape(s.shape)?r.add(n.x1Tensor,t.scalarTimesArray(s,u)):r.add(n.x1Tensor,t.elementWiseMul(s,u));if(i.shouldBackProp(n.x2Tensor))if(a.isScalarShape(n.x2Tensor.shape)){e=t.elementWiseMul(u,o);r.add(n.x2Tensor,t.sum(e))}else a.isScalarShape(o.shape)?r.add(n.x2Tensor,t.scalarTimesArray(o,u)):r.add(n.x2Tensor,t.elementWiseMul(o,u))})},e}(t("./op").Operation);r.Multiply=s},{"../../util":448,"../graph_util":340,"./op":356}],356:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.disposeTransientArrays=function(t,e){},t.prototype.dispose=function(){},t}();r.Operation=n},{}],357:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../environment"),i=t("../../math/ndarray"),s=t("../../util"),u=t("../graph_util"),c=function(t){function e(e,r){var n=t.call(this)||this;return n.x=e,n.outTensor=r,s.assertShapesMatch(r.shape,[]),n.ones=a.ENV.math.keep(i.NDArray.ones(e.shape)),n}return o(e,t),e.prototype.feedForward=function(t,e){var r=this,n=e.get(this.x);t.scope(function(o){e.set(r.outTensor,o(t.sum(n)))})},e.prototype.backProp=function(t,e,r){var n=this;u.shouldBackProp(this.x)&&t.scope(function(){var e=r.get(n.outTensor);r.add(n.x,t.scalarTimesArray(e,n.ones))})},e.prototype.dispose=function(){this.ones.dispose()},e}(t("./op").Operation);r.ReduceSum=c},{"../../environment":336,"../../math/ndarray":431,"../../util":448,"../graph_util":340,"./op":356}],358:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../util"),i=function(t){function e(e,r){var n=t.call(this)||this;n.xTensor=e,n.yTensor=r;var o=a.sizeFromShape(e.shape),i=a.sizeFromShape(r.shape);return a.assert(o===i,"The input size ("+o+") and output size ("+i+") must match"),n}return o(e,t),e.prototype.feedForward=function(t,e){var r=this,n=e.get(this.xTensor),o=t.clone(n);t.scope(function(t){e.set(r.yTensor,t(o.reshape(r.yTensor.shape)))})},e.prototype.backProp=function(t,e,r){var n=this,o=r.get(this.yTensor),a=t.clone(o);t.scope(function(){r.add(n.xTensor,a.reshape(n.xTensor.shape))})},e}(t("./op").Operation);r.Reshape=i},{"../../util":448,"./op":356}],359:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../environment"),i=t("../../math/ndarray"),s=t("../../util"),u=t("../graph"),c=t("../graph_util"),l=t("./op"),p=function(t){function e(e,r){var n=t.call(this)||this;return n.logitsTensor=e,n.output=r,n}return o(e,t),e.prototype.feedForward=function(t,e){var r=this,n=e.get(this.logitsTensor);return t.scope(function(o){e.set(r.output,o(t.softmax(n)))})},e.prototype.backProp=function(t,e,r){var n=this,o=e.get(this.output),a=r.get(this.output);t.scope(function(){if(c.shouldBackProp(n.logitsTensor)){var e=t.elementWiseMul(t.subtract(a,t.sum(t.elementWiseMul(a,o))),o);r.add(n.logitsTensor,e)}})},e}(l.Operation);r.Softmax=p;var h=function(t){function e(e,r,n){var o=t.call(this)||this;return o.logitsTensor=e,o.labelTensor=r,o.yTensor=n,o.softmaxTensor=new u.Tensor(e.shape),o.epsilon=a.ENV.math.keep(i.Scalar.new(1e-5)),o}return o(e,t),e.prototype.feedForward=function(t,e){var r=this,n=e.get(this.logitsTensor),o=e.get(this.labelTensor);t.scope(function(a){var i=t.softmax(n);e.set(r.softmaxTensor,a(i)),e.set(r.yTensor,a(f(t,i,o,r.epsilon)))})},e.prototype.backProp=function(t,e,r){var n=this,o=e.get(this.softmaxTensor),a=e.get(this.labelTensor);t.scope(function(){r.add(n.logitsTensor,t.subtract(o,a))})},e.prototype.disposeTransientArrays=function(t,e){t.disposeArray(this.softmaxTensor)},e.prototype.dispose=function(){this.epsilon.dispose()},e}(l.Operation);function f(t,e,r,n){return s.assert(e.size===r.size,"The output and target must be the same size"),t.scope(function(){var o=t.scalarPlusArray(n,e),a=t.log(o),i=t.elementWiseMul(r,a),s=t.neg(i);return t.sum(s)})}r.SoftmaxCrossEntropyCost=h,r.crossEntropyCost=f},{"../../environment":336,"../../math/ndarray":431,"../../util":448,"../graph":338,"../graph_util":340,"./op":356}],360:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../util"),i=t("../graph_util"),s=function(t){function e(e,r,n){var o=t.call(this)||this;return o.t1=e,o.t2=r,o.outTensor=n,a.assert(1===a.sizeFromShape(e.shape)||1===a.sizeFromShape(r.shape)||a.arraysEqual(e.shape,r.shape),"One of t1 or t2 must be a scalar, or t1 and t2 must have the same shape"),o}return o(e,t),e.prototype.feedForward=function(t,e){var r=this,n=e.get(this.t1),o=e.get(this.t2);t.scope(function(i){var s;s=a.isScalarShape(n.shape)?t.scalarMinusArray(n,o):a.isScalarShape(o.shape)?t.arrayMinusScalar(n,o):t.subtract(n,o),e.set(r.outTensor,i(s))})},e.prototype.backProp=function(t,e,r){var n=this,o=r.get(this.outTensor);t.scope(function(){if(i.shouldBackProp(n.t1))if(a.isScalarShape(n.t1.shape)){var e=t.sum(o);r.add(n.t1,e)}else r.add(n.t1,t.clone(o));if(i.shouldBackProp(n.t2))if(a.isScalarShape(n.t2.shape)){e=t.sum(o);var s=t.neg(e);r.add(n.t2,s)}else r.add(n.t2,t.neg(o))})},e.prototype.dispose=function(){null!=this.dySizeScalar&&this.dySizeScalar.dispose()},e}(t("./op").Operation);r.Subtract=s},{"../../util":448,"../graph_util":340,"./op":356}],361:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../math/ndarray"),i=t("../../math/optimizers/optimizer"),s=t("../tensor_array_map"),u=function(t){function e(e,r,n){var o=t.call(this,e,n)||this;return o.learningRate=e,o.gamma=r,o.accumulatedSquaredGradients=new s.TensorArrayMap,o.accumulatedUpdates=new s.TensorArrayMap,o.eps=a.Scalar.new(1e-6),o.g=a.Scalar.new(o.gamma),o}return o(e,t),e.prototype.applyGradients=function(t){throw new Error("Adadelta optimizer not yet implemented for eager mode.")},e.prototype.beforeBatch=function(e,r,n,o,i){var s=this;t.prototype.beforeBatch.call(this,e,r,n,o,i),0===this.accumulatedSquaredGradients.size()&&this.variableNodes.forEach(function(t){s.accumulatedSquaredGradients.set(t.output,a.NDArray.zeros(t.output.shape)),s.accumulatedUpdates.set(t.output,a.NDArray.zeros(t.output.shape))})},e.prototype.afterBatch=function(t,e,r,n,o){var a=this;t.scope(function(e){a.variableNodes.forEach(function(r){var o=n.get(r.output),i=a.variableGradients.get(r.output),s=a.accumulatedSquaredGradients.get(r.output),u=a.accumulatedUpdates.get(r.output),c=t.multiply(i,i),l=t.scaledArrayAdd(a.g,s,t.subtract(a.one,a.g),c),p=t.multiply(t.divide(t.sqrt(t.add(u,a.eps)),t.sqrt(t.add(s,a.eps))),i),h=t.scaledArrayAdd(a.cGraph,p,a.one,o),f=t.multiply(p,p),d=t.scaledArrayAdd(a.g,u,t.subtract(a.one,a.g),f);a.accumulatedSquaredGradients.set(r.output,e(l)),a.accumulatedUpdates.set(r.output,e(d)),n.set(r.output,e(h)),r.data=h,o.dispose(),s.dispose(),u.dispose()})}),this.variableGradients.dispose(),this.variableGradients=new s.TensorArrayMap},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.eps.dispose(),this.g.dispose(),this.accumulatedSquaredGradients.dispose(),this.accumulatedUpdates.dispose()},e}(i.Optimizer);r.AdadeltaOptimizer=u},{"../../math/ndarray":431,"../../math/optimizers/optimizer":434,"../tensor_array_map":370}],362:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../math/ndarray"),i=t("../../math/optimizers/optimizer"),s=t("../tensor_array_map"),u=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.learningRate=e,n.accumulatedSquaredGradients=new s.TensorArrayMap,n.eps=a.Scalar.new(1e-6),n}return o(e,t),e.prototype.applyGradients=function(t){throw new Error("Adagrad optimizer not yet implemented for eager mode.")},e.prototype.beforeBatch=function(e,r,n,o,i){var s=this;t.prototype.beforeBatch.call(this,e,r,n,o,i),0===this.accumulatedSquaredGradients.size()&&this.variableNodes.forEach(function(t){s.accumulatedSquaredGradients.set(t.output,a.NDArray.zeros(t.output.shape))})},e.prototype.afterBatch=function(t,e,r,n,o){var a=this;t.scope(function(e){a.variableNodes.forEach(function(r){var o=n.get(r.output),i=a.variableGradients.get(r.output),s=a.accumulatedSquaredGradients.get(r.output),u=t.multiply(i,i),c=t.add(s,u),l=t.scaledArrayAdd(a.cGraph,t.divide(i,t.add(t.sqrt(c),a.eps)),a.one,o);a.accumulatedSquaredGradients.set(r.output,e(c)),n.set(r.output,e(l)),r.data=l,o.dispose(),s.dispose()})}),this.variableGradients.dispose(),this.variableGradients=new s.TensorArrayMap},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.eps.dispose(),this.accumulatedSquaredGradients.dispose()},e}(i.Optimizer);r.AdagradOptimizer=u},{"../../math/ndarray":431,"../../math/optimizers/optimizer":434,"../tensor_array_map":370}],363:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../math/ndarray"),i=t("../../math/optimizers/optimizer"),s=t("../tensor_array_map"),u=function(t){function e(e,r,n,o){var i=t.call(this,e,o)||this;return i.learningRate=e,i.beta1=r,i.beta2=n,i.firstMoment=new s.TensorArrayMap,i.secondMoment=new s.TensorArrayMap,i.eps=a.Scalar.new(1e-8),i.b1=a.Scalar.new(i.beta1),i.b2=a.Scalar.new(i.beta2),i.accB1=a.Scalar.new(i.beta1),i.accB2=a.Scalar.new(i.beta2),i}return o(e,t),e.prototype.applyGradients=function(t){throw new Error("Adam optimizer not yet implemented for eager mode.")},e.prototype.beforeBatch=function(e,r,n,o,i){var s=this;t.prototype.beforeBatch.call(this,e,r,n,o,i),0===this.firstMoment.size()&&this.variableNodes.forEach(function(t){s.firstMoment.set(t.output,a.NDArray.zeros(t.output.shape))}),0===this.secondMoment.size()&&this.variableNodes.forEach(function(t){s.secondMoment.set(t.output,a.NDArray.zeros(t.output.shape))})},e.prototype.afterBatch=function(t,e,r,n,o){var a=this;t.scope(function(e){a.variableNodes.forEach(function(r){var o=n.get(r.output),i=a.variableGradients.get(r.output),s=a.firstMoment.get(r.output),u=a.secondMoment.get(r.output),c=t.scaledArrayAdd(a.b1,s,t.subtract(a.one,a.b1),i),l=t.multiply(i,i),p=t.scaledArrayAdd(a.b2,u,t.subtract(a.one,a.b2),l),h=t.divide(c,t.subtract(a.one,a.accB1)),f=t.divide(p,t.subtract(a.one,a.accB2)),d=t.scaledArrayAdd(a.cGraph,t.divide(h,t.add(t.sqrt(f),a.eps)),a.one,o);n.set(r.output,e(d)),r.data=d,a.firstMoment.set(r.output,e(c)),a.secondMoment.set(r.output,e(p)),o.dispose(),i.dispose(),s.dispose(),u.dispose()});var r=a.accB1,o=a.accB2;a.accB1=e(t.multiply(a.accB1,a.b1)),a.accB2=e(t.multiply(a.accB2,a.b2)),r.dispose(),o.dispose()}),this.variableGradients.dispose(),this.variableGradients=new s.TensorArrayMap},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.firstMoment.dispose(),this.secondMoment.dispose(),this.eps.dispose(),this.b1.dispose(),this.b2.dispose(),this.accB1.dispose(),this.accB2.dispose()},e}(i.Optimizer);r.AdamOptimizer=u},{"../../math/ndarray":431,"../../math/optimizers/optimizer":434,"../tensor_array_map":370}],364:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../math/ndarray"),i=t("../../math/optimizers/optimizer"),s=t("../tensor_array_map"),u=function(t){function e(e,r,n,o){var i=t.call(this,e,o)||this;return i.learningRate=e,i.beta1=r,i.beta2=n,i.firstMoment=new s.TensorArrayMap,i.weightedInfNorm=new s.TensorArrayMap,i.eps=a.Scalar.new(1e-8),i.b1=a.Scalar.new(i.beta1),i.b2=a.Scalar.new(i.beta2),i.accB1=a.Scalar.new(i.beta1),i}return o(e,t),e.prototype.applyGradients=function(t){throw new Error("Adamax optimizer not yet implemented for eager mode.")},e.prototype.beforeBatch=function(e,r,n,o,i){var s=this;t.prototype.beforeBatch.call(this,e,r,n,o,i),0===this.firstMoment.size()&&this.variableNodes.forEach(function(t){s.firstMoment.set(t.output,a.NDArray.zeros(t.output.shape))}),0===this.weightedInfNorm.size()&&this.variableNodes.forEach(function(t){s.weightedInfNorm.set(t.output,a.NDArray.zeros(t.output.shape))})},e.prototype.afterBatch=function(t,e,r,n,o){var a=this;t.scope(function(e){a.variableNodes.forEach(function(r){var o=n.get(r.output),i=a.variableGradients.get(r.output),s=a.firstMoment.get(r.output),u=a.weightedInfNorm.get(r.output),c=t.scaledArrayAdd(a.b1,s,t.subtract(a.one,a.b1),i),l=t.multiply(a.b2,u),p=t.abs(i),h=t.add(t.relu(t.subtract(l,p)),p),f=t.scaledArrayAdd(a.one,o,t.divideStrict(a.cGraph,t.subtract(a.one,a.accB1)),t.divide(c,t.add(a.eps,h)));n.set(r.output,e(f)),r.data=f,a.firstMoment.set(r.output,e(c)),a.weightedInfNorm.set(r.output,e(h)),o.dispose(),i.dispose(),s.dispose(),u.dispose()});var r=a.accB1;a.accB1=e(t.multiply(a.accB1,a.b1)),r.dispose()}),this.variableGradients.dispose(),this.variableGradients=new s.TensorArrayMap},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.firstMoment.dispose(),this.weightedInfNorm.dispose(),this.eps.dispose(),this.accB1.dispose(),this.b1.dispose(),this.b2.dispose()},e}(i.Optimizer);r.AdamaxOptimizer=u},{"../../math/ndarray":431,"../../math/optimizers/optimizer":434,"../tensor_array_map":370}],365:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../math/ndarray"),i=t("../../math/optimizers/sgd_optimizer"),s=t("../tensor_array_map"),u=function(t){function e(e,r,n){var o=t.call(this,e,n)||this;return o.learningRate=e,o.momentum=r,o.variableVelocities=new s.TensorArrayMap,o.m=a.Scalar.new(o.momentum),o}return o(e,t),e.prototype.applyGradients=function(t){throw new Error("Momentum optimizer not yet implemented for eager mode.")},e.prototype.beforeBatch=function(e,r,n,o,i){var s=this;t.prototype.beforeBatch.call(this,e,r,n,o,i),0===this.variableVelocities.size()&&this.variableNodes.forEach(function(t){s.variableVelocities.set(t.output,a.NDArray.zeros(t.output.shape))})},e.prototype.afterBatch=function(t,e,r,n,o){var a=this;t.scope(function(e){a.variableNodes.forEach(function(r){var o=n.get(r.output),i=a.variableGradients.get(r.output),s=a.variableVelocities.get(r.output),u=t.scaledArrayAdd(a.m,s,a.one,i),c=t.scaledArrayAdd(a.cGraph,u,a.one,o);a.variableVelocities.set(r.output,e(u)),n.set(r.output,e(c)),r.data=c,o.dispose(),s.dispose()})}),this.variableGradients.dispose(),this.variableGradients=new s.TensorArrayMap},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.m.dispose(),this.variableVelocities.dispose()},e.prototype.setMomentum=function(t){this.momentum=t},e}(i.SGDOptimizer);r.MomentumOptimizer=u},{"../../math/ndarray":431,"../../math/optimizers/sgd_optimizer":435,"../tensor_array_map":370}],366:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../math/ndarray"),i=t("../../math/optimizers/optimizer"),s=t("../tensor_array_map"),u=function(t){function e(e,r,n){var o=t.call(this,e,n)||this;return o.learningRate=e,o.gamma=r,o.accumulatedSquaredGradients=new s.TensorArrayMap,o.eps=a.Scalar.new(1e-6),o.g=a.Scalar.new(o.gamma),o}return o(e,t),e.prototype.applyGradients=function(t){throw new Error("RMSProp optimizer not yet implemented for eager mode.")},e.prototype.beforeBatch=function(e,r,n,o,i){var s=this;t.prototype.beforeBatch.call(this,e,r,n,o,i),0===this.accumulatedSquaredGradients.size()&&this.variableNodes.forEach(function(t){s.accumulatedSquaredGradients.set(t.output,a.NDArray.zeros(t.output.shape))})},e.prototype.afterBatch=function(t,e,r,n,o){var a=this;t.scope(function(e){a.variableNodes.forEach(function(r){var o=n.get(r.output),i=a.variableGradients.get(r.output),s=a.accumulatedSquaredGradients.get(r.output),u=t.multiply(i,i),c=t.scaledArrayAdd(a.g,s,t.subtract(a.one,a.g),u),l=t.scaledArrayAdd(a.cGraph,t.divide(i,t.add(t.sqrt(c),a.eps)),a.one,o);a.accumulatedSquaredGradients.set(r.output,e(c)),n.set(r.output,e(l)),r.data=l,o.dispose(),s.dispose()})}),this.variableGradients.dispose(),this.variableGradients=new s.TensorArrayMap},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.eps.dispose(),this.g.dispose(),this.accumulatedSquaredGradients.dispose()},e}(i.Optimizer);r.RMSPropOptimizer=u},{"../../math/ndarray":431,"../../math/optimizers/optimizer":434,"../tensor_array_map":370}],367:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultCompare=function(t,e){return t===e?0:t<e?-1:1};var n=function(){function t(t,e){this.comparator=t,this.indexObserver=e,this.heap=[]}return t.prototype.enqueue=function(t){this.heap.push(t),this.onIndexChanged(t,this.heap.length-1),this.siftUp(this.heap.length-1)},t.prototype.dequeue=function(){if(this.empty())throw new Error("dequeue called on empty priority queue.");var t=this.heap[0];return this.swap(0,this.heap.length-1),this.heap.pop(),this.siftDown(0),t},t.prototype.update=function(t,e){var r=e===this.heap.length-1;r||this.swap(e,this.heap.length-1),this.heap.pop(),r||(-1!==this.siftUpIndex(e)?this.siftUp(e):-1!==this.siftDownIndex(e)&&this.siftDown(e)),this.enqueue(t)},t.prototype.empty=function(){return 0===this.heap.length},t.prototype.onIndexChanged=function(t,e){this.indexObserver&&this.indexObserver(t,e)},t.prototype.getParentIndex=function(t){return 0===t?-1:Math.floor((t-1)/2)},t.prototype.getLeftChildIndex=function(t){var e=2*t+1;return e<this.heap.length?e:-1},t.prototype.getRightChildIndex=function(t){var e=2*t+2;return e<this.heap.length?e:-1},t.prototype.siftUpIndex=function(t){var e=this.getParentIndex(t);return-1===e?-1:this.compare(e,t)>0?e:-1},t.prototype.siftUp=function(t){for(var e=this.siftUpIndex(t);-1!==e;)this.swap(t,e),t=e,e=this.siftUpIndex(t)},t.prototype.siftDownIndex=function(t){if(t>=this.heap.length)return-1;var e=t,r=this.getLeftChildIndex(t);-1!==r&&this.compare(r,e)<0&&(e=r);var n=this.getRightChildIndex(t);return-1!==n&&this.compare(n,e)<0&&(e=n),e===t?-1:e},t.prototype.siftDown=function(t){for(var e=this.siftDownIndex(t);-1!==e;)this.swap(t,e),t=e,e=this.siftDownIndex(t)},t.prototype.compare=function(t,e){return this.comparator(this.heap[t],this.heap[e])},t.prototype.swap=function(t,e){var r=this.heap[t];this.heap[t]=this.heap[e],this.heap[e]=r,this.onIndexChanged(this.heap[t],t),this.onIndexChanged(this.heap[e],e)},t}();r.PriorityQueue=n},{}],368:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o,a=t("../math/ndarray"),i=t("../util"),s=t("./operation_emitter"),u=t("./session_util"),c=t("./tensor_array_map"),l=function(){return function(t){var e=this;this.dict={},t&&t.forEach(function(t){return e.dict[t.tensor.id]=t})}}();r.FeedDictionary=l,(o=n=r.CostReduction||(r.CostReduction={}))[o.NONE=0]="NONE",o[o.SUM=1]="SUM",o[o.MEAN=2]="MEAN";var p=function(){function t(t,e){this.math=e,this.activationArrayMap=new c.TensorArrayMap,this.runtimeCache={},this.oneScalar=a.Scalar.new(1),this.gradientArrayMap=new c.SummedTensorArrayMap(this.math)}return t.prototype.dispose=function(){var t=this;this.activationArrayMap.dispose(),Object.keys(this.runtimeCache).forEach(function(e){var r=t.runtimeCache[e];r.operations&&r.operations.forEach(function(t){return t.dispose()})}),this.runtimeCache={},null!=this.batchSizeScalar&&this.batchSizeScalar.dispose(),this.oneScalar.dispose()},t.prototype.evalAll=function(t,e){var r=this;return this.math.scope(function(){var n=new l(e),o=r.getOrCreateRuntime(t,n),a=r.activationArrayMap;u.disposeAndInitializeOperationOutputs(o.nodes,a),u.disposeTransientOperationArrays(o.operations,r.activationArrayMap,r.gradientArrayMap),u.addPersistentArraysToTensorArrayMap(o.nodes,a),u.loadInputsFromFeedDictionaryToTensorArrayMap(n,a,r.math),o.operations.forEach(function(t){return t.feedForward(r.math,a)});var i=t.map(function(t){return a.get(t)});return t.forEach(function(t){return a.delete(t)}),u.releaseFeedDictionaryInputsFromTensorArrayMap(n,a,r.math),i})},t.prototype.eval=function(t,e){return this.evalAll([t],e)[0]},t.prototype.train=function(t,e,r,o,s){var c=this;void 0===s&&(s=n.NONE),i.assert(i.isScalarShape(t.shape),"Cost tensor for training must be a scalar value."),this.prevBatchSize!==r&&(this.prevBatchSize=r,null!=this.batchSizeScalar&&this.batchSizeScalar.dispose(),this.batchSizeScalar=this.math.keep(a.Scalar.new(r)));var p=new l(e);u.throwIfFeedDictionaryContainsNDArrays(p);var h=this.getOrCreateRuntime([t],p),f=h.operations,d=h.operations.slice().reverse(),m=this.activationArrayMap,g=this.gradientArrayMap;return g.nullify(t),g.add(t,this.oneScalar),u.addPersistentArraysToTensorArrayMap(h.nodes,m),o.beforeBatch(this.math,r,h,m,g),this.math.scope(function(){for(var e=a.Scalar.new(0),n=0;n<r;++n)u.disposeAndInitializeOperationOutputs(h.nodes,m),u.disposeAndInitializeOperationInputGradients(h.nodes,g),u.disposeTransientOperationArrays(h.operations,m,g),u.loadInputsFromFeedDictionaryToTensorArrayMap(p,m,c.math),f.forEach(function(t){return t.feedForward(c.math,m)}),d.forEach(function(t){return t.backProp(c.math,m,g)}),o.afterExample(c.math,h,m,g),u.releaseFeedDictionaryInputsFromTensorArrayMap(p,m,c.math),e=c.updateCostForExample(e,m.get(t),s);return o.afterBatch(c.math,r,h,m,g),c.updateCostForBatch(e,s)})},t.prototype.updateCostForExample=function(t,e,r){return r===n.MEAN||r===n.SUM?this.math.add(t,e):t},t.prototype.updateCostForBatch=function(t,e){return e===n.MEAN?this.math.divide(t,this.batchSizeScalar):t},t.prototype.getOrCreateRuntime=function(t,e){var r=this.makeRuntimeCacheKey(t,e),n=this.runtimeCache[r];if(void 0===n){var o=u.getOrderedEvaluationSetFromEvalTensor(t,e);u.removeFeedDictionaryNodesFromEvaluationSet(e,o),u.throwErrorIfEvaluationSetContainsPlaceholderNodes(o),n={nodes:o,operations:s.emitFromGraphNodes(o)},this.runtimeCache[r]=n}return n},t.prototype.makeRuntimeCacheKey=function(t,e){return t.map(function(t){return t.id}).sort().join("_")+"__"+Object.keys(e.dict).sort().join("_")},t}();r.Session=p},{"../math/ndarray":431,"../util":448,"./operation_emitter":341,"./session_util":369,"./tensor_array_map":370}],369:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../math/ndarray"),o=t("../util"),a=t("./graph"),i=t("./graph_util");function s(t){return Object.keys(t.dict).map(function(e){return t.dict[+e].tensor.node})}r.getTerminatingNodesFromFeedDictionary=s,r.getOrderedEvaluationSetFromEvalTensor=function(t,e){var r=s(e),n=t.map(function(t){return t.node}),o=i.getUnorderedEvaluationSet(n,r);return i.getOrderedEvaluationSet(o)},r.addPersistentArraysToTensorArrayMap=function(t,e){t.forEach(function(t){(t instanceof a.VariableNode||t instanceof a.ConstantNode)&&e.set(t.output,t.data)})},r.getVariableNodesFromEvaluationSet=function(t){var e=[];return t.forEach(function(t){t instanceof a.VariableNode&&e.push(t)}),e},r.throwIfFeedDictionaryContainsNDArrays=function(t){Object.keys(t.dict).forEach(function(e){if(t.dict[+e].data instanceof n.NDArray)throw new Error("training requires FeedDictionary entries to be InputProvidersand not NDArrays.")})},r.loadInputsFromFeedDictionaryToTensorArrayMap=function(t,e,r){Object.keys(t.dict).forEach(function(a){var i,s=t.dict[+a];i=s.data instanceof n.NDArray?s.data:s.data.getNextCopy(r),o.assert(o.arraysEqual(s.tensor.shape,i.shape),"Error loading FeedEntry: feeding NDArray of shape "+i.shape+" does not match Tensor (id: "+s.tensor.id+") shape: "+s.tensor.shape+"."),e.set(s.tensor,i)})},r.releaseFeedDictionaryInputsFromTensorArrayMap=function(t,e,r){Object.keys(t.dict).forEach(function(o){var a=t.dict[+o];if(!(a.data instanceof n.NDArray)){var i=a.data,s=e.get(a.tensor);i.disposeCopy(r,s)}e.delete(a.tensor)})},r.removeFeedDictionaryNodesFromEvaluationSet=function(t,e){for(var r=0;r<e.length;){var n=e[r];null!=t.dict[n.output.id]?e.splice(r,1):++r}},r.disposeAndInitializeOperationOutputs=function(t,e){t.forEach(function(t){i.isInputNode(t)||(i.isPassthroughNode(t,e)||e.disposeArray(t.output),e.set(t.output,null))})},r.disposeAndInitializeOperationInputGradients=function(t,e){t.forEach(function(t){Object.keys(t.inputs).forEach(function(r){var n=t.inputs[r];e.get(n,!0)!==e.get(t.output,!0)&&e.disposeArray(n),e.nullify(n)})})},r.disposeTransientOperationArrays=function(t,e,r){t.forEach(function(t){return t.disposeTransientArrays(e,r)})},r.throwErrorIfEvaluationSetContainsPlaceholderNodes=function(t){t.forEach(function(t){if(t instanceof a.PlaceholderNode){var e="["+t.output.shape.join(", ")+"]";throw new Error('Placeholder node "'+t.name+'" '+e+" not present in feed dictionary.")}})}},{"../math/ndarray":431,"../util":448,"./graph":338,"./graph_util":340}],370:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function t(){this.dict={}}return t.prototype.get=function(t,e){if(void 0===e&&(e=!1),!e&&void 0===this.dict[t.id])throw new Error("tensor "+t.id+" not in array map.");var r=this.dict[t.id];if(!e&&null===r)throw new Error("tensor "+t.id+" has null array.");return r},t.prototype.delete=function(t){delete this.dict[t.id]},t.prototype.nullify=function(t){this.dict[t.id]=null},t.prototype.disposeArray=function(t){if(void 0!==this.dict[t.id]){var e=this.dict[t.id];null!==e&&(e.dispose(),this.dict[t.id]=null)}},t.prototype.size=function(){return Object.keys(this.dict).length},t.prototype.dispose=function(){var t=this;Object.keys(this.dict).forEach(function(e){var r=t.dict[+e];r&&r.dispose()}),this.dict={}},t.prototype.hasNullArray=function(t){if(void 0===this.dict[t.id])throw new Error("tensor "+t.id+" not in array map.");return null===this.dict[t.id]},t}();r.TensorArrayMapBase=a;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.set=function(t,e){this.dict[t.id]=e},e}(a);r.TensorArrayMap=i;var s=function(t){function e(e){var r=t.call(this)||this;return r.math=e,r}return o(e,t),e.prototype.add=function(t,e){if(null==this.dict[t.id])this.dict[t.id]=this.math.keep(e);else{var r=this.get(t),n=this.math.keep(this.math.addStrict(r,e));this.dict[t.id]=n,r.dispose()}},e}(a);r.SummedTensorArrayMap=s},{}],371:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./data/xhr-dataset");r.xhr_dataset=n;var o=t("./environment");r.environment=o;var a=t("./math/backends/webgl/gpgpu_util");r.gpgpu_util=a;var i=t("./math/backends/webgl/render_ndarray_gpu_util");r.render_ndarray_gpu_util=i;var s=t("./math/backends/webgl/webgl_util");r.webgl_util=s;var u=t("./math/conv_util");r.conv_util=u;var c=t("./test_util");r.test_util=c;var l=t("./util");r.util=l;var p=t("./version");r.version=p.version;var h=t("./data/checkpoint_loader");r.CheckpointLoader=h.CheckpointLoader;var f=t("./data/dataset");r.InMemoryDataset=f.InMemoryDataset;var d=t("./data/input_provider");r.InCPUMemoryShuffledInputProviderBuilder=d.InCPUMemoryShuffledInputProviderBuilder,r.InGPUMemoryShuffledInputProviderBuilder=d.InGPUMemoryShuffledInputProviderBuilder;var m=t("./data/xhr-dataset");r.XhrDataset=m.XhrDataset;var g=t("./environment");r.ENV=g.ENV,r.Environment=g.Environment;var v=t("./graph/graph");r.Graph=v.Graph,r.Tensor=v.Tensor;var y=t("./graph/graph_runner");r.GraphRunner=y.GraphRunner,r.MetricReduction=y.MetricReduction;var _=t("./graph/optimizers/adadelta_optimizer");r.AdadeltaOptimizer=_.AdadeltaOptimizer;var b=t("./graph/optimizers/adagrad_optimizer");r.AdagradOptimizer=b.AdagradOptimizer;var x=t("./graph/optimizers/adam_optimizer");r.AdamOptimizer=x.AdamOptimizer;var w=t("./graph/optimizers/adamax_optimizer");r.AdamaxOptimizer=w.AdamaxOptimizer;var E=t("./graph/optimizers/momentum_optimizer");r.MomentumOptimizer=E.MomentumOptimizer;var k=t("./graph/optimizers/rmsprop_optimizer");r.RMSPropOptimizer=k.RMSPropOptimizer;var S=t("./graph/session");r.CostReduction=S.CostReduction,r.Session=S.Session;var A=t("./initializers");r.ConstantInitializer=A.ConstantInitializer,r.NDArrayInitializer=A.NDArrayInitializer,r.OnesInitializer=A.OnesInitializer,r.RandomNormalInitializer=A.RandomNormalInitializer,r.RandomTruncatedNormalInitializer=A.RandomTruncatedNormalInitializer,r.RandomUniformInitializer=A.RandomUniformInitializer,r.VarianceScalingInitializer=A.VarianceScalingInitializer,r.ZerosInitializer=A.ZerosInitializer;var O=t("./math/backends/backend_cpu");r.MathBackendCPU=O.MathBackendCPU,r.NDArrayMathCPU=O.NDArrayMathCPU;var T=t("./math/backends/backend_webgl");r.MathBackendWebGL=T.MathBackendWebGL,r.NDArrayMathGPU=T.NDArrayMathGPU;var N=t("./math/backends/types/matmul");r.MatrixOrientation=N.MatrixOrientation;var D=t("./math/backends/webgl/gpgpu_context");r.GPGPUContext=D.GPGPUContext;var M=t("./math/math");r.NDArrayMath=M.NDArrayMath;var R=t("./math/ndarray");r.Array1D=R.Array1D,r.Array2D=R.Array2D,r.Array3D=R.Array3D,r.Array4D=R.Array4D,r.NDArray=R.NDArray,r.Scalar=R.Scalar,r.variable=R.variable,r.Variable=R.Variable;var P=t("./math/optimizers/optimizer");r.Optimizer=P.Optimizer;var C=t("./math/optimizers/sgd_optimizer");r.SGDOptimizer=C.SGDOptimizer;var I=t("./math/types");r.Rank=I.Rank,function(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}(t("./math/ops"))},{"./data/checkpoint_loader":331,"./data/dataset":332,"./data/input_provider":333,"./data/xhr-dataset":334,"./environment":336,"./graph/graph":338,"./graph/graph_runner":339,"./graph/optimizers/adadelta_optimizer":361,"./graph/optimizers/adagrad_optimizer":362,"./graph/optimizers/adam_optimizer":363,"./graph/optimizers/adamax_optimizer":364,"./graph/optimizers/momentum_optimizer":365,"./graph/optimizers/rmsprop_optimizer":366,"./graph/session":368,"./initializers":372,"./math/backends/backend_cpu":375,"./math/backends/backend_webgl":377,"./math/backends/types/matmul":381,"./math/backends/webgl/gpgpu_context":393,"./math/backends/webgl/gpgpu_util":395,"./math/backends/webgl/render_ndarray_gpu_util":405,"./math/backends/webgl/webgl_util":415,"./math/conv_util":423,"./math/math":429,"./math/ndarray":431,"./math/ops":433,"./math/optimizers/optimizer":434,"./math/optimizers/sgd_optimizer":435,"./math/types":445,"./test_util":447,"./util":448,"./version":449}],372:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./math/ndarray"),o=function(){function t(t,e,r){void 0===t&&(t=1),void 0===e&&(e="fan_in"),void 0===r&&(r="normal"),this.scale=t,this.mode=e,this.distribution=r}return t.prototype.initialize=function(t,e,r){var o=0;if("fan_in"===this.mode)o=e;else if("fan_out"===this.mode)o=r;else{if("fan_avg"!==this.mode)throw new Error("Unexpected mode for variance scaling initializer: "+this.mode);o=(e+r)/2}if("normal"===this.distribution)return n.NDArray.randTruncatedNormal(t,0,Math.sqrt(this.scale/o));if("uniform"===this.distribution)return n.NDArray.randUniform(t,0,Math.sqrt(3*this.scale/o));throw new Error("Unexpected distribution for variance scaling initializer: "+this.distribution)},t}();r.VarianceScalingInitializer=o;var a=function(){function t(){}return t.prototype.initialize=function(t,e,r){return n.NDArray.zeros(t)},t}();r.ZerosInitializer=a;var i=function(){function t(){}return t.prototype.initialize=function(t,e,r){var o=n.NDArray.zeros(t);return o.fill(1),o},t}();r.OnesInitializer=i;var s=function(){function t(t){void 0===t&&(t=0),this.value=t}return t.prototype.initialize=function(t,e,r){var o=n.NDArray.zeros(t);return o.fill(this.value),o},t}();r.ConstantInitializer=s;var u=function(){function t(t){this.ndarray=t}return t.prototype.initialize=function(t,e,r){return this.ndarray},t}();r.NDArrayInitializer=u;var c=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=.05),this.mean=t,this.stdev=e}return t.prototype.initialize=function(t,e,r){return n.NDArray.randNormal(t,this.mean,this.stdev)},t}();r.RandomNormalInitializer=c;var l=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=.05),this.mean=t,this.stdev=e}return t.prototype.initialize=function(t,e,r){return n.NDArray.randTruncatedNormal(t,this.mean,this.stdev)},t}();r.RandomTruncatedNormalInitializer=l;var p=function(){function t(t,e){void 0===t&&(t=-.05),void 0===e&&(e=.05),this.minval=t,this.maxval=e}return t.prototype.initialize=function(t,e,r){return n.NDArray.randUniform(t,this.minval,this.maxval)},t}();r.RandomUniformInitializer=p},{"./math/ndarray":431}],373:[function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var o=t("../environment"),a=t("../util"),i=t("./decorators"),s=t("./ndarray"),u=t("./rand"),c=function(){function t(){}return t.ones=function(t,e){var r=function(t,e){for(var r=l(t,e),n=0;n<r.length;n++)r[n]=1;return r}(a.sizeFromShape(t),e);return s.NDArray.make(t,{values:r},e)},t.zeros=function(t,e){var r=l(a.sizeFromShape(t),e);return s.NDArray.make(t,{values:r},e)},t.onesLike=function(e){return t.ones(e.shape,e.dtype)},t.zerosLike=function(e){return t.zeros(e.shape,e.dtype)},t.clone=function(t){return s.NDArray.make(t.shape,{dataId:t.dataId},t.dtype)},t.randNormal=function(t,e,r,n,o){if(void 0===e&&(e=0),void 0===r&&(r=1),null!=n&&"bool"===n)throw new Error("Unsupported data type "+n);var a=new u.MPRandGauss(e,r,n,!1,o);return s.NDArray.rand(t,function(){return a.nextValue()},n)},t.truncatedNormal=function(t,e,r,n,o){if(void 0===e&&(e=0),void 0===r&&(r=1),null!=n&&"bool"===n)throw new Error("Unsupported data type "+n);var a=new u.MPRandGauss(e,r,n,!0,o);return s.NDArray.rand(t,function(){return a.nextValue()},n)},t.randUniform=function(t,e,r,n){return s.NDArray.rand(t,function(){return a.randUniform(e,r)},n)},t.rand=function(t,e,r){var n=a.sizeFromShape(t),o=null;if(null==r||"float32"===r)o=new Float32Array(n);else if("int32"===r)o=new Int32Array(n);else{if("bool"!==r)throw new Error("Unknown data type "+r);o=new Uint8Array(n)}for(var i=0;i<n;i++)o[i]=e();return s.NDArray.make(t,{values:o},r)},t.multinomial=function(t,e,r){var n=t.size;if(n<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+n+".");if(t.rank>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+t.rank);r=r||Math.random();var a=t.rank;1===t.rank&&(t=t.as2D(1,-1));var i=o.ENV.engine.executeKernel("Multinomial",{inputs:{probs:t},args:{numSamples:e,seed:r}});return 1===a?i.as1D():i},t.oneHot=function(t,e,r,n){if(void 0===r&&(r=1),void 0===n&&(n=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);return o.ENV.engine.executeKernel("OneHot",{inputs:{indices:t},args:{depth:e,onValue:r,offValue:n}})},t.fromPixels=function(t,e){if(void 0===e&&(e=3),e>4)throw new Error("Cannot construct NDArray with more than 4 channels from pixels.");return o.ENV.math.fromPixels(t,e)},t.reshape=function(t,e){e=a.inferFromImplicitShape(e,t.size),a.assert(t.size===a.sizeFromShape(e),"new shape and old shape must have the same number of elements.");return o.ENV.engine.executeKernel("Reshape",{inputs:{x:t},args:{newShape:e}},function(e,r){return{x:function(){return e.reshape(t.shape)}}})},t.cast=function(t,e){return o.ENV.engine.executeKernel("Cast",{inputs:{x:t},args:{newDType:e}},function(t,e){return{x:function(){return t.reshape(t.shape)}}})},t.tile=function(t,e){return a.assert(t.rank===e.length,"Error in transpose: rank of input "+t.rank+" must match length of reps "+e+"."),o.ENV.engine.executeKernel("Tile",{inputs:{x:t},args:{reps:e}})},t.gather=function(t,e,r){return void 0===r&&(r=0),o.ENV.engine.executeKernel("Gather",{inputs:{x:t,indices:e},args:{axis:r}})},t.pad1D=function(t,e,r){return void 0===r&&(r=0),a.assert(2===e.length,"Invalid number of paddings. Must be length of 2."),o.ENV.engine.executeKernel("Pad1D",{inputs:{x:t},args:{paddings:e,constantValue:r}})},t.pad2D=function(t,e,r){return void 0===r&&(r=0),a.assert(2===e.length&&2===e[0].length&&2===e[1].length,"Invalid number of paddings. Must be length of 2 each."),o.ENV.engine.executeKernel("Pad2D",{inputs:{x:t},args:{paddings:e,constantValue:r}})},t.range=function(e,r,n,o){if(void 0===n&&(n=1),void 0===o&&(o="float32"),0===n)throw new Error("Cannot have a step of zero");if(e===r||e<r&&n<0||r<e&&n>1)return t.zeros([0],o);var a=l(Math.abs(Math.ceil((r-e)/n)),o);r<e&&1===n&&(n=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+n;return s.Array1D.new(a,o)},n([i.operation],t,"ones",null),n([i.operation],t,"zeros",null),n([i.operation],t,"onesLike",null),n([i.operation],t,"zerosLike",null),n([i.operation],t,"clone",null),n([i.operation],t,"randNormal",null),n([i.operation],t,"truncatedNormal",null),n([i.operation],t,"randUniform",null),n([i.operation],t,"rand",null),n([i.operation],t,"multinomial",null),n([i.operation],t,"oneHot",null),n([i.operation],t,"fromPixels",null),n([i.operation],t,"reshape",null),n([i.operation],t,"cast",null),n([i.operation],t,"tile",null),n([i.operation],t,"gather",null),n([i.operation],t,"pad1D",null),n([i.operation],t,"pad2D",null),n([i.operation],t,"range",null),t}();function l(t,e){if(null==e||"float32"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error("Unknown data type "+e)}r.Ops=c},{"../environment":336,"../util":448,"./decorators":425,"./ndarray":431,"./rand":437}],374:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../util");function o(t,e){for(var r=0;r<t.length;++r)if(t[t.length-r-1]!==e-1-r)return!1;return!0}function a(t,e,r){for(var n=t.length+e.length,o=[],a=0,i=0,s=0;s<n;s++)-1===r.indexOf(s)?o.push(t[a++]):o.push(e[i++]);return o}r.axesAreInnerMostDims=o,r.combineLocations=a,r.computeOutAndReduceShapes=function(t,e){for(var r=[],n=t.length,o=0;o<n;o++)-1===e.indexOf(o)&&r.push(t[o]);return[r,e.map(function(e){return t[e]})]},r.expandShapeToKeepDim=function(t,e){return a(t,e.map(function(t){return 1}),e)},r.parseAxisParam=function(t,e){var r=e.length;return t=null==t?e.map(function(t,e){return e}):[].concat(t),n.assert(t.every(function(t){return t>=-r&&t<r}),"All values in axis param must be in range [-"+r+", "+r+") but got axis "+t),n.assert(t.every(function(t){return n.isInt(t)}),"All values in axis param must be integers but got axis "+t),t.map(function(t){return t<0?r+t:t})},r.assertAxesAreInnerMostDims=function(t,e,r){n.assert(o(e,r),t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+r+" input.")},r.getAxesPermutation=function(t,e){if(o(t,e))return null;for(var r=[],n=0;n<e;++n)-1===t.indexOf(n)&&r.push(n);return t.forEach(function(t){return r.push(t)}),r},r.getUndoAxesPermutation=function(t){return t.map(function(t,e){return[e,t]}).sort(function(t,e){return t[1]-e[1]}).map(function(t){return t[0]})},r.getInnerMostAxes=function(t,e){for(var r=[],n=e-t;n<e;++n)r.push(n);return r}},{"../util":448}],375:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,a){function i(t){try{u(n.next(t))}catch(t){a(t)}}function s(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(i,s)}u((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=n[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(r,"__esModule",{value:!0});var s=t("seedrandom"),u=t("../../environment"),c=t("../../util"),l=t("../broadcast_util"),p=t("../concat_util"),h=t("../math"),f=t("../ndarray"),d=t("../ops"),m=t("../types"),g=t("./../axis_util"),v=t("./types/matmul"),y=function(){function t(){this.data={},"undefined"!=typeof document&&(this.canvas=document.createElement("canvas"))}return t.prototype.register=function(t,e,r){this.data[t]=null},t.prototype.write=function(t,e){if(null==e)throw new Error("MathBackendCPU.write(): values can not be null");this.throwIfNoData(t),this.data[t]=e},t.prototype.fromPixels=function(t,e){if(null==t)throw new Error("MathBackendCPU.writePixels(): pixels can not be null");var r,n;if(t instanceof ImageData)r=t.data;else if(t instanceof HTMLCanvasElement)r=t.getContext("2d").getImageData(0,0,t.width,t.height).data;else{if(!(t instanceof HTMLImageElement||t instanceof HTMLVideoElement))throw new Error("pixels is of unknown type: "+t.constructor.name);if(null==this.canvas)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.canvas.width=t.width,this.canvas.height=t.height,this.canvas.getContext("2d").drawImage(t,0,0,t.width,t.height),r=this.canvas.getContext("2d").getImageData(0,0,t.width,t.height).data}if(4===e)n=new Int32Array(r);else{var o=t.width*t.height;n=new Int32Array(o*e);for(var a=0;a<o;a++)for(var i=0;i<e;++i)n[a*e+i]=r[4*a+i]}var s=[t.height,t.width,e];return f.Array3D.new(s,n,"int32")},t.prototype.read=function(t){return a(this,void 0,void 0,function(){return i(this,function(e){return this.throwIfNoData(t),[2,this.data[t]]})})},t.prototype.readSync=function(t){return this.throwIfNoData(t),this.data[t]},t.prototype.disposeData=function(t){delete this.data[t]},t.prototype.time=function(t){return a(this,void 0,void 0,function(){var e;return i(this,function(r){return e=performance.now(),t(),[2,performance.now()-e]})})},t.prototype.throwIfNoData=function(t){if(!(t in this.data))throw new Error("No data found for NDArray with data id "+t+". Use dl.ENV.math instead of constructing your own NDArrayMath. If you need to construct your own math, make sure this array is allocated after the math construction")},t.prototype.slice1D=function(t,e,r){var n=t.dataSync().slice(e,e+r);return f.Array1D.new(n,t.dtype)},t.prototype.slice2D=function(t,e,r){for(var n=d.zeros(r,t.dtype),o=e[0],a=e[1],i=0;i<r[0];++i)for(var s=0;s<r[1];++s){var u=t.get(i+o,s+a);n.set(u,i,s)}return n},t.prototype.slice3D=function(t,e,r){for(var n=d.zeros(r,t.dtype),o=e[0],a=e[1],i=e[2],s=0;s<r[0];++s)for(var u=0;u<r[1];++u)for(var c=0;c<r[2];++c){var l=t.get(s+o,u+a,c+i);n.set(l,s,u,c)}return n},t.prototype.slice4D=function(t,e,r){for(var n=d.zeros(r,t.dtype),o=e[0],a=e[1],i=e[2],s=e[3],u=0;u<r[0];++u)for(var c=0;c<r[1];++c)for(var l=0;l<r[2];++l)for(var p=0;p<r[3];++p){var h=t.get(u+o,c+a,l+i,p+s);n.set(h,u,c,l,p)}return n},t.prototype.reverse4D=function(t,e){for(var r=d.clone(t),n=function(r){return-1!==e.indexOf(r)&&1!==t.shape[r]},o=0;o<t.shape[0];++o)for(var a=0;a<t.shape[1];++a)for(var i=0;i<t.shape[2];++i)for(var s=0;s<t.shape[3];++s){var u=n(0)?t.shape[0]-o-1:o,c=n(1)?t.shape[1]-a-1:a,l=n(2)?t.shape[2]-i-1:i,p=n(3)?t.shape[3]-s-1:s,h=t.get(u,c,l,p);r.set(h,o,a,i,s)}return r},t.prototype.concat=function(t,e){var r=p.computeOutShape(t.shape,e.shape,1),n=d.zeros(r);if(1===t.shape[0]&&1===e.shape[0]){var o=t.dataSync(),a=e.dataSync(),i=n.dataSync();return i.set(o,0),i.set(a,t.size),n}for(var s=0;s<r[0];++s){for(var u=0;u<t.shape[1];++u)n.set(t.get(s,u),s,u);for(u=0;u<e.shape[1];++u)n.set(e.get(s,u),s,u+t.shape[1])}return n},t.prototype.neg=function(t){return this.multiply(f.Scalar.new(-1),t)},t.prototype.add=function(t,e){return this.broadcastedBinaryOp(t,e,m.upcastType(t.dtype,e.dtype),function(t,e){return t+e})},t.prototype.subtract=function(t,e){return this.broadcastedBinaryOp(t,e,m.upcastType(t.dtype,e.dtype),function(t,e){return t-e})},t.prototype.pow=function(t,e){return this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.pow(t,e)})},t.prototype.matMul=function(t,e,r,n){void 0===r&&(r=v.MatrixOrientation.REGULAR),void 0===n&&(n=v.MatrixOrientation.REGULAR);for(var o=r===v.MatrixOrientation.REGULAR?t.shape[1]:t.shape[0],a=r===v.MatrixOrientation.REGULAR?t.shape[0]:t.shape[1],i=n===v.MatrixOrientation.REGULAR?e.shape[1]:e.shape[0],s=function(t,e,r){return t.get(e,r)},u=function(t,e,r){return t.get(r,e)},c=r===v.MatrixOrientation.REGULAR?s:u,l=n===v.MatrixOrientation.REGULAR?s:u,p=new Float32Array(a*i),h=0,d=0;d<a;++d)for(var m=0;m<i;++m){for(var g=0,y=0;y<o;++y)g+=c(t,d,y)*l(e,y,m);p[h++]=g}return f.Array2D.new([a,i],p)},t.prototype.multiply=function(t,e){return this.broadcastedBinaryOp(t,e,m.upcastType(t.dtype,e.dtype),function(t,e){return t*e})},t.prototype.divide=function(t,e){return this.broadcastedBinaryOp(t,e,"float32",function(t,e){return t/e})},t.prototype.sum=function(t,e){g.assertAxesAreInnerMostDims("sum",e,t.rank);for(var r=g.computeOutAndReduceShapes(t.shape,e),n=r[0],o=r[1],a=m.upcastType(t.dtype,"int32"),i=d.zeros(n,a),s=c.sizeFromShape(o),u=i.dataSync(),l=t.dataSync(),p=0;p<u.length;++p){for(var h=p*s,f=0,v=0;v<s;++v)f+=l[h+v];u[p]=f}return i},t.prototype.argMin=function(t,e){g.assertAxesAreInnerMostDims("argMin",e,t.rank);for(var r=g.computeOutAndReduceShapes(t.shape,e),n=r[0],o=r[1],a=d.zeros(n,"int32"),i=c.sizeFromShape(o),s=a.dataSync(),u=t.dataSync(),l=0;l<s.length;++l){for(var p=l*i,h=u[p],f=0,m=0;m<i;++m){var v=u[p+m];if(isNaN(v)){f=c.NAN_INT32;break}v<h&&(h=v,f=m)}s[l]=f}return a},t.prototype.argMax=function(t,e){g.assertAxesAreInnerMostDims("argMax",e,t.rank);for(var r=g.computeOutAndReduceShapes(t.shape,e),n=r[0],o=r[1],a=d.zeros(n,"int32"),i=c.sizeFromShape(o),s=a.dataSync(),u=t.dataSync(),l=0;l<s.length;++l){for(var p=l*i,h=u[p],f=0,m=0;m<i;++m){var v=u[p+m];if(isNaN(v)){f=c.NAN_INT32;break}v>h&&(h=v,f=m)}s[l]=f}return a},t.prototype.equal=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(r,n){return c.isValNaN(r,t.dtype)||c.isValNaN(n,e.dtype)?c.getNaN("bool"):r===n?1:0})},t.prototype.notEqual=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(r,n){return c.isValNaN(r,t.dtype)||c.isValNaN(n,e.dtype)?c.getNaN("bool"):r!==n?1:0})},t.prototype.less=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(r,n){return c.isValNaN(r,t.dtype)||c.isValNaN(n,e.dtype)?c.getNaN("bool"):r<n?1:0})},t.prototype.lessEqual=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(r,n){return c.isValNaN(r,t.dtype)||c.isValNaN(n,e.dtype)?c.getNaN("bool"):r<=n?1:0})},t.prototype.greater=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(r,n){return c.isValNaN(r,t.dtype)||c.isValNaN(n,e.dtype)?c.getNaN("bool"):r>n?1:0})},t.prototype.greaterEqual=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(r,n){return c.isValNaN(r,t.dtype)||c.isValNaN(n,e.dtype)?c.getNaN("bool"):r>=n?1:0})},t.prototype.logicalAnd=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(r,n){return c.isValNaN(r,t.dtype)||c.isValNaN(n,e.dtype)?c.getNaN("bool"):r&&n})},t.prototype.logicalOr=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(r,n){return c.isValNaN(r,t.dtype)||c.isValNaN(n,e.dtype)?c.getNaN("bool"):r||n})},t.prototype.where=function(t,e,r,n){for(var o=t.dataSync(),a=e.dataSync(),i=r.dataSync(),s=d.zeros(e.shape,n),u=s.dataSync(),c=0,l=t.rank>1||1===e.rank?1:e.shape[1],p=0;p<o.length;p++)for(var h=0;h<l;h++)1===o[p]?u[c++]=a[p]:u[c++]=i[p];return s},t.prototype.topKValues=function(t,e){return this.topK(t,e).values},t.prototype.topKIndices=function(t,e){return this.topK(t,e).indices},t.prototype.topK=function(t,e){for(var r=t.dataSync(),n=[],o=0;o<r.length;o++)n.push({value:r[o],index:o});n.sort(function(t,e){return e.value-t.value});var a=c.getTypedArrayFromDType(t.dtype,e),i=new Int32Array(e);for(o=0;o<e;o++)a[o]=n[o].value,i[o]=n[o].index;return{values:f.Array1D.new(a,t.dtype),indices:f.Array1D.new(i)}},t.prototype.min=function(t,e){g.assertAxesAreInnerMostDims("min",e,t.rank);for(var r=g.computeOutAndReduceShapes(t.shape,e),n=r[0],o=r[1],a=d.zeros(n,t.dtype),i=c.sizeFromShape(o),s=a.dataSync(),u=t.dataSync(),l=0;l<s.length;++l){for(var p=l*i,h=u[0],f=0;f<i;++f){var m=u[p+f];if(isNaN(m)){h=Number.NaN;break}m<h&&(h=m)}s[l]=h}return a},t.prototype.minimum=function(t,e){return this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.min(t,e)})},t.prototype.max=function(t,e){g.assertAxesAreInnerMostDims("max",e,t.rank);for(var r=g.computeOutAndReduceShapes(t.shape,e),n=r[0],o=r[1],a=d.zeros(n,t.dtype),i=c.sizeFromShape(o),s=a.dataSync(),u=t.dataSync(),l=0;l<s.length;++l){for(var p=l*i,h=u[p],f=0;f<i;++f){var m=u[p+f];if(isNaN(m)){h=Number.NaN;break}m>h&&(h=m)}s[l]=h}return a},t.prototype.maximum=function(t,e){return this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.max(t,e)})},t.prototype.ceil=function(t){for(var e=t.dataSync(),r=new Float32Array(e.length),n=0;n<e.length;++n)r[n]=Math.ceil(e[n]);return f.NDArray.make(t.shape,{values:r})},t.prototype.floor=function(t){for(var e=t.dataSync(),r=new Float32Array(e.length),n=0;n<e.length;++n)r[n]=Math.floor(e[n]);return f.NDArray.make(t.shape,{values:r})},t.prototype.exp=function(t){for(var e=t.dataSync(),r=new Float32Array(e.length),n=0;n<e.length;++n)r[n]=Math.exp(e[n]);return f.NDArray.make(t.shape,{values:r})},t.prototype.log=function(t){for(var e=t.dataSync(),r=new Float32Array(e.length),n=0;n<e.length;++n){var o=e[n];r[n]=Math.log(o)}return f.NDArray.make(t.shape,{values:r})},t.prototype.sqrt=function(t){for(var e=t.dataSync(),r=new Float32Array(e.length),n=0;n<e.length;++n){var o=e[n];r[n]=Math.sqrt(o)}return f.NDArray.make(t.shape,{values:r})},t.prototype.square=function(t){for(var e=t.dataSync(),r=new Float32Array(e.length),n=0;n<e.length;++n){var o=e[n];r[n]=o*o}return f.NDArray.make(t.shape,{values:r})},t.prototype.relu=function(t){for(var e=d.zeros(t.shape,t.dtype),r=e.dataSync(),n=t.dataSync(),o=0;o<n.length;++o){var a=n[o];c.isValNaN(a,t.dtype)?r[o]=c.getNaN(e.dtype):r[o]=Math.max(0,n[o])}return e},t.prototype.elu=function(t){for(var e=new Float32Array(t.size),r=t.dataSync(),n=0;n<r.length;++n){var o=r[n];e[n]=o>=0?o:Math.exp(o)-1}return f.NDArray.make(t.shape,{values:e})},t.prototype.eluDer=function(t){for(var e=new Float32Array(t.size),r=t.dataSync(),n=0;n<r.length;++n){var o=r[n];e[n]=o>=0?1:Math.exp(o)}return f.NDArray.make(t.shape,{values:e})},t.prototype.selu=function(t){for(var e=new Float32Array(t.size),r=t.dataSync(),n=0;n<r.length;++n){var o=r[n];e[n]=o>=0?1.0507009873554805*o:1.7580993408473768*(Math.exp(o)-1)}return f.NDArray.make(t.shape,{values:e})},t.prototype.leakyRelu=function(t,e){for(var r=new Float32Array(t.size),n=t.dataSync(),o=0;o<n.length;o++){var a=n[o];r[o]=a>=0?a:e*a}return f.NDArray.make(t.shape,{values:r})},t.prototype.prelu=function(t,e){for(var r=new Float32Array(t.size),n=t.dataSync(),o=e.dataSync(),a=0;a<n.length;a++){var i=n[a];r[a]=i>=0?i:o[a]*i}return f.NDArray.make(t.shape,{values:r})},t.prototype.preluDer=function(t,e){for(var r=new Float32Array(t.size),n=t.dataSync(),o=e.dataSync(),a=0;a<n.length;a++){var i=n[a];r[a]=i>0?1:i<0?o[a]:i}return f.NDArray.make(t.shape,{values:r})},t.prototype.clip=function(t,e,r){for(var n=new Float32Array(t.size),o=t.dataSync(),a=0;a<o.length;++a)n[a]=Math.min(r,Math.max(e,o[a]));return f.NDArray.make(t.shape,{values:n})},t.prototype.abs=function(t){for(var e=new Float32Array(t.size),r=t.dataSync(),n=0;n<r.length;++n)e[n]=Math.abs(r[n]);return f.NDArray.make(t.shape,{values:e})},t.prototype.int=function(t){for(var e=new Int32Array(t.size),r=t.dataSync(),n=0;n<r.length;++n)e[n]=r[n];return f.NDArray.make(t.shape,{values:e},"int32")},t.prototype.sigmoid=function(t){for(var e=new Float32Array(t.size),r=t.dataSync(),n=0;n<r.length;++n)e[n]=1/(1+Math.exp(-r[n]));return f.NDArray.make(t.shape,{values:e})},t.prototype.sin=function(t){for(var e=new Float32Array(t.size),r=t.dataSync(),n=0;n<r.length;++n)e[n]=Math.sin(r[n]);return f.NDArray.make(t.shape,{values:e})},t.prototype.cos=function(t){for(var e=new Float32Array(t.size),r=t.dataSync(),n=0;n<r.length;++n)e[n]=Math.cos(r[n]);return f.NDArray.make(t.shape,{values:e})},t.prototype.tan=function(t){for(var e=new Float32Array(t.size),r=t.dataSync(),n=0;n<r.length;++n)e[n]=Math.tan(r[n]);return f.NDArray.make(t.shape,{values:e})},t.prototype.asin=function(t){for(var e=new Float32Array(t.size),r=t.dataSync(),n=0;n<r.length;++n)e[n]=Math.asin(r[n]);return f.NDArray.make(t.shape,{values:e})},t.prototype.acos=function(t){for(var e=new Float32Array(t.size),r=t.dataSync(),n=0;n<r.length;++n)e[n]=Math.acos(r[n]);return f.NDArray.make(t.shape,{values:e})},t.prototype.atan=function(t){for(var e=new Float32Array(t.size),r=t.dataSync(),n=0;n<r.length;++n)e[n]=Math.atan(r[n]);return f.NDArray.make(t.shape,{values:e})},t.prototype.sinh=function(t){for(var e=new Float32Array(t.size),r=t.dataSync(),n=0;n<r.length;++n)e[n]=Math.sinh(r[n]);return f.NDArray.make(t.shape,{values:e})},t.prototype.cosh=function(t){for(var e=new Float32Array(t.size),r=t.dataSync(),n=0;n<r.length;++n)e[n]=Math.cosh(r[n]);return f.NDArray.make(t.shape,{values:e})},t.prototype.tanh=function(t){for(var e=new Float32Array(t.size),r=t.dataSync(),n=0;n<r.length;++n)e[n]=c.tanh(r[n]);return f.NDArray.make(t.shape,{values:e})},t.prototype.step=function(t,e){void 0===e&&(e=0);for(var r=new Float32Array(t.size),n=t.dataSync(),o=0;o<n.length;++o){var a=n[o];c.isValNaN(a,t.dtype)?r[o]=c.getNaN(t.dtype):r[o]=a>0?1:e}return f.NDArray.make(t.shape,{values:r})},t.prototype.conv2d=function(t,e,r,n){for(var o=n.filterHeight,a=n.filterWidth,i=n.padInfo.left,s=n.padInfo.top,u=d.zeros(n.outShape),c=0;c<n.batchSize;++c)for(var l=0;l<n.outChannels;++l)for(var p=0;p<n.outHeight;++p)for(var h=p*n.strideHeight-i,f=Math.max(0,h),m=Math.min(n.inHeight,o+h),g=0;g<n.outWidth;++g){for(var v=g*n.strideWidth-s,y=Math.max(0,v),_=Math.min(n.inWidth,a+v),b=0,x=f;x<m;++x)for(var w=x-h,E=y;E<_;++E)for(var k=E-v,S=0;S<n.inChannels;++S){b+=t.get(c,x,E,S)*e.get(w,k,S,l)}var A=null!=r?r.get(l):0;u.set(b+A,c,p,g,l)}return u},t.prototype.conv2dDerInput=function(t,e,r){for(var n=r.filterHeight,o=r.filterWidth,a=n-1-r.padInfo.top,i=o-1-r.padInfo.left,s=r.strideHeight,u=r.strideWidth,c=d.zeros(r.inShape),l=0;l<r.batchSize;++l)for(var p=0;p<r.inChannels;++p)for(var h=0;h<r.inHeight;++h)for(var f=h-i,m=Math.max(0,Math.ceil(f/s)),g=Math.min(r.outHeight,(n+f)/s),v=0;v<r.inWidth;++v){for(var y=v-a,_=Math.max(0,Math.ceil(y/u)),b=Math.min(r.outWidth,(o+y)/u),x=0,w=m;w<g;++w)for(var E=w*s-f,k=_;k<b;++k)for(var S=k*u-y,A=0;A<r.outChannels;++A){x+=t.get(l,w,k,A)*e.get(n-1-E,o-1-S,p,A)}c.set(x,l,h,v,p)}return c},t.prototype.conv2dDerFilter=function(t,e,r){for(var n=r.strideHeight,o=r.strideWidth,a=r.filterHeight,i=r.filterWidth,s=d.zeros(r.filterShape),u=r.padInfo.left,c=r.padInfo.top,l=0;l<a;++l)for(var p=Math.max(0,Math.ceil((c-l)/n)),h=Math.min(r.outHeight,(r.inHeight+c-l)/n),f=0;f<i;++f)for(var m=Math.max(0,Math.ceil((u-f)/o)),g=Math.min(r.outWidth,(r.inWidth+u-f)/o),v=0;v<r.inChannels;++v)for(var y=0;y<r.outChannels;++y){for(var _=0,b=0;b<r.batchSize;++b)for(var x=p;x<h;++x)for(var w=l+x*n-c,E=m;E<g;++E){var k=f+E*o-u;_+=t.get(b,w,k,v)*e.get(b,x,E,y)}s.set(_,l,f,v,y)}return s},t.prototype.conv2dDerBias=function(t){for(var e=t.shape,r=e[0],n=e[1],o=e[2],a=e[3],i=new Float32Array(a),s=0;s<a;++s){for(var u=0,c=0;c<r;++c)for(var l=0;l<n;++l)for(var p=0;p<o;++p)u+=t.get(c,l,p,s);i[s]=u}return f.Array1D.new(i)},t.prototype.depthwiseConv2D=function(t,e,r){for(var n=r.filterHeight,o=r.filterWidth,a=r.padInfo.left,i=r.padInfo.top,s=r.outChannels/r.inChannels,u=d.zeros(r.outShape),c=0;c<r.batchSize;++c)for(var l=0;l<r.inChannels;++l)for(var p=0;p<r.outHeight;++p)for(var h=p*r.strideHeight-a,f=Math.max(0,h),m=Math.min(r.inHeight,n+h),g=0;g<r.outWidth;++g)for(var v=g*r.strideWidth-i,y=Math.max(0,v),_=Math.min(r.inWidth,o+v),b=0;b<s;++b){for(var x=0,w=f;w<m;++w)for(var E=w-h,k=y;k<_;++k){var S=k-v;x+=t.get(c,w,k,l)*e.get(E,S,l,b)}u.set(x,c,p,g,l*s+b)}return u},t.prototype.tile=function(t,e){for(var r=new Array(t.rank),n=0;n<r.length;n++)r[n]=t.shape[n]*e[n];var o=d.zeros(r,t.dtype),a=o.dataSync(),i=t.dataSync();for(n=0;n<o.size;++n){for(var s=o.indexToLoc(n),u=new Array(t.rank),c=0;c<u.length;c++)u[c]=s[c]%t.shape[c];var l=t.locToIndex(u);a[n]=i[l]}return o},t.prototype.pad1D=function(t,e,r){for(var n=e[0],o=e[1],a=t.dataSync(),i=d.zeros([n+a.length+o],t.dtype),s=i.dataSync(),u=0,c=0;c<s.length;c++)c>=n&&c<n+a.length?s[c]=a[u++]:s[c]=r;return i},t.prototype.pad2D=function(t,e,r){for(var n=e[0][0],o=e[0][1],a=e[1][0],i=e[1][1],s=[n+t.shape[0]+o,a+t.shape[1]+i],u=d.zeros(s,t.dtype),c=u.dataSync(),l=t.dataSync(),p=0,h=0;h<s[0];h++){var f=-1,m=-1;h>=n&&h<s[0]-o&&(m=(f=h*s[1]+a)+t.shape[1]-1);for(var g=0;g<s[1];g++){var v=h*s[1]+g;c[v]=v>=f&&v<=m?l[p++]:r}}return u},t.prototype.transpose=function(t,e){for(var r=new Array(t.rank),n=0;n<r.length;n++)r[n]=t.shape[e[n]];var o=new Float32Array(t.size),a=t.dataSync(),i=f.NDArray.make(r,{values:o});for(n=0;n<t.size;++n){for(var s=t.indexToLoc(n),u=new Array(s.length),c=0;c<u.length;c++)u[c]=s[e[c]];o[i.locToIndex(u)]=a[n]}return i},t.prototype.gather=function(t,e,r){var n=t.shape.slice(),o=e.dataSync();n[r]=o.length;for(var a=d.zeros(n,t.dtype),i=t.dataSync(),s=a.dataSync(),u=0;u<a.size;++u){var c=a.indexToLoc(u),l=c.slice();l[r]=o[c[r]];var p=t.locToIndex(l);s[u]=i[p]}return a},t.prototype.pool=function(t,e,r){for(var n=e.strideHeight,o=e.strideWidth,a=e.filterHeight,i=e.filterWidth,s=d.zeros(e.outShape),u=e.padInfo.top,c=e.padInfo.left,l=0;l<e.batchSize;++l)for(var p=0;p<e.inChannels;++p)for(var h=0;h<e.outHeight;++h)for(var f=h*n-u,m=Math.max(0,f),g=Math.min(e.inHeight,a+f),v=0;v<e.outWidth;++v){for(var y=v*o-c,_=Math.max(0,y),b=Math.min(e.inWidth,i+y),x="max"===r?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,w=0,E=m;E<g;++E){for(var k=_;k<b;++k){var S=t.get(l,E,k,p);if(isNaN(S)){x=NaN,w=NaN;break}"max"===r&&S>x||"min"===r&&S<x?x=S:"avg"===r&&(w+=S/(a*i))}if(isNaN(x))break}s.set("avg"===r?w:x,l,h,v,p)}return s},t.prototype.maxPool=function(t,e){return this.pool(t,e,"max")},t.prototype.maxPoolPositions=function(t,e){for(var r=d.zeros(e.outShape),n=e.strideHeight,o=e.strideWidth,a=e.filterHeight,i=e.filterWidth,s=e.padInfo.top,u=e.padInfo.left,c=0;c<e.batchSize;++c)for(var l=0;l<e.inChannels;++l)for(var p=0;p<e.outHeight;++p)for(var h=p*n-s,f=Math.max(0,h),m=Math.min(e.inHeight,a+h),g=0;g<e.outWidth;++g){for(var v=g*o-u,y=Math.max(0,v),_=Math.min(e.inWidth,i+v),b=Number.NEGATIVE_INFINITY,x=-1,w=f;w<m;++w)for(var E=w-h,k=y;k<_;++k){var S=k-v,A=t.get(c,w,k,l);A>b&&(b=A,x=E*i+S)}r.set(x,c,p,g,l)}return r},t.prototype.maxPoolBackprop=function(t,e,r){for(var n=this.maxPoolPositions(e,r),o=r.strideHeight,a=r.strideWidth,i=r.filterHeight,s=r.filterWidth,u=s-1-r.padInfo.left,c=i-1-r.padInfo.top,l=d.zeros(e.shape),p=0;p<r.batchSize;++p)for(var h=0;h<r.inChannels;++h)for(var f=0;f<r.inHeight;++f)for(var m=0;m<r.inWidth;++m){for(var g=f-c,v=m-u,y=0,_=0;_<i;++_){var b=(g+_)/o;if(!(b<0||b>=r.outHeight||Math.floor(b)!==b))for(var x=0;x<s;++x){var w=(v+x)/a;if(!(w<0||w>=r.outWidth||Math.floor(w)!==w)){var E=i*s-1-n.get(p,b,w,h)===_*s+x?1:0;if(0!==E)y+=t.get(p,b,w,h)*E}}}l.set(y,p,f,m,h)}return l.asType(e.dtype)},t.prototype.avgPoolBackprop=function(t,e,r){for(var n=r.strideHeight,o=r.strideWidth,a=r.filterHeight,i=r.filterWidth,s=i-1-r.padInfo.left,u=a-1-r.padInfo.top,c=d.zeros(e.shape),l=1/(a*i),p=0;p<r.batchSize;++p)for(var h=0;h<r.inChannels;++h)for(var f=0;f<r.inHeight;++f)for(var m=0;m<r.inWidth;++m){for(var g=f-u,v=m-s,y=0,_=0;_<a;++_){var b=(g+_)/n;if(!(b<0||b>=r.outHeight||Math.floor(b)!==b))for(var x=0;x<i;++x){var w=(v+x)/o;if(!(w<0||w>=r.outWidth||Math.floor(w)!==w))y+=t.get(p,b,w,h)}}c.set(y*l,p,f,m,h)}return c.asType(e.dtype)},t.prototype.minPool=function(t,e){return this.pool(t,e,"min")},t.prototype.avgPool=function(t,e){return this.pool(t,e,"avg").toFloat()},t.prototype.resizeBilinear=function(t,e,r,n){for(var o=t.shape,a=o[0],i=o[1],s=o[2],u=o[3],c=d.zeros([a,e,r,u]),l=n?[i-1,s-1]:[i,s],p=n?[e-1,r-1]:[e,r],h=0;h<a;h++)for(var f=0;f<e;f++)for(var m=0;m<r;m++)for(var g=0;g<u;g++){var v=l[0]*f/p[0],y=l[1]*m/p[1],_=Math.floor(v),b=Math.min(i-1,Math.ceil(v)),x=Math.floor(y),w=Math.min(s-1,Math.ceil(y)),E=t.get(h,_,x,g),k=t.get(h,b,x,g),S=y-x,A=E+(t.get(h,_,w,g)-E)*S,O=A+(k+(t.get(h,b,w,g)-k)*S-A)*(v-_);c.set(O,h,f,m,g)}return c},t.prototype.batchNormalization2D=function(t,e,r,n,o,a){for(var i=t.dataSync(),s=e.dataSync(),u=r.dataSync(),c=o?o.dataSync():[1],l=a?a.dataSync():[0],p=new Float32Array(i.length),h=0;h<i.length;h++)p[h]=l[h%l.length]+(i[h]-s[h%s.length])*c[h%c.length]/Math.sqrt(u[h%u.length]+n);return f.Array2D.new(t.shape,p)},t.prototype.batchNormalization3D=function(t,e,r,n,o,a){for(var i=t.dataSync(),s=e.dataSync(),u=r.dataSync(),c=o?o.dataSync():[1],l=a?a.dataSync():[0],p=new Float32Array(i.length),h=0;h<i.length;h++)p[h]=l[h%l.length]+(i[h]-s[h%s.length])*c[h%c.length]/Math.sqrt(u[h%u.length]+n);return f.Array3D.new(t.shape,p)},t.prototype.batchNormalization4D=function(t,e,r,n,o,a){for(var i=t.dataSync(),s=e.dataSync(),u=r.dataSync(),c=o?o.dataSync():new Float32Array([1]),l=a?a.dataSync():new Float32Array([0]),p=new Float32Array(i.length),h=0;h<i.length;h++)p[h]=l[h%l.length]+(i[h]-s[h%s.length])*c[h%c.length]/Math.sqrt(u[h%u.length]+n);return f.Array4D.new(t.shape,p)},t.prototype.localResponseNormalization4D=function(t,e,r,n,o,a){for(var i=d.zeros(t.shape),s=e,u=i.shape[1]-1,c=i.shape[2]-1,l=i.shape[3]-1,p=function(e,r,n,o){for(var a=0,i=Math.max(0,o-s);i<=Math.min(o+s,l);i++){var u=t.get(e,r,n,i);a+=u*u}return a},h=function(e,r,n,o){for(var a=0,i=Math.max(0,r-s);i<=Math.min(r+s,u);i++)for(var l=Math.max(0,n-s);l<=Math.min(n+s,c);l++)a+=Math.pow(t.get(e,i,l,o),2);return a},f=0;f<i.shape[0];f++)for(var m=0;m<=i.shape[1];m++)for(var g=0;g<i.shape[2];g++)for(var v=0;v<i.shape[3];v++){var y="withinChannel"===a?h(f,m,g,v):p(f,m,g,v),_=t.get(f,m,g,v)*Math.pow(r+n*y,-o);i.set(_,f,m,g,v)}return i},t.prototype.multinomial=function(t,e,r){for(var n=t.shape[0],o=t.shape[1],a=d.zeros([n,e],"int32"),i=a.dataSync(),u=t.dataSync(),c=0;c<n;++c){var l=c*o,p=new Float32Array(o-1);p[0]=u[l];for(var h=1;h<p.length;++h)p[h]=p[h-1]+u[l+h];for(var f=s.alea(r.toString()),m=c*e,g=0;g<e;++g){var v=f();i[m+g]=p.length;for(var y=0;y<p.length;y++)if(v<p[y]){i[m+g]=y;break}}}return a},t.prototype.oneHot=function(t,e,r,n){var o=new Float32Array(t.size*e);o.fill(n);for(var a=0;a<t.size;++a)o[a*e+t.get(a)]=r;return f.Array2D.new([t.size,e],o)},t.prototype.broadcastedBinaryOp=function(t,e,r,n){for(var o=l.assertAndGetBroadcastShape(t.shape,e.shape),a=d.zeros(o,r),i=a.dataSync(),s=t.dataSync(),u=e.dataSync(),c=l.getBroadcastDims(t.shape,o),p=l.getBroadcastDims(e.shape,o),h=function(r){var o=a.indexToLoc(r),l=o.slice(-t.rank);c.forEach(function(t){return l[t]=0});var h=t.locToIndex(l),f=o.slice(-e.rank);p.forEach(function(t){return f[t]=0});var d=e.locToIndex(f);i[r]=n(s[h],u[d])},f=0;f<i.length;++f)h(f);return a},t.prototype.dispose=function(){},t}();r.MathBackendCPU=y,u.ENV.registerBackend("cpu",function(){return new y});var _=function(t){function e(e){void 0===e&&(e=!1);var r;return console.warn("new NDArrayMathCPU() is deprecated. Please use the global dl.ENV.math. In rare cases, to construct your own NDArrayMath that runs on CPU, use math = new NDArrayMath('cpu', safeMode); and make sure to set it as global: dl.ENV.setMath(math);"),r=t.call(this,"cpu",e)||this,u.ENV.setMath(r),r}return o(e,t),e}(h.NDArrayMath);r.NDArrayMathCPU=_},{"../../environment":336,"../../util":448,"../broadcast_util":418,"../concat_util":421,"../math":429,"../ndarray":431,"../ops":433,"../types":445,"./../axis_util":374,"./types/matmul":381,seedrandom:451}],376:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../../environment"),o=t("../../util"),a=t("../ndarray"),i=t("./kernel_registry"),s=t("./profiler"),u=t("./tape_util"),c=function(){function t(t,e){this.backend=t,this.safeMode=e,this.nextTapeNodeId=0,this.gradientScopeCount=0,this.customGradientDepth=0,this.activeScope={keep:[],track:[]},this.scopeStack=[this.activeScope],this.profiler=new s.Profiler(t)}return t.prototype.executeKernel=function(t,e,r){var o,a=this;if(o=n.ENV.get("DEBUG")?this.profiler.profileKernel(t,function(){return i.executeKernel(a.backend,t,e)}):i.executeKernel(this.backend,t,e),null!=this.activeTape&&0===this.customGradientDepth){e=u.stripUndefinedInputsFromInputConfig(e);var s={id:this.nextTapeNodeId++,type:"kernel",name:"kernel: "+t,kernel:t,inputAndArgs:e,output:o,gradient:r};this.activeTape.push(s)}return o},t.prototype.customGradient=function(t,e,r){var n;this.customGradientDepth++;var o=this.scope("customGradient",function(){var e=t(),r=e.value,o=e.gradients;return n=o,r},!0);if(this.customGradientDepth--,null!=this.activeTape&&0===this.customGradientDepth){var a={id:this.nextTapeNodeId++,type:"customGradient",name:r,inputAndArgs:{inputs:e},output:o,gradient:n};this.activeTape.push(a)}return o},t.prototype.gradients=function(t,e,r){var n=this,o=this.scope("gradients",function(){var o=t();if(0!==o.rank)throw new Error("Cannot compute gradient of non-scalar y output of f(). Got y with rank "+o.rank+" and shape "+o.shape+".");var a=n.gradientWrt(o,e);return r?[o].concat(a):a},!0);return r?{value:o[0],gradients:o.slice(1)}:o},t.prototype.vjp=function(t,e,r){var n=this;return this.scope("vjp",function(){var a=t();if(!o.arraysEqual(a.shape,r.shape))throw new Error("Cannot compute vector jacobian product, y shape ("+a.shape+") does not match dy shape ("+r.shape+").");return n.gradientWrt(a,e,r)},!0)},t.prototype.variableGradientsAndValue=function(t,e){for(var r,n=this,o=this.scope("gradients",function(){var o=t();if(0!==o.rank)throw new Error("Cannot compute gradient of non-scalar y output of f(). Got y with rank "+o.rank+" and shape "+o.shape+".");var a=u.computeVariableInputs(n.activeTape,e);r=a.map(function(t){return t.name});var i=0===a.length?[]:n.gradientWrt(o,a);return[o].concat(i)},!0),a={},i=0;i<r.length;i++)a[r[i]]=o[i+1];return{value:o[0],gradients:a}},t.prototype.gradientWrt=function(t,e,r){var n=u.getFilteredNodesXToY(this.activeTape,e,t);if(0===n.length)throw new Error("Cannot compute gradient: y is not a function of xs.Make sure the xs you are computing gradients with respect to are used inside the gradient function.");var o={};o[t.id]=null==r?a.Scalar.new(1,"float32"):r,u.backpropagateGradients(o,n);var i=e.map(function(t){return o[t.id]});return i.forEach(function(t,e){if(null==t)throw new Error("Gradient error: y was not a function of xs["+e+"]")}),i},t.prototype.scope=function(t,e,r){var n=this;this.startScope(r);var o=e(function(t){return n.keep(t)},function(t){return t});return o instanceof Promise?(o.then(function(t){return n.endScope(t,r)}),o):(this.endScope(o,r),o)},t.prototype.startScope=function(t){t&&0===this.gradientScopeCount&&(this.activeTape=[]),t&&this.gradientScopeCount++;var e={keep:[],track:[]};this.scopeStack.push(e),this.activeScope=e},t.prototype.endScope=function(t,e){var r=this;e&&(this.gradientScopeCount--,0===this.gradientScopeCount&&(this.activeTape=null));var n=this.activeScope.keep,a=u.extractNDArraysFromScopeResult(t);n=n.concat(a);for(var i=0;i<this.activeScope.track.length;i++){var s=this.activeScope.track[i];o.isNDArrayInList(s,n)||(null!=this.activeTape?a.push(s):s.dispose())}this.scopeStack.pop(),this.activeScope=0===this.scopeStack.length?null:this.scopeStack[this.scopeStack.length-1],a.forEach(function(t){o.isNDArrayInList(t,r.activeScope.keep)||r.track(t)})},t.prototype.keep=function(t){if(1===this.scopeStack.length&&this.safeMode)throw new Error("You are using math in safe mode. Enclose all math.method() calls inside a scope: math.scope(() => {math.method();...}) to avoid memory leaks.");return this.activeScope.keep.push(t),t},t.prototype.track=function(t){if(1===this.scopeStack.length&&this.safeMode)throw new Error("You are using math in safe mode. Enclose all math.method() calls inside a scope: math.scope(() => {math.method();...}) to avoid memory leaks.");return this.activeScope.track.push(t),t},t.prototype.getBackend=function(){return this.backend},t}();r.BackendEngine=c},{"../../environment":336,"../../util":448,"../ndarray":431,"./kernel_registry":378,"./profiler":379,"./tape_util":380}],377:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,a){function i(t){try{u(n.next(t))}catch(t){a(t)}}function s(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(i,s)}u((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=n[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(r,"__esModule",{value:!0});var s=t("../../environment"),u=t("../../util"),c=t("../axis_util"),l=t("../math"),p=t("../ndarray"),h=t("../reduce_util"),f=t("../types"),d=t("./webgl/argminmax_gpu"),m=t("./webgl/avg_pool_backprop_gpu"),g=t("./webgl/batchnorm_gpu"),v=t("./webgl/binaryop_gpu"),y=t("./webgl/binaryop_gpu"),_=t("./webgl/clip_gpu"),b=t("./webgl/concat_gpu"),x=t("./webgl/conv_backprop_gpu"),w=t("./webgl/conv_gpu"),E=t("./webgl/conv_gpu_depthwise"),k=t("./webgl/from_pixels_gpu"),S=t("./webgl/gather_gpu"),A=t("./webgl/gpgpu_context"),O=t("./webgl/gpgpu_math"),T=t("./webgl/logical_gpu"),N=t("./webgl/lrn_gpu"),D=t("./webgl/max_pool_backprop_gpu"),M=t("./webgl/mulmat_gpu"),R=t("./webgl/multinomial_gpu"),P=t("./webgl/onehot_gpu"),C=t("./webgl/pad_gpu"),I=t("./webgl/pool_gpu"),j=t("./webgl/reduce_gpu"),z=t("./webgl/resize_bilinear_gpu"),F=t("./webgl/reverse_gpu"),L=t("./webgl/slice_gpu"),B=t("./webgl/tex_util"),V=t("./webgl/texture_manager"),U=t("./webgl/tile_gpu"),G=t("./webgl/transpose_gpu"),q=t("./webgl/unaryop_gpu"),W=t("./webgl/unaryop_gpu"),X=t("./webgl/webgl_util"),K=function(){function t(t,e){if(void 0===e&&(e=!0),this.gpgpu=t,this.delayedStorage=e,this.texData={},this.binaryCache={},this.disposed=!1,s.ENV.get("WEBGL_VERSION")<1)throw new Error("WebGL is not supported on this device");null==t?(this.gpgpu=new A.GPGPUContext,this.gpgpuCreatedLocally=!0):this.gpgpuCreatedLocally=!1,"undefined"!=typeof document&&(this.canvas=document.createElement("canvas")),this.textureManager=new V.TextureManager(this.gpgpu)}return t.prototype.register=function(t,e,r){if(t in this.texData)throw new Error("data id "+t+" already registered");this.texData[t]={shape:e,dtype:r,values:null,texture:null,texShape:null,texType:B.TextureType.FLOAT}},t.prototype.fromPixels=function(t,e){if(null==t)throw new Error("MathBackendWebGL.writePixels(): pixels can not be null");var r=[t.height,t.width],n=[t.height,t.width,e];if(t instanceof HTMLVideoElement){if(null==this.canvas)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.canvas.width=t.width,this.canvas.height=t.height,this.canvas.getContext("2d").drawImage(t,0,0,t.width,t.height),t=this.canvas}var o=p.NDArray.make(r,{},"int32");this.texData[o.dataId].texType=B.TextureType.UNSIGNED_BYTE,this.gpgpu.uploadPixelDataToTexture(this.getTexture(o.dataId),t);var a=new k.FromPixelsProgram(n),i=this.compileAndRun(a,[o]);return o.dispose(),i},t.prototype.write=function(t,e){if(null==e)throw new Error("MathBackendWebGL.write(): values can not be null");this.throwIfNoData(t);var r=this.texData[t],n=r.texture,o=r.texShape,a=r.texType;null!=n&&(this.textureManager.releaseTexture(n,o,a),this.texData[t].texture=null,this.texData[t].texShape=null),this.texData[t].values=e,this.delayedStorage||this.uploadToGPU(t)},t.prototype.readSync=function(t){this.throwIfNoData(t);var e=this.texData[t],r=e.texture,n=e.values,o=e.texShape;if(null!=n)return this.cacheOnCPU(t),n;var a=this.gpgpu.downloadMatrixFromTexture(r,o[0],o[1]);return this.cacheOnCPU(t,a),this.texData[t].values},t.prototype.read=function(t){return a(this,void 0,void 0,function(){var e,r,n,o,a;return i(this,function(i){switch(i.label){case 0:return this.throwIfNoData(t),e=this.texData[t],r=e.texture,n=e.values,o=e.texShape,null!=n?(this.cacheOnCPU(t),[2,n]):s.ENV.get("WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED")?[4,this.gpgpu.downloadMatrixFromTextureAsync(r,o[0],o[1])]:[3,2];case 1:return a=i.sent(),this.cacheOnCPU(t,a),[2,this.texData[t].values];case 2:return 0===s.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?[2,this.readSync(t)]:[4,this.gpgpu.runQuery(function(){})];case 3:return i.sent(),[2,this.readSync(t)]}})})},t.prototype.time=function(t){var e=this.activeTimers,r=[],n=!1;null==this.programTimersStack?(this.programTimersStack=r,n=!0):this.activeTimers.push(r),this.activeTimers=r,t();var o=u.flatten(this.activeTimers);return this.activeTimers=e,n&&(this.programTimersStack=null),new Promise(function(t,e){Promise.all(o).then(function(e){var r=0;e.forEach(function(t){return r+=t}),t(r)})})},t.prototype.startTimer=function(){return s.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:performance.now(),endMs:null}},t.prototype.endTimer=function(t){return s.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),t):(t.endMs=performance.now(),t)},t.prototype.getQueryTime=function(t){return a(this,void 0,void 0,function(){var e;return i(this,function(r){return s.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.pollQueryTime(t)]:[2,(e=t).endMs-e.startMs]})})},t.prototype.disposeData=function(t){if(t in this.texData){var e=this.texData[t],r=e.texture,n=e.texShape,o=e.texType;null!=r&&this.textureManager.releaseTexture(r,n,o),delete this.texData[t]}},t.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData[t].texture},t.prototype.getTextureData=function(t){return this.uploadToGPU(t),this.texData[t]},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.slice1D=function(t,e,r){var n=new L.SliceProgram([r]),o=n.getCustomSetupFunc([e]);return this.compileAndRun(n,[t],null,o)},t.prototype.slice2D=function(t,e,r){var n=new L.SliceProgram(r),o=n.getCustomSetupFunc(e);return this.compileAndRun(n,[t],null,o)},t.prototype.slice3D=function(t,e,r){var n=new L.SliceProgram(r),o=n.getCustomSetupFunc(e);return this.compileAndRun(n,[t],null,o)},t.prototype.slice4D=function(t,e,r){var n=new L.SliceProgram(r),o=n.getCustomSetupFunc(e);return this.compileAndRun(n,[t],null,o)},t.prototype.reverse4D=function(t,e){var r=new F.ReverseProgram(t.shape,e);return this.compileAndRun(r,[t])},t.prototype.concat=function(t,e){var r=new b.ConcatProgram(t.shape,e.shape);return this.compileAndRun(r,[t,e])},t.prototype.neg=function(t){var e=new W.UnaryOpProgram(t.shape,q.NEG);return this.compileAndRun(e,[t])},t.prototype.matMul=function(t,e,r,n){var o=new M.MatMulProgram(t.shape,e.shape,r,n);return this.compileAndRun(o,[t,e])},t.prototype.multiply=function(t,e){var r=new y.BinaryOpProgram(v.MUL,t.shape,e.shape),n=this.makeOutputArray(r.outputShape,f.upcastType(t.dtype,e.dtype));return this.compileAndRun(r,[t,e],n)},t.prototype.batchNormalization2D=function(t,e,r,n,o,a){var i=[t,e,r],s=null;null!=a&&(s=a.shape,i.push(a));var u=null;null!=o&&(u=o.shape,i.push(o));var c=new g.BatchNormProgram(t.shape,e.shape,r.shape,s,u,n);return this.compileAndRun(c,i)},t.prototype.batchNormalization3D=function(t,e,r,n,o,a){var i=[t,e,r],s=null;null!=a&&(s=a.shape,i.push(a));var u=null;null!=o&&(u=o.shape,i.push(o));var c=new g.BatchNormProgram(t.shape,e.shape,r.shape,s,u,n);return this.compileAndRun(c,i)},t.prototype.batchNormalization4D=function(t,e,r,n,o,a){var i=[t,e,r],s=null;null!=a&&(s=a.shape,i.push(a));var u=null;null!=o&&(u=o.shape,i.push(o));var c=new g.BatchNormProgram(t.shape,e.shape,r.shape,s,u,n);return this.compileAndRun(c,i)},t.prototype.localResponseNormalization4D=function(t,e,r,n,o,a){var i=new N.LRNProgram(t.shape,e,r,n,o,a);return this.compileAndRun(i,[t])},t.prototype.tile=function(t,e){var r=new U.TileProgram(t.shape,e);return this.compileAndRun(r,[t])},t.prototype.pad1D=function(t,e,r){var n=new C.Pad1DProgram(t.shape,e,r);return this.compileAndRun(n,[t])},t.prototype.pad2D=function(t,e,r){var n=new C.Pad2DProgram(t.shape,e,r);return this.compileAndRun(n,[t])},t.prototype.transpose=function(t,e){var r=new G.TransposeProgram(t.shape,e);return this.compileAndRun(r,[t])},t.prototype.gather=function(t,e,r){var n=new S.GatherProgram(t.shape,e.size,r);return this.compileAndRun(n,[t,e])},t.prototype.reduce=function(t,e,r){var n=t.shape[0],o=t.shape[1],a={windowSize:h.computeOptimalWindowSize(o),inSize:o,batchSize:n},i=new j.ReduceProgram(a,e),s=i.outputShape,u=s[0],c=s[1],l=this.makeOutputArray([u,c],r);return this.compileAndRun(i,[t],l),1===l.shape[1]?l:this.reduce(l,e,r)},t.prototype.argReduce=function(t,e,r){void 0===r&&(r=null);var n=t.shape[0],o=t.shape[1];null!=r&&(n=r.shape[0],o=r.shape[1]);var a={windowSize:h.computeOptimalWindowSize(o),inSize:o,batchSize:n},i=new d.ArgMinMaxProgram(a,e,null==r),s=i.outputShape,u=s[0],c=s[1],l=this.makeOutputArray([u,c],"int32"),p=[t];return null!=r&&p.push(r),this.compileAndRun(i,p,l),1===l.shape[1]?l:this.argReduce(t,e,l)},t.prototype.sum=function(t,e){c.assertAxesAreInnerMostDims("sum",e,t.rank);var r=c.computeOutAndReduceShapes(t.shape,e),n=r[0],o=r[1],a=u.sizeFromShape(o),i=t.as2D(-1,a),s=f.sumOutType(t.dtype);return this.reduce(i,"sum",s).reshape(n)},t.prototype.argMin=function(t,e){c.assertAxesAreInnerMostDims("argMin",e,t.rank);var r=c.computeOutAndReduceShapes(t.shape,e),n=r[0],o=r[1],a=u.sizeFromShape(o),i=t.as2D(-1,a);return this.argReduce(i,"min").reshape(n)},t.prototype.argMax=function(t,e){c.assertAxesAreInnerMostDims("argMax",e,t.rank);var r=c.computeOutAndReduceShapes(t.shape,e),n=r[0],o=r[1],a=u.sizeFromShape(o),i=t.as2D(-1,a);return this.argReduce(i,"max").reshape(n)},t.prototype.equal=function(t,e){var r=new y.BinaryOpProgram(v.EQUAL,t.shape,e.shape),n=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[t,e],n)},t.prototype.notEqual=function(t,e){var r=new y.BinaryOpProgram(v.NOT_EQUAL,t.shape,e.shape),n=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[t,e],n)},t.prototype.less=function(t,e){var r=new y.BinaryOpProgram(v.LESS,t.shape,e.shape),n=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[t,e],n)},t.prototype.lessEqual=function(t,e){var r=new y.BinaryOpProgram(v.LESS_EQUAL,t.shape,e.shape),n=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[t,e],n)},t.prototype.greater=function(t,e){var r=new y.BinaryOpProgram(v.GREATER,t.shape,e.shape),n=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[t,e],n)},t.prototype.greaterEqual=function(t,e){var r=new y.BinaryOpProgram(v.GREATER_EQUAL,t.shape,e.shape),n=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[t,e],n)},t.prototype.logicalAnd=function(t,e){var r=new y.BinaryOpProgram(v.LOGICAL_AND,t.shape,e.shape),n=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[t,e],n)},t.prototype.logicalOr=function(t,e){var r=new y.BinaryOpProgram(v.LOGICAL_OR,t.shape,e.shape),n=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[t,e],n)},t.prototype.where=function(t,e,r,n){var o=new T.WhereProgram(t.rank,e.shape,e.rank),a=this.makeOutputArray(o.outputShape,n);return this.compileAndRun(o,[t,e,r],a)},t.prototype.topKValues=function(t,e){throw new Error("topKValues GPU not yet implemented!")},t.prototype.topKIndices=function(t,e){throw new Error("topKIndices GPU not yet implemented!")},t.prototype.min=function(t,e){c.assertAxesAreInnerMostDims("min",e,t.rank);var r=c.computeOutAndReduceShapes(t.shape,e),n=r[0],o=r[1],a=u.sizeFromShape(o),i=t.as2D(-1,a);return this.reduce(i,"min",i.dtype).reshape(n)},t.prototype.minimum=function(t,e){var r=new y.BinaryOpProgram(v.MIN,t.shape,e.shape);return this.compileAndRun(r,[t,e])},t.prototype.max=function(t,e){c.assertAxesAreInnerMostDims("max",e,t.rank);var r=c.computeOutAndReduceShapes(t.shape,e),n=r[0],o=r[1],a=u.sizeFromShape(o),i=t.as2D(-1,a);return this.reduce(i,"max",i.dtype).reshape(n)},t.prototype.maximum=function(t,e){var r=new y.BinaryOpProgram(v.MAX,t.shape,e.shape);return this.compileAndRun(r,[t,e])},t.prototype.divide=function(t,e){var r=new y.BinaryOpProgram(v.DIV,t.shape,e.shape),n=this.makeOutputArray(r.outputShape,"float32");return this.compileAndRun(r,[t,e],n)},t.prototype.add=function(t,e){var r=new y.BinaryOpProgram(v.ADD,t.shape,e.shape),n=this.makeOutputArray(r.outputShape,f.upcastType(t.dtype,e.dtype));return this.compileAndRun(r,[t,e],n)},t.prototype.subtract=function(t,e){var r=new y.BinaryOpProgram(v.SUB,t.shape,e.shape),n=this.makeOutputArray(r.outputShape,f.upcastType(t.dtype,e.dtype));return this.compileAndRun(r,[t,e],n)},t.prototype.pow=function(t,e){var r=new y.BinaryOpProgram(v.POW,t.shape,e.shape),n=this.makeOutputArray(r.outputShape,f.upcastType(t.dtype,e.dtype));return this.compileAndRun(r,[t,e],n)},t.prototype.ceil=function(t){var e=new W.UnaryOpProgram(t.shape,q.CEIL);return this.compileAndRun(e,[t])},t.prototype.floor=function(t){var e=new W.UnaryOpProgram(t.shape,q.FLOOR);return this.compileAndRun(e,[t])},t.prototype.exp=function(t){var e=new W.UnaryOpProgram(t.shape,q.EXP);return this.compileAndRun(e,[t])},t.prototype.log=function(t){var e=new W.UnaryOpProgram(t.shape,q.LOG);return this.compileAndRun(e,[t])},t.prototype.sqrt=function(t){var e=new W.UnaryOpProgram(t.shape,q.SQRT);return this.compileAndRun(e,[t])},t.prototype.square=function(t){var e=new W.UnaryOpProgram(t.shape,q.SQUARE);return this.compileAndRun(e,[t])},t.prototype.relu=function(t){var e=new W.UnaryOpProgram(t.shape,q.RELU);return this.compileAndRun(e,[t])},t.prototype.elu=function(t){var e=new W.UnaryOpProgram(t.shape,q.ELU);return this.compileAndRun(e,[t])},t.prototype.eluDer=function(t){var e=new W.UnaryOpProgram(t.shape,q.ELU_DER);return this.compileAndRun(e,[t])},t.prototype.selu=function(t){var e=new W.UnaryOpProgram(t.shape,q.SELU);return this.compileAndRun(e,[t])},t.prototype.leakyRelu=function(t,e){var r=new W.UnaryOpProgram(t.shape,q.LEAKY_RELU(e));return this.compileAndRun(r,[t])},t.prototype.prelu=function(t,e){var r=new y.BinaryOpProgram(v.PRELU,t.shape,e.shape);return this.compileAndRun(r,[t,e])},t.prototype.preluDer=function(t,e){var r=new y.BinaryOpProgram(v.PRELU_DER,t.shape,e.shape);return this.compileAndRun(r,[t,e])},t.prototype.int=function(t){var e=new W.UnaryOpProgram(t.shape,q.TO_INT),r=this.makeOutputArray(e.outputShape,"int32");return this.compileAndRun(e,[t],r)},t.prototype.clip=function(t,e,r){var n=new _.ClipProgram(t.shape,e,r);return this.compileAndRun(n,[t])},t.prototype.abs=function(t){var e=new W.UnaryOpProgram(t.shape,q.ABS);return this.compileAndRun(e,[t])},t.prototype.sigmoid=function(t){var e=new W.UnaryOpProgram(t.shape,q.SIGMOID);return this.compileAndRun(e,[t])},t.prototype.sin=function(t){var e=new W.UnaryOpProgram(t.shape,q.SIN);return this.compileAndRun(e,[t])},t.prototype.cos=function(t){var e=new W.UnaryOpProgram(t.shape,q.COS);return this.compileAndRun(e,[t])},t.prototype.tan=function(t){var e=new W.UnaryOpProgram(t.shape,q.TAN);return this.compileAndRun(e,[t])},t.prototype.asin=function(t){var e=new W.UnaryOpProgram(t.shape,q.ASIN);return this.compileAndRun(e,[t])},t.prototype.acos=function(t){var e=new W.UnaryOpProgram(t.shape,q.ACOS);return this.compileAndRun(e,[t])},t.prototype.atan=function(t){var e=new W.UnaryOpProgram(t.shape,q.ATAN);return this.compileAndRun(e,[t])},t.prototype.sinh=function(t){var e=new W.UnaryOpProgram(t.shape,q.SINH);return this.compileAndRun(e,[t])},t.prototype.cosh=function(t){var e=new W.UnaryOpProgram(t.shape,q.COSH);return this.compileAndRun(e,[t])},t.prototype.tanh=function(t){var e=new W.UnaryOpProgram(t.shape,q.TANH);return this.compileAndRun(e,[t])},t.prototype.step=function(t,e){var r=new W.UnaryOpProgram(t.shape,q.STEP(e));return this.compileAndRun(r,[t])},t.prototype.conv2d=function(t,e,r,n){var o=new w.Conv2DProgram(n,null!=r),a=null!=r?[t,e,r]:[t,e];return this.compileAndRun(o,a)},t.prototype.conv2dDerInput=function(t,e,r){var n=new x.Conv2DDerInputProgram(r);return this.compileAndRun(n,[t,e])},t.prototype.conv2dDerFilter=function(t,e,r){var n=new x.Conv2DDerFilterProgram(r);return this.compileAndRun(n,[t,e])},t.prototype.conv2dDerBias=function(t){var e=new x.Conv2DDerBiasProgram(t.shape);return this.compileAndRun(e,[t])},t.prototype.depthwiseConv2D=function(t,e,r){var n=new E.DepthwiseConv2DProgram(r);return this.compileAndRun(n,[t,e])},t.prototype.maxPool=function(t,e){var r=new I.Pool2DProgram(e,"max",!1),n=this.makeOutputArray(r.outputShape,t.dtype);return this.compileAndRun(r,[t],n)},t.prototype.minPool=function(t,e){var r=new I.Pool2DProgram(e,"min",!1),n=this.makeOutputArray(r.outputShape,t.dtype);return this.compileAndRun(r,[t],n)},t.prototype.avgPool=function(t,e){var r=new I.Pool2DProgram(e,"avg",!1),n=this.makeOutputArray(r.outputShape,"float32");return this.compileAndRun(r,[t],n)},t.prototype.maxPoolBackprop=function(t,e,r){var n=new I.Pool2DProgram(r,"max",!0),o=this.compileAndRun(n,[e]),a=new D.MaxPool2DBackpropProgram(r),i=this.makeOutputArray(a.outputShape,e.dtype),s=this.compileAndRun(a,[t,o],i);return o.dispose(),s},t.prototype.avgPoolBackprop=function(t,e,r){var n=new m.AvgPool2DBackpropProgram(r),o=this.makeOutputArray(n.outputShape,e.dtype);return this.compileAndRun(n,[t],o)},t.prototype.resizeBilinear=function(t,e,r,n){var o=new z.ResizeBilinearProgram(t.shape,e,r,n);return this.compileAndRun(o,[t])},t.prototype.multinomial=function(t,e,r){var n=t.shape[0],o=t.shape[1],a=new R.MultinomialProgram(n,o,e),i=this.makeOutputArray(a.outputShape,"int32"),s=a.getCustomSetupFunc(r);return this.compileAndRun(a,[t],i,s)},t.prototype.oneHot=function(t,e,r,n){var o=new P.OneHotProgram(t.size,e,r,n);return this.compileAndRun(o,[t])},t.prototype.makeOutputArray=function(t,e){return p.NDArray.make(t,{},e)},t.prototype.compileAndRun=function(t,e,r,n){var o=this;null==r&&(r=this.makeOutputArray(t.outputShape,e[0].dtype));var a=e.map(function(t){return o.uploadToGPU(t.dataId),{array:t,texData:o.texData[t.dataId]}});this.uploadToGPU(r.dataId);var i,s={array:r,texData:this.texData[r.dataId]},u=O.makeShaderKey(t,a,s),c=this.getAndSaveBinary(u,function(){return O.compileProgram(o.gpgpu,t,a,s)}),l=null!=this.activeTimers;return l&&(i=this.startTimer()),O.runProgram(c,a,s,n),l&&(i=this.endTimer(i),this.activeTimers.push(this.getQueryTime(i))),r},t.prototype.getAndSaveBinary=function(t,e){return t in this.binaryCache||(this.binaryCache[t]=e()),this.binaryCache[t]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){if(!this.disposed){for(var t in this.binaryCache)this.gpgpu.deleteProgram(this.binaryCache[t].webGLProgram);this.textureManager.dispose(),this.gpgpuCreatedLocally&&this.gpgpu.dispose(),this.disposed=!0}},t.prototype.throwIfNoData=function(t){if(!(t in this.texData))throw new Error("No data found for NDArray with data id "+t+". Use dl.ENV.math instead of constructing your own NDArrayMath. If you need to construct your own math, make sure this array is allocated after the math construction")},t.prototype.uploadToGPU=function(t){this.throwIfNoData(t);var e=this.texData[t],r=e.shape,n=e.values,o=e.texture,a=e.dtype,i=e.texType;if(null==o){var s=X.getTextureShapeFromLogicalShape(this.gpgpu.gl,r);this.texData[t].texShape=s;var c=this.textureManager.acquireTexture(s,i);this.texData[t].texture=c,null!=n&&(this.gpgpu.uploadMatrixToTexture(c,s[0],s[1],function(t,e){{if(t instanceof Float32Array)return t;for(var r=new Float32Array(t.length),n=0;n<r.length;n++){var o=t[n];r[n]=u.isValNaN(o,e)?NaN:o}return r}}(n,a)),this.texData[t].values=null)}},t.prototype.cacheOnCPU=function(t,e){var r=this.delayedStorage,n=this.texData[t],o=n.texture,a=n.texShape,i=n.dtype,s=n.texType;r&&null!=o&&(this.textureManager.releaseTexture(o,a,s),this.texData[t].texture=null,this.texData[t].texShape=null),null!=e&&(this.texData[t].values=function(t,e){{if("float32"===e)return t;if("int32"===e||"bool"===e){for(var r="int32"===e?new Int32Array(t.length):new Uint8Array(t.length),n=0;n<r.length;++n){var o=t[n];o=isNaN(o)?u.getNaN(e):Math.round(o),r[n]=o}return r}throw new Error("Unknown dtype "+e)}}(e,i))},t}();r.MathBackendWebGL=K,s.ENV.registerBackend("webgl",function(){return new K});var H=function(t){function e(e,r){void 0===r&&(r=!1);var n;return console.warn("new NDArrayMathGPU() is deprecated. Please use the global dl.ENV.math. In rare cases, to construct your own NDArrayMath that runs on GPU, use math = new NDArrayMath('webgl', safeMode); and make sure to set it as global: dl.ENV.setMath(math);"),n=t.call(this,new K(e),r)||this,s.ENV.setMath(n),n}return o(e,t),e.prototype.getGPGPUContext=function(){return this.engine.getBackend().getGPGPUContext()},e.prototype.getTextureManager=function(){return this.engine.getBackend().getTextureManager()},e}(l.NDArrayMath);r.NDArrayMathGPU=H},{"../../environment":336,"../../util":448,"../axis_util":374,"../math":429,"../ndarray":431,"../reduce_util":438,"../types":445,"./webgl/argminmax_gpu":382,"./webgl/avg_pool_backprop_gpu":383,"./webgl/batchnorm_gpu":384,"./webgl/binaryop_gpu":385,"./webgl/clip_gpu":386,"./webgl/concat_gpu":387,"./webgl/conv_backprop_gpu":388,"./webgl/conv_gpu":389,"./webgl/conv_gpu_depthwise":390,"./webgl/from_pixels_gpu":391,"./webgl/gather_gpu":392,"./webgl/gpgpu_context":393,"./webgl/gpgpu_math":394,"./webgl/logical_gpu":396,"./webgl/lrn_gpu":397,"./webgl/max_pool_backprop_gpu":398,"./webgl/mulmat_gpu":399,"./webgl/multinomial_gpu":400,"./webgl/onehot_gpu":401,"./webgl/pad_gpu":402,"./webgl/pool_gpu":403,"./webgl/reduce_gpu":404,"./webgl/resize_bilinear_gpu":406,"./webgl/reverse_gpu":407,"./webgl/slice_gpu":409,"./webgl/tex_util":410,"./webgl/texture_manager":411,"./webgl/tile_gpu":412,"./webgl/transpose_gpu":413,"./webgl/unaryop_gpu":414,"./webgl/webgl_util":415}],378:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../../util"),o=t("../ndarray");r.executeKernel=function(t,e,r){if("MatMul"===e){var a=r;return t.matMul(a.inputs.a,a.inputs.b,a.args.aOrientation,a.args.bOrientation)}if("Slice1D"===e)return a=r,t.slice1D(a.inputs.x,a.args.begin,a.args.size);if("Slice2D"===e)return a=r,t.slice2D(a.inputs.x,a.args.begin,a.args.size);if("Slice3D"===e)return a=r,t.slice3D(a.inputs.x,a.args.begin,a.args.size);if("Slice4D"===e)return a=r,t.slice4D(a.inputs.x,a.args.begin,a.args.size);if("Reverse4D"===e)return a=r,t.reverse4D(a.inputs.x,a.args.axis);if("Concat"===e)return a=r,t.concat(a.inputs.a,a.inputs.b);if("Neg"===e)return a=r,t.neg(a.inputs.x);if("Add"===e)return a=r,t.add(a.inputs.a,a.inputs.b);if("Sub"===e)return a=r,t.subtract(a.inputs.a,a.inputs.b);if("Mul"===e)return a=r,t.multiply(a.inputs.a,a.inputs.b);if("Div"===e)return a=r,t.divide(a.inputs.a,a.inputs.b);if("Sum"===e)return a=r,t.sum(a.inputs.x,a.args.axes);if("ArgMax"===e)return a=r,t.argMax(a.inputs.x,a.args.axes);if("ArgMin"===e)return a=r,t.argMin(a.inputs.x,a.args.axes);if("Equal"===e)return a=r,t.equal(a.inputs.a,a.inputs.b);if("NotEqual"===e)return a=r,t.notEqual(a.inputs.a,a.inputs.b);if("Less"===e)return a=r,t.less(a.inputs.a,a.inputs.b);if("LessEqual"===e)return a=r,t.lessEqual(a.inputs.a,a.inputs.b);if("Greater"===e)return a=r,t.greater(a.inputs.a,a.inputs.b);if("GreaterEqual"===e)return a=r,t.greaterEqual(a.inputs.a,a.inputs.b);if("LogicalAnd"===e)return a=r,t.logicalAnd(a.inputs.a,a.inputs.b);if("LogicalOr"===e)return a=r,t.logicalOr(a.inputs.a,a.inputs.b);if("Where"===e)return a=r,t.where(a.inputs.condition,a.inputs.a,a.inputs.b,a.args.dtype);if("TopKValues"===e)return a=r,t.topKValues(a.inputs.x,a.args.k);if("TopKIndices"===e)return a=r,t.topKIndices(a.inputs.x,a.args.k);if("Min"===e)return a=r,t.min(a.inputs.x,a.args.axes);if("Minimum"===e)return a=r,t.minimum(a.inputs.a,a.inputs.b);if("Max"===e)return a=r,t.max(a.inputs.x,a.args.axes);if("Maximum"===e)return a=r,t.maximum(a.inputs.a,a.inputs.b);if("Ceil"===e)return a=r,t.ceil(a.inputs.x);if("Floor"===e)return a=r,t.floor(a.inputs.x);if("Pow"===e)return a=r,t.pow(a.inputs.base,a.inputs.exp);if("Exp"===e)return a=r,t.exp(a.inputs.x);if("Log"===e)return a=r,t.log(a.inputs.x);if("Sqrt"===e)return a=r,t.sqrt(a.inputs.x);if("Square"===e)return a=r,t.square(a.inputs.x);if("Relu"===e)return a=r,t.relu(a.inputs.x);if("Reshape"===e){var i=(a=r).inputs.x,s=a.args.newShape;return o.NDArray.make(s,{dataId:i.dataId},i.dtype)}if("Cast"===e){i=(a=r).inputs.x;var u=a.args.newDType;if(!n.hasEncodingLoss(i.dtype,u))return o.NDArray.make(i.shape,{dataId:i.dataId},u);if("int32"===u)return t.int(i);if("bool"===u)return t.notEqual(i,o.Scalar.new(0,i.dtype));throw new Error("Error in Cast: unknown dtype argument ("+u+")")}if("LeakyRelu"===e)return a=r,t.leakyRelu(a.inputs.x,a.args.alpha);if("PReLU"===e)return a=r,t.prelu(a.inputs.x,a.inputs.alpha);if("PReLUDer"===e)return a=r,t.preluDer(a.inputs.x,a.inputs.alpha);if("Elu"===e)return a=r,t.elu(a.inputs.x);if("EluDer"===e)return a=r,t.eluDer(a.inputs.x);if("Selu"===e)return a=r,t.selu(a.inputs.x);if("Abs"===e)return a=r,t.abs(a.inputs.x);if("Sigmoid"===e)return a=r,t.sigmoid(a.inputs.x);if("Step"===e)return a=r,t.step(a.inputs.x,a.args.alpha);if("Sin"===e)return a=r,t.sin(a.inputs.x);if("Cos"===e)return a=r,t.cos(a.inputs.x);if("Tan"===e)return a=r,t.tan(a.inputs.x);if("Asin"===e)return a=r,t.asin(a.inputs.x);if("Acos"===e)return a=r,t.acos(a.inputs.x);if("Atan"===e)return a=r,t.atan(a.inputs.x);if("Sinh"===e)return a=r,t.sinh(a.inputs.x);if("Cosh"===e)return a=r,t.cosh(a.inputs.x);if("Tanh"===e)return a=r,t.tanh(a.inputs.x);if("Clip"===e)return a=r,t.clip(a.inputs.x,a.args.min,a.args.max);if("Tile"===e)return a=r,t.tile(a.inputs.x,a.args.reps);if("Gather"===e)return a=r,t.gather(a.inputs.x,a.inputs.indices,a.args.axis);if("Pad1D"===e)return a=r,t.pad1D(a.inputs.x,a.args.paddings,a.args.constantValue);if("Pad2D"===e)return a=r,t.pad2D(a.inputs.x,a.args.paddings,a.args.constantValue);if("Transpose"===e)return a=r,t.transpose(a.inputs.x,a.args.perm);if("Conv2D"===e)return a=r,t.conv2d(a.inputs.x,a.inputs.filter,a.inputs.bias,a.args.convInfo);if("Conv2DDerInput"===e)return a=r,t.conv2dDerInput(a.inputs.dy,a.inputs.filter,a.args.convInfo);if("Conv2DDerFilter"===e)return a=r,t.conv2dDerFilter(a.inputs.x,a.inputs.dy,a.args.convInfo);if("Conv2DDerBias"===e)return a=r,t.conv2dDerBias(a.inputs.dy);if("DepthwiseConv2D"===e)return a=r,t.depthwiseConv2D(a.inputs.x,a.inputs.filter,a.args.convInfo);if("MaxPool"===e)return a=r,t.maxPool(a.inputs.x,a.args.convInfo);if("MaxPoolBackprop"===e)return a=r,t.maxPoolBackprop(a.inputs.dy,a.inputs.x,a.args.convInfo);if("AvgPool"===e)return a=r,t.avgPool(a.inputs.x,a.args.convInfo);if("AvgPoolBackprop"===e)return a=r,t.avgPoolBackprop(a.inputs.dy,a.inputs.x,a.args.convInfo);if("MinPool"===e)return a=r,t.minPool(a.inputs.x,a.args.convInfo);if("ResizeBilinear"===e)return a=r,t.resizeBilinear(a.inputs.x,a.args.newHeight,a.args.newWidth,a.args.alignCorners);if("BatchNorm4D"===e)return a=r,t.batchNormalization4D(a.inputs.x,a.inputs.mean,a.inputs.variance,a.args.varianceEpsilon,a.inputs.scale,a.inputs.offset);if("BatchNorm3D"===e)return a=r,t.batchNormalization3D(a.inputs.x,a.inputs.mean,a.inputs.variance,a.args.varianceEpsilon,a.inputs.scale,a.inputs.offset);if("BatchNorm2D"===e)return a=r,t.batchNormalization2D(a.inputs.x,a.inputs.mean,a.inputs.variance,a.args.varianceEpsilon,a.inputs.scale,a.inputs.offset);if("LRN4D"===e)return a=r,t.localResponseNormalization4D(a.inputs.x,a.args.radius,a.args.bias,a.args.alpha,a.args.beta,a.args.normRegion);if("Multinomial"===e)return a=r,t.multinomial(a.inputs.probs,a.args.numSamples,a.args.seed);if("OneHot"===e)return a=r,t.oneHot(a.inputs.indices,a.args.depth,a.args.onValue,a.args.offValue);throw new Error("No backend method found for kernel "+e)}},{"../../util":448,"../ndarray":431}],379:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../../util"),o=function(){function t(t,e){this.backendTimer=t,this.logger=e,null==e&&(this.logger=new a)}return t.prototype.profileKernel=function(t,e){var r,o=this,a=this.backendTimer.time(function(){r=e()}),i=r.dataSync();return n.checkForNaN(i,r.dtype,name),a.then(function(e){o.logger.logKernelProfile(t,r,i,e)}),r},t}();r.Profiler=o;var a=function(){function t(){}return t.prototype.logKernelProfile=function(t,e,r,o){var a=n.rightPad(o+"ms",9),i=n.rightPad(t,25),s=e.rank,u=e.size,c=n.rightPad(e.shape.toString(),14);console.log("%c"+i+"\t%c"+a+"\t%c"+s+"D "+c+"\t%c"+u,"font-weight:bold","color:red","color:blue","color: orange")},t}();r.Logger=a},{"../../util":448}],380:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../../util"),o=t("../ndarray");r.getFilteredNodesXToY=function(t,e,r){for(var n={},a={},i=0;i<e.length;i++)n[e[i].id]=!0;for(i=0;i<t.length;i++){var s=(x=t[i]).inputAndArgs.inputs;for(var u in s){for(var c=s[u],l=!1,p=0;p<e.length;p++)if(n[c.id]){if(x.output instanceof o.NDArray)n[x.output.id]=!0;else for(var h=0,f=Object.keys(x.output);h<f.length;h++){var d=f[h];n[x.output[d].id]=!0}l=!0,a[x.id]=!0;break}if(l)break}}var m={};m[r.id]=!0;var g={};for(i=t.length-1;i>=0;i--){s=(x=t[i]).inputAndArgs.inputs;var v=[];if(x.output instanceof o.NDArray)v.push(x.output);else for(var y=0,_=Object.keys(x.output);y<_.length;y++)d=_[y],v.push(x.output[d]);for(p=0;p<v.length;p++)if(m[v[p].id]){for(var u in s)m[s[u].id]=!0,g[x.id]=!0;break}}var b=[];for(i=0;i<t.length;i++){var x;if(a[(x=t[i]).id]&&g[x.id]){var w={};for(var u in x.inputAndArgs.inputs){var E=x.inputAndArgs.inputs[u];n[E.id]&&(w[u]=E)}var k=void 0;if(x.output instanceof o.NDArray)k=x.output;else for(var S in k={},x.output)m[x.output[S].id]&&(k[S]=x.output[S]);var A=Object.assign({},x);A.inputAndArgs={inputs:w},A.output=k,b.push(A)}}return b},r.backpropagateGradients=function(t,e){for(var r=e.length-1;r>=0;r--){var a=e[r],i=void 0;if(a.output instanceof o.NDArray)i=t[a.output.id];else{i={};for(var s=0,u=Object.keys(a.output);s<u.length;s++){var c=u[s];i[c]=t[a.output[c].id]}}if(null==a.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+a.name+".");var l=a.gradient(i,a.output);for(var p in a.inputAndArgs.inputs){if(!(p in l))throw new Error("Cannot backprop through input "+p+". Available gradients found: "+Object.keys(l)+".");var h=l[p](),f=a.inputAndArgs.inputs[p];if(!n.arraysEqual(h.shape,f.shape))throw new Error("Error in gradient for op "+a.name+". The gradient of input '"+p+"' has shape '"+h.shape+"', which does not match the shape of the input '"+f.shape+"'");if(null==t[f.id])t[f.id]=h;else{var d=t[f.id];t[f.id]=d.add(h),d.dispose()}}}},r.computeVariableInputs=function(t,e){var r=[],n={},a={};e.forEach(function(t){a[t.id]=!0});for(var i=0;i<t.length;i++)for(var s=t[i].inputAndArgs.inputs,u=0,c=Object.keys(s);u<c.length;u++){var l=c[u],p=s[l];if(p instanceof o.Variable&&!n[p.id]){if(null!=e&&null==a[p.id])continue;r.push(p),n[s[l].id]=!0}}return r},r.extractNDArraysFromScopeResult=function(t){if(null==t)return[];if(t instanceof o.NDArray)return[t];var e=[],r=t;for(var a in r)e.push.apply(e,n.flatten(r[a]));return e},r.stripUndefinedInputsFromInputConfig=function(t){return Object.keys(t.inputs).forEach(function(e){null==t.inputs[e]&&delete t.inputs[e]}),t}},{"../../util":448,"../ndarray":431}],381:[function(t,e,r){"use strict";var n;Object.defineProperty(r,"__esModule",{value:!0}),(n=r.MatrixOrientation||(r.MatrixOrientation={}))[n.REGULAR=0]="REGULAR",n[n.TRANSPOSED=1]="TRANSPOSED"},{}],382:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return function(t,e,r){this.variableNames=["A"];var n=t.windowSize,o=t.batchSize,a=t.inSize,i=Math.ceil(a/n);r||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var s="max"===e?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        int bestIndex = 0;\n        float bestValue = getA(batch, inOffset);\n\n        for (int i = 0; i < "+n+"; i++) {\n          int inIdx = "+u+";\n          float candidate = getA(batch, inIdx);\n          if (isNaN(candidate)) {\n            setOutput(candidate);\n            return;\n          }\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "}}();r.ArgMinMaxProgram=n},{}],383:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterHeight,r=t.filterWidth,n=t.strideHeight,o=t.strideWidth,a=e-1-t.padInfo.top,i=r-1-t.padInfo.left,s=1/(e*r);this.userCode="\n      const ivec2 pads = ivec2("+a+", "+i+");\n      const float avgMultiplier = float("+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+n+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+r+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}();r.AvgPool2DBackpropProgram=n},{}],384:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../../broadcast_util"),o=function(){return function(t,e,r,o,a,i){this.outputShape=[],this.supportsBroadcasting=!0,this.variableNames=["x","mean","variance"],n.assertAndGetBroadcastShape(t,e),n.assertAndGetBroadcastShape(t,r);var s="0.0";null!=o&&(n.assertAndGetBroadcastShape(t,o),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=a&&(n.assertAndGetBroadcastShape(t,a),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+s+";\n        float scale = "+u+";\n        float inv = scale / sqrt(variance + float("+i+"));\n        setOutput((x - mean) * inv + offset);\n      }\n    "}}();r.BatchNormProgram=o},{"../../broadcast_util":418}],385:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../../broadcast_util"),o="\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n";r.ADD="return a + b;",r.SUB="return a - b;",r.MUL="return a * b;",r.DIV="return a / b;",r.POW="\n  return (round(mod(b, 2.0)) == 0 || round(mod(b, 2.0)) == 2) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",r.EQUAL=o+"\n  return float(a == b);\n",r.NOT_EQUAL=o+"\n  return float(a != b);\n",r.LESS=o+"\n  return float(a < b);\n",r.LESS_EQUAL=o+"\n  return float(a <= b);\n",r.GREATER=o+"\n  return float(a > b);\n",r.GREATER_EQUAL=o+"\n  return float(a >= b);\n",r.LOGICAL_AND=o+"\n  return float(a >= 1.0 && b >= 1.0);\n",r.LOGICAL_OR=o+"\n  return float(a >= 1.0 || b >= 1.0);\n",r.PRELU="\n  return (a >= 0.0) ? a : b * a;\n",r.PRELU_DER="\n  return (a > 0.0) ? 1.0 : ((a < 0.0) ? b : a);\n",r.MAX=o+"\n  return max(a, b);\n",r.MIN=o+"\n  return min(a, b);\n";var a=function(){return function(t,e,r){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.outputShape=n.assertAndGetBroadcastShape(e,r),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+t+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "}}();r.BinaryOpProgram=a},{"../../broadcast_util":418}],386:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return function(t,e,r){this.variableNames=["A"],this.outputShape=t;var n=e.toFixed(20),o=r.toFixed(20);this.userCode="\n      void main() {\n        float value = getAAtOutCoords();\n        if (isNaN(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, "+n+", "+o+"));\n      }\n    "}}();r.ClipProgram=n},{}],387:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../../concat_util"),o=function(){return function(t,e){this.variableNames=["A","B"],this.outputShape=[],this.outputShape=n.computeOutShape(t,e,1),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        float value = 0.0;\n        if (yC < "+t[1]+") {\n          value = getA(yR, yC);\n        } else {\n          yC -= "+t[1]+";\n          value = getB(yR, yC);\n        }\n\n        setOutput(value);\n      }\n    "}}();r.ConcatProgram=o},{"../../concat_util":421}],388:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,r=t.strideWidth,n=t.padInfo.top,o=t.padInfo.left;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+e+" - "+n+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+r+" - "+o+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}();r.Conv2DDerFilterProgram=n;var o=function(){return function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,r=t.filterWidth,n=t.strideHeight,o=t.strideWidth,a=e-1-t.padInfo.top,i=r-1-t.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+n+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+e+" - 1 - wR;\n\n          for (int wC = 0; wC < "+r+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+r+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+t.outChannels+"; d2++) {\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, d2);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}();r.Conv2DDerInputProgram=o;var a=function(){return function(t){this.variableNames=["dy"];var e=t[0],r=t[1],n=t[2],o=t[3];this.outputShape=[o],this.userCode="\n      void main() {\n        int d2 = getOutputCoords();\n\n        float derBias = 0.0;\n        for (int b = 0; b < "+e+"; b++) {\n          for (int yR = 0; yR < "+r+"; yR++) {\n            for (int yC = 0; yC < "+n+"; yC++) {\n              derBias += getDy(b, yR, yC, d2);\n            }\n          }\n        }\n        setOutput(derBias);\n      }\n    "}}();r.Conv2DDerBiasProgram=a},{}],389:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return function(t,e){this.variableNames=["x","W"],e&&this.variableNames.push("bias"),this.outputShape=t.outShape;var r=e?"dotProd += getBias(d2);":"",n=t.padInfo.top,o=t.padInfo.left,a=t.strideHeight,i=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=4*Math.floor(t.inChannels/4),l=t.inChannels%4;this.userCode="\n      const ivec2 strides = ivec2("+a+", "+i+");\n      const ivec2 pads = ivec2("+n+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+"; wR++) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+u+"; wC++) {\n            int xC = xCCorner + wC;\n\n            if (xC < 0 || xC >= "+t.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+c+"; d1 += 4) {\n              vec4 xValues = vec4(\n                getX(batch, xR, xC, d1),\n                getX(batch, xR, xC, d1 + 1),\n                getX(batch, xR, xC, d1 + 2),\n                getX(batch, xR, xC, d1 + 3)\n              );\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              dotProd += dot(xValues, wValues);\n            }\n\n            if ("+(1===l)+") {\n              dotProd +=\n                getX(batch, xR, xC, "+c+") *\n                getW(wR, wC, "+c+", d2);\n            } else if ("+(2===l)+") {\n              vec2 xValues = vec2(\n                getX(batch, xR, xC, "+c+"),\n                getX(batch, xR, xC, "+c+" + 1)\n              );\n              vec2 wValues = vec2(\n                getW(wR, wC, "+c+", d2),\n                getW(wR, wC, "+c+" + 1, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            } else if ("+(3===l)+") {\n              vec3 xValues = vec3(\n                getX(batch, xR, xC, "+c+"),\n                getX(batch, xR, xC, "+c+" + 1),\n                getX(batch, xR, xC, "+c+" + 2)\n              );\n              vec3 wValues = vec3(\n                getW(wR, wC, "+c+", d2),\n                getW(wR, wC, "+c+" + 1, d2),\n                getW(wR, wC, "+c+" + 2, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            }\n          }\n        }\n        "+r+"\n        setOutput(dotProd);\n      }\n    "}}();r.Conv2DProgram=n},{}],390:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.inHeight,r=t.inWidth,n=t.padInfo.top,o=t.padInfo.left,a=t.strideHeight,i=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 strides = ivec2("+a+", "+i+");\n      const ivec2 pads = ivec2("+n+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+c+";\n        int q = d2 - d1 * "+c+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TODO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+s+"; wR++) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+u+"; wC++) {\n            int xC = xCCorner + wC;\n\n            if (xC < 0 || xC >= "+r+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}();r.DepthwiseConv2DProgram=n},{}],391:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return function(t){this.variableNames=["A"];var e=t[0],r=t[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+e+".0);\n\n        vec4 values = texture2D(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "}}();r.FromPixelsProgram=n},{}],392:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./shader_compiler"),o=function(){return function(t,e,r){this.variableNames=["A","indices"];var o=t.slice();o[r]=e,this.outputShape=o,this.rank=o.length;var a=n.getCoordsDataType(this.rank),i=function(t,e){var r=t.length;if(r>4)throw Error("Gather for rank "+r+" is not yet supported");if(1===r)return"int(getIndices(resRC))";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],a=0;a<t.length;a++)a===e?o.push("int(getIndices("+n[a]+"))"):o.push(""+n[a]);return o.join()}(t,r);this.userCode="\n      void main() {\n        "+a+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "}}();r.GatherProgram=o},{"./shader_compiler":408}],393:[function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,a){function i(t){try{u(n.next(t))}catch(t){a(t)}}function s(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(i,s)}u((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=n[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../../environment"),i=t("../../../util"),s=t("./gpgpu_util"),u=t("./tex_util"),c=t("./webgl_util"),l=function(){function t(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.autoDebugValidate=!1,this.gl=null!=t?t:s.createWebGLContext(),1===a.ENV.get("WEBGL_VERSION")?(this.textureFloatExtension=c.getExtensionOrThrow(this.gl,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float")):this.colorBufferFloatExtension=c.getExtensionOrThrow(this.gl,"EXT_color_buffer_float"),this.loseContextExtension=c.getExtensionOrThrow(this.gl,"WEBGL_lose_context"),a.ENV.get("WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED")&&(this.getBufferSubDataAsyncExtension=this.gl.getExtension("WEBGL_get_buffer_sub_data_async")),this.vertexBuffer=s.createVertexBuffer(this.gl),this.indexBuffer=s.createIndexBuffer(this.gl),this.framebuffer=c.createFramebuffer(this.gl)}return t.prototype.dispose=function(){var t=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;c.callAndCheck(e,function(){return e.finish()}),c.callAndCheck(e,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),c.callAndCheck(e,function(){return e.deleteFramebuffer(t.framebuffer)}),c.callAndCheck(e,function(){return e.bindBuffer(e.ARRAY_BUFFER,null)}),c.callAndCheck(e,function(){return e.deleteBuffer(t.vertexBuffer)}),c.callAndCheck(e,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}),c.callAndCheck(e,function(){return e.deleteBuffer(t.indexBuffer)}),this.loseContextExtension.loseContext(),this.disposed=!0}},t.prototype.enableAutomaticDebugValidation=function(t){this.autoDebugValidate=t,c.enableDebugWebGLErrorChecking(t)},t.prototype.createMatrixTexture=function(t,e){return this.throwIfDisposed(),s.createMatrixTexture(this.gl,t,e)},t.prototype.uploadPixelDataToTexture=function(t,e){this.throwIfDisposed(),s.uploadPixelDataToTexture(this.gl,t,e)},t.prototype.createPackedMatrixTexture=function(t,e){return this.throwIfDisposed(),s.createPackedMatrixTexture(this.gl,t,e)},t.prototype.deleteMatrixTexture=function(t){var e=this;this.throwIfDisposed(),this.outputTexture===t&&(c.unbindColorTextureFromFramebuffer(this.gl,this.framebuffer),this.outputTexture=null),c.callAndCheck(this.gl,function(){return e.gl.deleteTexture(t)})},t.prototype.uploadMatrixToTexture=function(t,e,r,n){this.throwIfDisposed();return s.uploadMatrixToTexture(this.gl,t,e,r,n,1)},t.prototype.uploadMatrixToPackedTexture=function(t,e,r,n){return this.throwIfDisposed(),s.uploadMatrixToPackedTexture(this.gl,t,e,r,n)},t.prototype.downloadMatrixFromTexture=function(t,e,r){var n=this;return this.downloadMatrixDriver(t,function(){return s.downloadMatrixFromOutputTexture(n.gl,e,r)})},t.prototype.downloadMatrixFromTextureAsync=function(t,e,r){return n(this,void 0,void 0,function(){var n=this;return o(this,function(o){if(null==this.getBufferSubDataAsyncExtension)throw new Error("Cannot download matrix from output texture asynchronously, WEBGL_get_buffer_sub_data_async is not enabled.");return[2,this.downloadMatrixDriverAsync(t,function(){return s.downloadMatrixFromOutputTextureAsync(n.gl,n.getBufferSubDataAsyncExtension,e,r)})]})})},t.prototype.downloadMatrixFromRGBAColorTexture=function(t,e,r,n){var o=this;return this.downloadMatrixDriver(t,function(){return s.downloadMatrixFromRGBAColorTexture(o.gl,e,r,n)})},t.prototype.downloadMatrixFromPackedTexture=function(t,e,r){var n=this;return this.downloadMatrixDriver(t,function(){return s.downloadMatrixFromPackedOutputTexture(n.gl,e,r)})},t.prototype.createProgram=function(t){this.throwIfDisposed();var e=this.gl,r=c.createFragmentShader(e,t),n=s.createVertexShader(e),o=c.createProgram(e);return c.callAndCheck(e,function(){return e.attachShader(o,n)}),c.callAndCheck(e,function(){return e.attachShader(o,r)}),c.linkProgram(e,o),this.autoDebugValidate&&c.validateProgram(e,o),o},t.prototype.deleteProgram=function(t){var e=this;this.throwIfDisposed(),t===this.program&&(this.program=null),null!=t&&c.callAndCheck(this.gl,function(){return e.gl.deleteProgram(t)})},t.prototype.setProgram=function(t){var e=this;this.throwIfDisposed(),this.program=t,null!=this.program&&this.autoDebugValidate&&c.validateProgram(this.gl,this.program),c.callAndCheck(this.gl,function(){return e.gl.useProgram(t)})},t.prototype.getUniformLocation=function(t,e,r){return void 0===r&&(r=!0),this.throwIfDisposed(),r?c.getProgramUniformLocationOrThrow(this.gl,t,e):c.getProgramUniformLocation(this.gl,t,e)},t.prototype.getAttributeLocation=function(t,e){var r=this;return this.throwIfDisposed(),c.callAndCheck(this.gl,function(){return r.gl.getAttribLocation(t,e)})},t.prototype.getUniformLocationNoThrow=function(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)},t.prototype.setInputMatrixTexture=function(t,e,r){this.throwIfDisposed(),this.throwIfNoProgram(),c.bindTextureToProgramUniformSampler(this.gl,this.program,t,e,r)},t.prototype.setOutputMatrixTexture=function(t,e,r){this.setOutputMatrixTextureDriver(t,r,e)},t.prototype.setOutputPackedMatrixTexture=function(t,e,r){this.throwIfDisposed();var n=u.getPackedMatrixTextureShapeWidthHeight(e,r),o=n[0],a=n[1];this.setOutputMatrixTextureDriver(t,o,a)},t.prototype.setOutputMatrixWriteRegion=function(t,e,r,n){this.setOutputMatrixWriteRegionDriver(r,t,n,e)},t.prototype.setOutputPackedMatrixWriteRegion=function(t,e,r,n){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){null!=this.program&&c.validateProgram(this.gl,this.program),c.validateFramebuffer(this.gl)},t.prototype.executeProgram=function(t){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;s.bindVertexProgramAttributeStreams(e,this.program,this.vertexBuffer,t),this.autoDebugValidate&&this.debugValidate(),c.callAndCheck(e,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),c.callAndCheck(this.gl,function(){return t.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=c.getExtensionOrThrow(this.gl,2===a.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.runQuery=function(t){var e=this.beginQuery();return t(),this.endQuery(),this.pollQueryTime(e)},t.prototype.beginQuery=function(){if(2===a.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.gl,e=this.getQueryTimerExtensionWebGL2(),r=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,r),r}r=(e=this.getQueryTimerExtensionWebGL1()).createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,r),r},t.prototype.endQuery=function(){if(2===a.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.gl,e=this.getQueryTimerExtensionWebGL2();t.endQuery(e.TIME_ELAPSED_EXT)}else{(e=this.getQueryTimerExtensionWebGL1()).endQueryEXT(e.TIME_ELAPSED_EXT)}},t.prototype.isQueryAvailable=function(t,e){if(0===e)return!0;if(2===e){var r=this.gl,n=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE),a=this.gl.getParameter(n.GPU_DISJOINT_EXT);return o&&!a}o=(n=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,n.QUERY_RESULT_AVAILABLE_EXT),a=this.gl.getParameter(n.GPU_DISJOINT_EXT);return o&&!a},t.prototype.pollQueryTime=function(t){var e=this;return new Promise(function(r,n){var o=a.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION");i.repeatedTry(function(){return e.isQueryAvailable(t,o)}).then(function(){return r(e.getQueryTime(t,o))}).catch(function(){console.warn("Disjoint query timer never available."),r(-1)})})},t.prototype.getQueryTime=function(t,e){if(0===e)return null;if(2===e){var r=this.gl;return r.getQueryParameter(t,r.QUERY_RESULT)/1e6}var n=this.getQueryTimerExtensionWebGL1();return n.getQueryObjectEXT(t,n.QUERY_RESULT_EXT)/1e6},t.prototype.downloadMatrixDriverSetup=function(t){this.throwIfDisposed(),c.bindColorTextureToFramebuffer(this.gl,t,this.framebuffer),this.autoDebugValidate&&c.validateFramebuffer(this.gl)},t.prototype.downloadMatrixDriverTeardown=function(){null!=this.outputTexture?(c.bindColorTextureToFramebuffer(this.gl,this.outputTexture,this.framebuffer),this.autoDebugValidate&&c.validateFramebuffer(this.gl)):c.unbindColorTextureFromFramebuffer(this.gl,this.framebuffer)},t.prototype.downloadMatrixDriver=function(t,e){this.downloadMatrixDriverSetup(t);var r=e();return this.downloadMatrixDriverTeardown(),r},t.prototype.downloadMatrixDriverAsync=function(t,e){return n(this,void 0,void 0,function(){var r;return o(this,function(n){switch(n.label){case 0:return this.downloadMatrixDriverSetup(t),[4,e()];case 1:return r=n.sent(),this.downloadMatrixDriverTeardown(),[2,r]}})})},t.prototype.setOutputMatrixTextureDriver=function(t,e,r){this.throwIfDisposed();var n=this.gl;c.bindColorTextureToFramebuffer(n,t,this.framebuffer),this.autoDebugValidate&&c.validateFramebuffer(n),this.outputTexture=t,c.callAndCheck(n,function(){return n.viewport(0,0,e,r)}),c.callAndCheck(n,function(){return n.scissor(0,0,e,r)})},t.prototype.setOutputMatrixWriteRegionDriver=function(t,e,r,n){var o=this;this.throwIfDisposed(),c.callAndCheck(this.gl,function(){return o.gl.scissor(t,e,r,n)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},t}();r.GPGPUContext=l},{"../../../environment":336,"../../../util":448,"./gpgpu_util":395,"./tex_util":410,"./webgl_util":415}],394:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../../../environment"),o=t("../../../util"),a=t("./shader_compiler"),i=["uv","clipSpacePos"],s="NaN";function u(){return!n.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")}function c(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach(function(t,r){var n=t.logicalShape,a=t.texShape,i=e[r].array.shape,s=e[r].texData.texShape;if(!o.arraysEqual(n,i))throw Error("Binary was compiled with different shapes than the current args. Shapes "+n+" and "+i+" must match");if(!o.arraysEqual(a,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+a+" and "+s+" must match")})}r.compileProgram=function(t,e,r,n){for(var o=e.userCode,c=r.map(function(t,r){var n={logicalShape:t.array.shape,texShape:t.texData.texShape};return{name:e.variableNames[r],shapeInfo:n}}),l=c.map(function(t){return t.shapeInfo}),p={logicalShape:n.array.shape,texShape:n.texData.texShape},h=a.makeShader(c,p,o,!0===e.supportsBroadcasting),f=t.createProgram(h),d={},m=0;m<e.variableNames.length;m++){var g=e.variableNames[m];d[g]=t.getUniformLocation(f,g)}var v={};i.forEach(function(e){v[e]=t.getAttributeLocation(f,e)}),u()&&(d[s]=t.getUniformLocation(f,s,!1));return{program:e,source:h,webGLProgram:f,uniformLocations:d,attributeLocations:v,gpgpu:t,inShapeInfos:l,outShapeInfo:p}},r.runProgram=function(t,e,r,n){c(t.inShapeInfos,e),c([t.outShapeInfo],[r]);var o=r.texData.texture,a=r.texData.texShape,i=t.gpgpu;i.setOutputMatrixTexture(o,a[0],a[1]),i.setProgram(t.webGLProgram),e.forEach(function(e,r){var n=e.texData.texture,o=t.program.variableNames[r],a=t.uniformLocations[o];i.setInputMatrixTexture(n,a,r)}),u()&&i.gl.uniform1f(t.uniformLocations[s],NaN),null!=n&&n(i,t.webGLProgram),i.executeProgram(t.attributeLocations)},r.makeShaderKey=function(t,e,r){var n="";e.concat(r).forEach(function(t){n+=t.array.shape+"_"+t.texData.texShape});var o=t.userCode,a=(!0===t.supportsBroadcasting).toString(),i=t.constructor.name;return i+="_"+a+"_"+n+"_"+o}},{"../../../environment":336,"../../../util":448,"./shader_compiler":408}],395:[function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,a){function i(t){try{u(n.next(t))}catch(t){a(t)}}function s(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(i,s)}u((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=n[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../../environment"),i=t("./tex_util"),s=t("./webgl_util");function u(){return{alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0}}function c(t,e){return a.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")&&2===a.ENV.get("WEBGL_VERSION")?4===e?t.RGBA:t.RED:t.RGBA}function l(t){return a.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")?t.FLOAT:t.UNSIGNED_BYTE}function p(t,e,r,n){s.validateTextureSize(t,e,r);var o,i,u=s.createTexture(t),p=t.TEXTURE_2D,h=(o=t,i=n,a.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")&&2===a.ENV.get("WEBGL_VERSION")?4===i?o.RGBA32F:o.R32F:o.RGBA),f=c(t,n);return s.callAndCheck(t,function(){return t.bindTexture(p,u)}),s.callAndCheck(t,function(){return t.texParameteri(p,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),s.callAndCheck(t,function(){return t.texParameteri(p,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),s.callAndCheck(t,function(){return t.texParameteri(p,t.TEXTURE_MIN_FILTER,t.NEAREST)}),s.callAndCheck(t,function(){return t.texParameteri(p,t.TEXTURE_MAG_FILTER,t.NEAREST)}),s.callAndCheck(t,function(){return t.texImage2D(p,0,h,e,r,0,f,l(t),null)}),s.callAndCheck(t,function(){return t.bindTexture(t.TEXTURE_2D,null)}),u}function h(t,e,r,n,o,a){var i=c(t,a);s.validateTextureSize(t,r,n),s.callAndCheck(t,function(){return t.bindTexture(t.TEXTURE_2D,e)}),s.callAndCheck(t,function(){return t.texSubImage2D(t.TEXTURE_2D,0,0,0,r,n,i,l(t),o)}),s.callAndCheck(t,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function f(t,e,r){return a.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")?new Float32Array(i.getUnpackedArraySizeFromMatrixSize(t*e,r)):new Uint8Array(t*e*r)}function d(t,e,r,n){if(a.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")){var o=new Float32Array(e*r);return i.decodeMatrixFromUnpackedArray(t,o,n),o}return i.decodeToFloatArray(t)}r.getWebGLContextAttributes=u,r.createWebGLContext=function(t){var e,r={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};return e=null!=t?s.createWebGLRenderingContextFromCanvas(t,r):s.createWebGLRenderingContext(r),s.callAndCheck(e,function(){return e.disable(e.DEPTH_TEST)}),s.callAndCheck(e,function(){return e.disable(e.STENCIL_TEST)}),s.callAndCheck(e,function(){return e.disable(e.BLEND)}),s.callAndCheck(e,function(){return e.disable(e.DITHER)}),s.callAndCheck(e,function(){return e.disable(e.POLYGON_OFFSET_FILL)}),s.callAndCheck(e,function(){return e.disable(e.SAMPLE_COVERAGE)}),s.callAndCheck(e,function(){return e.enable(e.SCISSOR_TEST)}),s.callAndCheck(e,function(){return e.enable(e.CULL_FACE)}),s.callAndCheck(e,function(){return e.cullFace(e.BACK)}),e},r.createVertexShader=function(t){return s.createVertexShader(t,"\n    precision highp float;\n    attribute vec3 clipSpacePos;\n    attribute vec2 uv;\n    varying vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")},r.createVertexBuffer=function(t){var e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return s.createStaticVertexBuffer(t,e)},r.createIndexBuffer=function(t){var e=new Uint16Array([0,1,2,2,1,3]);return s.createStaticIndexBuffer(t,e)},r.createMatrixTexture=function(t,e,r){var n=i.getUnpackedMatrixTextureShapeWidthHeight(e,r);return p(t,n[0],n[1],1)},r.createColorMatrixTexture=function(t,e,r){var n=i.getColorMatrixTextureShapeWidthHeight(e,r);return p(t,n[0],n[1],4)},r.createPackedMatrixTexture=function(t,e,r){var n=i.getPackedMatrixTextureShapeWidthHeight(e,r);return p(t,n[0],n[1],4)},r.bindVertexProgramAttributeStreams=function(t,e,r,n){s.callAndCheck(t,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),s.bindVertexBufferToProgramAttribute(t,e,"clipSpacePos",r,3,20,0,n),s.bindVertexBufferToProgramAttribute(t,e,"uv",r,2,20,12,n)},r.uploadPixelDataToTexture=function(t,e,r){s.callAndCheck(t,function(){return t.bindTexture(t.TEXTURE_2D,e)}),s.callAndCheck(t,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}),s.callAndCheck(t,function(){return t.bindTexture(t.TEXTURE_2D,null)})},r.uploadMatrixToTexture=function(t,e,r,n,o,u){var c,l=i.getUnpackedMatrixTextureShapeWidthHeight(r,n),p=l[0],f=l[1];if(a.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")){var d=1===u?s.getChannelsPerTexture():u;1===d?c=o:(c=new Float32Array(i.getUnpackedArraySizeFromMatrixSize(o.length,d)),i.encodeMatrixToUnpackedArray(o,c,d))}else c=i.encodeFloatArray(o);h(t,e,p,f,c,u)},r.uploadMatrixToPackedTexture=function(t,e,r,n,o){var a=i.getPackedMatrixTextureShapeWidthHeight(r,n),s=a[0],u=a[1],c=new Float32Array(i.getPackedRGBAArraySizeFromMatrixShape(r,n));i.encodeMatrixToPackedRGBA(o,r,n,c),h(t,e,s,u,c,4)},r.downloadMatrixFromOutputTextureAsync=function(t,e,r,a){return n(this,void 0,void 0,function(){var n,i,u,c,p;return o(this,function(o){switch(o.label){case 0:return n=t,u=f(r,a,i=4),c=u instanceof Float32Array?4*u.length:u,p=t.createBuffer(),s.callAndCheck(t,function(){return t.bindBuffer(n.PIXEL_PACK_BUFFER,p)}),s.callAndCheck(t,function(){return t.bufferData(n.PIXEL_PACK_BUFFER,c,t.STATIC_DRAW)}),s.callAndCheck(t,function(){return n.readPixels(0,0,a,r,t.RGBA,l(t),0)}),[4,e.getBufferSubDataAsync(n.PIXEL_PACK_BUFFER,0,u)];case 1:return o.sent(),[2,d(u,r,a,i)]}})})},r.downloadMatrixFromOutputTexture=function(t,e,r){var n=i.getUnpackedMatrixTextureShapeWidthHeight(e,r),o=n[0],a=n[1],u=f(e,r,4);return s.callAndCheck(t,function(){return t.readPixels(0,0,o,a,t.RGBA,l(t),u)}),d(u,e,r,4)},r.downloadMatrixFromRGBAColorTexture=function(t,e,r,n){var o=e*r*4,a=new Uint8Array(o);s.callAndCheck(t,function(){return t.readPixels(0,0,r,e,t.RGBA,t.UNSIGNED_BYTE,a)});for(var u=new Float32Array(o),c=0;c<a.length;c++)u[c]=a[c];var l=new Float32Array(e*r*n);return i.decodeMatrixFromUnpackedColorRGBAArray(u,l,n),l},r.downloadMatrixFromPackedOutputTexture=function(t,e,r){var n=i.getPackedMatrixTextureShapeWidthHeight(e,r),o=n[0],a=n[1],u=new Float32Array(i.getPackedRGBAArraySizeFromMatrixShape(e,r));s.callAndCheck(t,function(){return t.readPixels(0,0,o,a,t.RGBA,l(t),u)});var c=new Float32Array(e*r);return i.decodeMatrixFromPackedRGBA(u,e,r,c)}},{"../../../environment":336,"./tex_util":410,"./webgl_util":415}],396:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./shader_compiler"),o=function(){return function(t,e,r){var o,a;if(this.variableNames=["c","a","b"],this.outputShape=e,r>4)throw Error("Where for rank "+r+" is not yet supported");if(1===r)a="resRC",o="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],c=0;c<e.length;c++)u.push(""+i[c]),c<t&&s.push(""+i[c]);o=s.join(),a=u.join()}var l=n.getCoordsDataType(r);this.userCode="\n      void main() {\n        "+l+" resRC = getOutputCoords();\n        float cVal = getC("+o+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+a+"));\n        } else {\n          setOutput(getB("+a+"));\n        }\n      }\n    "}}();r.WhereProgram=o},{"./shader_compiler":408}],397:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return function(t,e,r,n,o,a){this.variableNames=["x"],this.outputShape=[];var i,s=e,u=t[1]-1,c=t[2]-1,l=t[3]-1;this.outputShape=t;var p="float("+r+") + float("+n+") * sum";i=.5===o?"inversesqrt("+p+")":1===o?"1.0/("+p+")":"exp(log("+p+") * float(-"+o+"));",this.userCode="withinChannel"===a?"\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int b = coords[0];\n          int r = coords[1];\n          int c = coords[2];\n          int d = coords[3];\n          float x = getX(b, r, c, d);\n          float sum = 0.0;\n          for (int u = -"+s+"; u <= "+s+"; u++) {\n            for (int v = -"+s+"; v <= "+s+"; v++) {\n              int idx = r + u;\n              int idy = c + v;\n              if (idx >= 0 && idx <= "+u+" && idy >= 0 && idy <= "+c+") {\n                float z = getX(b, idx, idy, d);\n                sum += z * z;\n              }\n            }\n          }\n          float val = x * "+i+";\n          setOutput(val);\n        }\n      ":"\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int b = coords[0];\n          int r = coords[1];\n          int c = coords[2];\n          int d = coords[3];\n          float x = getX(b, r, c, d);\n          float sum = 0.0;\n          for (int j = -"+s+"; j <= "+s+"; j++) {\n            int idx = d + j;\n            if (idx >= 0 && idx <=  "+l+") {\n              float z = getX(b, r, c, idx);\n              sum += z * z;\n            }\n          }\n          float val = x * "+i+";\n          setOutput(val);\n        }\n      "}}();r.LRNProgram=n},{}],398:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.filterHeight,r=t.filterWidth,n=t.strideHeight,o=t.strideWidth,a=e-1-t.padInfo.top,i=r-1-t.padInfo.left,s=e*r-1;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+n+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+r+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+s+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+r+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}();r.MaxPool2DBackpropProgram=n},{}],399:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../types/matmul"),o=function(){return function(t,e,r,o){void 0===r&&(r=n.MatrixOrientation.REGULAR),void 0===o&&(o=n.MatrixOrientation.REGULAR),this.variableNames=["matrixA","matrixB"];var a=r===n.MatrixOrientation.REGULAR?t[0]:t[1],i=o===n.MatrixOrientation.REGULAR?e[1]:e[0];this.outputShape=[a,i];var s=r===n.MatrixOrientation.REGULAR?t[1]:t[0],u=function(t,e){return r===n.MatrixOrientation.REGULAR?"aRow, "+e+" + "+t:e+" + "+t+", aRow"},c=function(t,e){return o===n.MatrixOrientation.REGULAR?e+" + "+t+", bCol":"bCol, "+e+" + "+t},l=4*Math.floor(s/4),p=s%4;this.userCode=" float dotARowBCol(int aRow, int bCol) {\n      float result = 0.0;\n      for (int i = 0; i < "+l+"; i += 4) {\n        vec4 a = vec4(\n          getMatrixA("+u(0,"i")+"),\n          getMatrixA("+u(1,"i")+"),\n          getMatrixA("+u(2,"i")+"),\n          getMatrixA("+u(3,"i")+")\n        );\n        vec4 b = vec4(\n          getMatrixB("+c(0,"i")+"),\n          getMatrixB("+c(1,"i")+"),\n          getMatrixB("+c(2,"i")+"),\n          getMatrixB("+c(3,"i")+")\n        );\n\n        result += dot(a, b);\n      }\n\n      if ("+(1===p)+") {\n        result += getMatrixA("+u(0,l)+") *\n          getMatrixB("+c(0,l)+");\n      } else if ("+(2===p)+") {\n        vec2 a = vec2(\n          getMatrixA("+u(0,l)+"),\n          getMatrixA("+u(1,l)+")\n        );\n        vec2 b = vec2(\n          getMatrixB("+c(0,l)+"),\n          getMatrixB("+c(1,l)+")\n        );\n        result += dot(a, b);\n      } else if ("+(3===p)+") {\n        vec3 a = vec3(\n          getMatrixA("+u(0,l)+"),\n          getMatrixA("+u(1,l)+"),\n          getMatrixA("+u(2,l)+")\n        );\n        vec3 b = vec3(\n          getMatrixB("+c(0,l)+"),\n          getMatrixB("+c(1,l)+"),\n          getMatrixB("+c(2,l)+")\n        );\n        result += dot(a, b);\n      }\n\n      return result;\n    }\n\n    void main() {\n      ivec2 resRC = getOutputCoords();\n      setOutput(dotARowBCol(resRC.x, resRC.y));\n    }\n    "}}();r.MatMulProgram=o},{"../types/matmul":381}],400:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(t,e,r){this.variableNames=["probs"],this.outputShape=[t,r],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(e-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(e-1)+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;return function(r,n){null==e.seedLoc&&(e.seedLoc=r.getUniformLocation(n,"seed")),r.gl.uniform1f(e.seedLoc,t)}},t}();r.MultinomialProgram=n},{}],401:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return function(t,e,r,n){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+n+"), float("+r+"),\n                      float(index == coords.y)));\n      }\n    "}}();r.OneHotProgram=n},{}],402:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return function(t,e,r){this.variableNames=["x"];var n=e[0],o=e[1];this.outputShape=[n+t[0]+o],this.rank=1,this.userCode="\n      void main() {\n        int resRC = getOutputCoords();\n        if (resRC < "+n+" || resRC >= "+n+" + "+t[0]+") {\n          setOutput(float("+r+"));\n        } else {\n          setOutput(getX(resRC - "+n+"));\n        }\n      }\n    "}}();r.Pad1DProgram=n;var o=function(){return function(t,e,r){this.variableNames=["x"];var n=e[0][0],o=e[0][1],a=e[1][0],i=e[1][1];this.outputShape=[n+t[0]+o,a+t[1]+i],this.rank=2;var s="resRC.x - "+n+", resRC.y - "+a;this.userCode="\n      void main() {\n        ivec2 resRC = getOutputCoords();\n        int topShape = "+n+" + "+t[0]+";\n        int leftShape = "+a+" + "+t[1]+";\n        if (resRC.x < "+n+" || resRC.x >= topShape ||\n            resRC.y < "+a+" || resRC.y >= leftShape) {\n          setOutput(float("+r+"));\n        } else {\n          setOutput(getX("+s+"));\n        }\n      }\n    "}}();r.Pad2DProgram=o},{}],403:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return function(t,e,r){if(this.variableNames=["x"],"avg"===e&&r)throw new Error("Cannot compute positions for average pool.");var n=t.filterHeight,o=t.filterWidth,a=t.strideHeight,i=t.strideWidth,s=t.padInfo.top,u=t.padInfo.left;this.outputShape=t.outShape;var c="avg"===e,l="0.0";if(c||(l="min"===e?"1.0 / 0.0":"-1.0 / 0.0"),r){var p="min"===e?"<=":">=";this.userCode="\n        const ivec2 strides = ivec2("+a+", "+i+");\n        const ivec2 pads = ivec2("+s+", "+u+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+o+"; wC++) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              if (isNaN(value)) {\n                setOutput(value);\n                return;\n              }\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value "+p+" currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+o+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "}else{var h="min"===e?"min":"max",f=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(f="avgValue / "+n*o+".0");var d=4*Math.floor(o/4),m=o%4,g="\n      if (hasNaN(values)) {\n        setOutput(getNaN(values));\n        return;\n      }\n      if ("+c+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = "+h+"(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+a+", "+i+");\n      const ivec2 pads = ivec2("+s+", "+u+");\n      const float initializationValue = "+l+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+t.inWidth+") {\n          return initializationValue;\n        }\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+l+");\n        float avgValue = 0.0;\n\n        for (int wR = 0; wR < "+n+"; wR++) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+d+"; wC += 4) {\n            int xC = xCCorner + wC;\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              getValue(batch, xR, xC + 3, d)\n            );\n\n            "+g+"\n          }\n\n          int xC = xCCorner + "+d+";\n          if ("+(1===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n            "+g+"\n          } else if ("+(2===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(3===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              initializationValue\n            );\n\n            "+g+"\n          }\n        }\n        setOutput("+f+");\n      }\n    "}}}();r.Pool2DProgram=n},{}],404:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return function(t,e){this.variableNames=["x"];var r=t.windowSize,n=t.batchSize,o=t.inSize,a=Math.ceil(o/r);this.outputShape=[n,a];var i="sum"===e,s="0.0";i||(s="min"===e?"1.0 / 0.0":"-1.0 / 0.0");var u="min"===e?"min":"max",c=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===e&&(c="sumValue");var l=4*Math.floor(r/4),p=r%4,h="\n      if ("+i+") {\n        sumValue += dot(values, ones);\n      } else {\n        if (hasNaN(values)) {\n          setOutput(getNaN(values));\n          return;\n        }\n        minMaxValue = "+u+"(values, minMaxValue);\n      }\n    ",f="";o%r>0&&(f="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+s+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+f+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        vec4 minMaxValue = vec4("+s+");\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+l+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+h+"\n        }\n\n        int inIdx = inOffset + "+l+";\n        if ("+(1===p)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n          "+h+"\n        } else if ("+(2===p)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n          "+h+"\n        } else if ("+(3===p)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n          "+h+"\n        }\n        setOutput("+c+");\n      }\n    "}}();r.ReduceProgram=n},{}],405:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./webgl_util");function o(t,e,r){t.setProgram(e);var o=n.getProgramUniformLocationOrThrow(t.gl,e,"source");t.setInputMatrixTexture(r,o,0),t.executeProgram()}r.getRenderRGBShader=function(t,e){var r="\n    precision highp float;\n    uniform sampler2D source;\n    varying vec2 resultUV;\n\n    const float destinationWidth = "+e+".0;\n    const float a = 1.0;\n\n    void main() {\n      float xr = floor(resultUV.s * destinationWidth) * 3.0;\n      vec3 x = xr + vec3(0, 1, 2);\n\n      float sourceWidth = destinationWidth * 3.0;\n      vec3 u = (x + 0.5) / sourceWidth;\n      float v = 1.0 - resultUV.t;\n\n      float r = texture2D(source, vec2(u[0], v)).r;\n      float g = texture2D(source, vec2(u[1], v)).r;\n      float b = texture2D(source, vec2(u[2], v)).r;\n\n      gl_FragColor = vec4(r, g, b, a);\n    }";return t.createProgram(r)},r.renderToCanvas=function(t,e,r){n.bindCanvasToFramebuffer(t.gl),o(t,e,r)},r.renderToFramebuffer=o},{"./webgl_util":415}],406:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return function(t,e,r,n){this.variableNames=["A"],this.outputShape=[];var o=t[0],a=t[1],i=t[2],s=t[3];this.outputShape=[o,e,r,s];var u=n?[a-1,i-1]:[a,i],c=n?[e-1,r-1]:[e,r];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+a+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "}}();r.ResizeBilinearProgram=n},{}],407:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return function(t,e){this.variableNames=["x"],this.outputShape=t;var r=function(r){return-1!==e.indexOf(r)&&1!==t[r]?t[r]+" - coords["+r+"] - 1":"coords["+r+"]"},n=r(0),o=r(1),a=r(2),i=r(3);this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        float val = getX("+n+", "+o+", "+a+", "+i+");\n        setOutput(val);\n      }\n    "}}();r.ReverseProgram=n},{}],408:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../../../environment"),o=t("../../../util"),a=t("../../broadcast_util"),i=t("./tex_util");function s(t){var e,r,n,a=t.shapeInfo.logicalShape;switch(a.length){case 0:return"\n    float get"+(n=t.name).charAt(0).toUpperCase()+n.slice(1)+"() {\n      return sample("+n+", halfCR);\n    }\n  ";case 1:return e=t.name,"\n    float "+(r="get"+e.charAt(0).toUpperCase()+e.slice(1))+"(int index) {\n      return "+r+"Flat(index);\n    }\n  ";case 2:return function(t){var e=t.shapeInfo.logicalShape,r=t.shapeInfo.texShape,n=t.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),i=r[0],u=r[1];if(o.arraysEqual(e,r))return"\n    float "+a+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+u+".0, "+i+".0);\n      return sample("+n+", uv);\n    }\n  ";var c=o.squeezeShape(e),l=c.newShape,p=c.keptDims,h=l;if(h.length<e.length){var m=f(t,h);return"\n      "+s(m)+"\n      float "+a+"(int row, int col) {\n        return "+a+"("+d(["row","col"],p)+");\n      }\n    "}if(1===u)return"\n    float "+a+"(int row, int col) {\n      int index = row * "+e[1]+" + col;\n      vec2 uv = vec2(0.5, (float(index) + 0.5) / "+i+".0);\n      return sample("+n+", uv);\n    }\n  ";if(1===i)return"\n    float "+a+"(int row, int col) {\n      int index = row * "+e[1]+" + col;\n      vec2 uv = vec2((float(index) + 0.5) / "+u+".0, 0.5);\n      return sample("+n+", uv);\n    }\n  ";return"\n  float "+a+"(int row, int col) {\n    vec2 uv = UVfrom2D("+i+", "+u+", "+e[1]+", row, col);\n    return sample("+n+", uv);\n  }\n"}(t);case 3:return function(t){var e=t.shapeInfo.texShape,r=t.shapeInfo.logicalShape,n=t.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[0],u=e[1],c=r[1]*r[2],l=r[2],p=o.squeezeShape(r),h=p.newShape,m=p.keptDims,g=h;if(g.length<r.length){var v=f(t,g);return"\n        "+s(v)+"\n        float "+a+"(int row, int col, int depth) {\n          return "+a+"("+d(["row","col","depth"],m)+");\n        }\n      "}if(u===c)return"\n        float "+a+"(int row, int col, int depth) {\n          int texR = row;\n          int texC = col * "+l+" + depth;\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+u+".0, "+i+".0);\n          return sample("+n+", uv);\n        }\n      ";if(u===l)return"\n    float "+a+"(int row, int col, int depth) {\n      int texR = row * "+r[1]+" + col;\n      int texC = depth;\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+u+".0, "+i+".0);\n      return sample("+n+", uv);\n    }\n  ";return"\n      float "+a+"(int row, int col, int depth) {\n        vec2 uv = UVfrom3D(\n            "+i+", "+u+", "+c+", "+l+", row, col, depth);\n        return sample("+n+", uv);\n      }\n  "}(t);case 4:return function(t){var e=t.shapeInfo.logicalShape,r=t.shapeInfo.texShape,n=t.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),i=r[0],u=r[1],c=e[3],l=e[2]*c,p=e[1]*l,h=o.squeezeShape(e),m=h.newShape,g=h.keptDims;if(m.length<e.length){var v=f(t,m);return"\n      "+s(v)+"\n      float "+a+"(int row, int col, int depth, int depth2) {\n        return "+a+"("+d(["row","col","depth","depth2"],g)+");\n      }\n    "}if(u===p)return"\n      float "+a+"(int row, int col, int depth, int depth2) {\n        int texR = row;\n        int texC = col * "+l+" + depth * "+c+" + depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+u+".0, "+i+".0);\n        return sample("+n+", uv);\n      }\n    ";if(u===c)return"\n      float "+a+"(int row, int col, int depth, int depth2) {\n        int texR = row * "+e[1]*e[2]+" + col * "+e[2]+" + depth;\n        int texC = depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+u+".0, "+i+".0);\n        return sample("+n+", uv);\n      }\n    ";return"\n    float "+a+"(int row, int col, int depth, int depth2) {\n      vec2 uv = UVfrom4D("+i+", "+u+", "+p+", "+l+",\n          "+c+", row, col, depth, depth2);\n      return sample("+n+", uv);\n    }\n  "}(t);default:throw new Error(a.length+"-D input sampling is not yet supported")}}r.makeShader=function(t,e,r,i){var f=n.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")?l:u,d=n.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")?p:c,m=t.map(function(t){return"uniform sampler2D "+t.name+";"}).join("\n"),g=t.map(function(t){return n=e,u=i,l=(c=r=t).name,p=c.shapeInfo.texShape,h="get"+l.charAt(0).toUpperCase()+l.slice(1)+"Flat",f=p[0],m=1===(d=p[1])&&1===f?"\n      float "+h+"(int index) {\n        return sample("+l+", halfCR);\n      }\n    ":1===d?"\n      float "+h+"(int index) {\n        vec2 uv = vec2(0.5, (float(index) + 0.5) / "+f+".0);\n        return sample("+l+", uv);\n      }\n    ":1===f?"\n      float "+h+"(int index) {\n        vec2 uv = vec2((float(index) + 0.5) / "+d+".0, 0.5);\n        return sample("+l+", uv);\n      }\n    ":"\n    float "+h+"(int index) {\n      vec2 uv = UVfrom1D("+f+", "+d+", index);\n      return sample("+l+", uv);\n    }\n  ",m+=s(r),(u||o.arraysEqual(r.shapeInfo.logicalShape,n.logicalShape))&&(m+=function(t,e,r){var n=t.shapeInfo.texShape,i=t.name,s=i.charAt(0).toUpperCase()+i.slice(1),u="get"+s+"AtOutCoords",c=a.getBroadcastDims(t.shapeInfo.logicalShape,e.logicalShape),l=t.shapeInfo.logicalShape.length,p=e.logicalShape.length,h=r&&(p>l||c.length>0),f=a.broadcastDimsAreOuter(c);if(h&&!f)return function(t,e,r,n){var o=t.shapeInfo.logicalShape.length,i=e.logicalShape.length,s="int";2===i?s="ivec2":3===i?s="ivec3":4===i&&(s="ivec4");var u,c=a.getBroadcastDims(t.shapeInfo.logicalShape,e.logicalShape),l=i-o;u=0===o?"":i<2&&c.length>=1?"coords = 0;":c.map(function(t){return"coords["+(t+l)+"] = 0;"}).join("\n");var p="";return p=i<2&&o>0?"coords":t.shapeInfo.logicalShape.map(function(t,e){return"coords["+(e+l)+"]"}).join(", "),"\n    float "+n+"() {\n      "+s+" coords = getOutputCoords();\n      "+u+"\n      return get"+r+"("+p+");\n    }\n  "}(t,e,s,u);var d=e.texShape;if(o.arraysEqual(n,d))return"\n      float "+u+"() {\n        return sample("+i+", resultUV);\n      }\n    ";var m=o.sizeFromShape(n),g="";return h&&f&&(g="\n        int mainPart = index / "+m+";\n        index -= mainPart * "+m+";\n      "),"\n    float "+u+"() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+d[0]+", "+d[1]+"));\n      int index = resTexRC.x * "+d[1]+" + resTexRC.y;\n      "+g+"\n      int texR = index / "+n[1]+";\n      int texC = index - texR * "+n[1]+";\n      vec2 uv = (vec2(texC, texR) + halfCR) /\n                 vec2("+n[1]+".0, "+n[0]+".0);\n\n      return sample("+i+", uv);\n    }\n  "}(r,n,u)),m;var r,n,u,c,l,p,h,f,d,m}).join("\n"),v=e.texShape,y=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return 1===(a=e)[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+a[1]+".0);\n      }\n    ":1===a[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+a[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+a[0]+", "+a[1]+"));\n      return resTexRC.x * "+a[1]+" + resTexRC.y;\n    }\n  ";case 2:return r=t,n=e,o.arraysEqual(r,n)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ":1===r[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+n[0]+", "+n[1]+"));\n        int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===r[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+n[0]+", "+n[1]+"));\n        int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = index / "+r[1]+";\n      int c = index - r * "+r[1]+";\n      return ivec2(r, c);\n    }\n  ";case 3:return h=e,f=(p=t)[1]*p[2],d=p[2],"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+h[0]+", "+h[1]+"));\n      int index = resTexRC.x * "+h[1]+" + resTexRC.y;\n      int r = index / "+f+";\n      index -= r * "+f+";\n      int c = index / "+d+";\n      int d = index - c * "+d+";\n      return ivec3(r, c, d);\n    }\n  ";case 4:return s=e,u=(i=t)[3],c=i[2]*u,l=i[1]*c,"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+s[0]+", "+s[1]+"));\n      int index = resTexRC.x * "+s[1]+" + resTexRC.y;\n\n      int r = index / "+l+";\n      index -= r * "+l+";\n\n      int c = index / "+c+";\n      index -= c * "+c+";\n\n      int d = index / "+u+";\n      int d2 = index - d * "+u+";\n\n      return ivec4(r, c, d, d2);\n    }\n  ";default:throw new Error(t.length+"-D output sampling is not yet supported")}var r,n,a,i,s,u,c,l,p,h,f,d}(e.logicalShape,v);return[h,f,d,m,y,g,r].join("\n")};var u="\n  uniform float NaN;\n\n  const vec4 floatDeltas = vec4(\n      1.0,\n      1.0 / 255.0,\n      1.0 / (255.0 * 255.0),\n      1.0 / (255.0 * 255.0 * 255.0)\n  );\n  const float minValue = "+i.FLOAT_MIN+".0;\n  const float maxValue = "+i.FLOAT_MAX+".0;\n  const float range = (maxValue - minValue) / 255.0;\n  const vec2 dotRange = vec2(1.0, range);\n\n  float sample(sampler2D texture, vec2 uv) {\n    vec4 sampleValue = texture2D(texture, uv);\n    if (all(equal(sampleValue, vec4("+i.BYTE_NAN_VALUE+")))) {\n      return NaN;\n    }\n\n    vec4 encValue = floor(sampleValue * 255.0 + 0.5);\n    float decodedValue = dot(encValue, floatDeltas);\n    return dot(vec2(minValue, decodedValue), dotRange);\n  }\n",c="\n  const vec4 floatPowers = vec4(\n    1.0,\n    255.0,\n    255.0 * 255.0,\n    255.0 * 255.0 * 255.0\n  );\n  const vec2 recipRange = vec2(1.0/range);\n  const vec2 recipRange255 = vec2(1.0/(maxValue - minValue));\n\n  void setOutput(float decodedValue) {\n    if (isNaN(decodedValue)) {\n      gl_FragColor = vec4("+i.BYTE_NAN_VALUE+");\n      return;\n    }\n\n    float a = dot(vec2(decodedValue, -minValue), recipRange);\n    float b = fract(a) * 255.0;\n    float c = fract(b) * 255.0;\n    float d = fract(c) * 255.0;\n    gl_FragColor = floor(vec4(a, b, c, d)) / 255.0;\n\n    // TODO(dsmilkov): Version above gets better accuracy but probably slower\n    // than the version below. Benchmark to determine if the accuracy is worth\n    // the cost.\n\n    // float normValue = dot(vec2(decodedValue, -minValue), recipRange255);\n    // vec4 f = normValue * floatPowers;\n    // gl_FragColor = floor(fract(f) * 255.0) / 255.0;\n  }\n",l="\n  float sample(sampler2D texture, vec2 uv) {\n    return texture2D(texture, uv).r;\n  }\n",p="\n  void setOutput(float val) {\n    gl_FragColor = vec4(val, 0, 0, 0);\n  }\n",h="\n  precision highp float;\n  precision highp int;\n  varying vec2 resultUV;\n  const vec2 halfCR = vec2(0.5, 0.5);\n\n  bool isNaN(float val) {\n    float v1 = val * val;\n    float v2 = val * val;\n    return v1 == v2 ? false : true;\n  }\n\n  bool hasNaN(vec4 values) {\n    vec4 v1 = values * values;\n    vec4 v2 = values * values;\n    return any(notEqual(v1, v2));\n  }\n\n  float getNaN(vec4 values) {\n    return dot(vec4(1), values);\n  }\n\n  int round(float value) {\n    return int(floor(value + 0.5));\n  }\n\n  int imod(int x, int y) {\n    return x - y * (x / y);\n  }\n\n  const vec2 randomConst = vec2(\n    23.14069263277926, // e^pi (Gelfond's constant)\n     2.665144142690225 // 2^sqrt(2) (Gelfond–Schneider constant)\n  );\n\n  float random(float seed) {\n      return fract(cos(dot(resultUV * seed, randomConst)) * 12345.6789);\n  }\n\n  \nvec2 UVfrom1D(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom2D(int texNumR, int texNumC, int numC, int row, int col) {\n  int index = row * numC + col;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom3D(int texNumR, int texNumC, int stride0,\n    int stride1, int row, int col, int depth) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom4D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int row, int col, int depth,\n    int depth2) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth * stride2 + depth2;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n";function f(t,e){var r=JSON.parse(JSON.stringify(t));return r.shapeInfo.logicalShape=e,r}function d(t,e){return e.map(function(e){return t[e]}).join(", ")}r.getCoordsDataType=function(t){if(1===t)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";throw Error("GPU for rank "+t+" is not yet supported")}},{"../../../environment":336,"../../../util":448,"../../broadcast_util":418,"./tex_util":410}],409:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./shader_compiler"),o=function(){function t(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var e=n.getCoordsDataType(this.rank),r=function(t){{if(1===t)return"sourceLoc";if(2===t)return"sourceLoc.x, sourceLoc.y";if(3===t)return"sourceLoc.x, sourceLoc.y, sourceLoc.z";if(4===t)return"sourceLoc.x, sourceLoc.y, sourceLoc.z, sourceLoc.w";throw Error("Slicing for rank "+t+" is not yet supported")}}(this.rank);this.userCode="\n      uniform "+e+" start;\n\n      void main() {\n        "+e+" sourceLoc = start + getOutputCoords();\n        setOutput(getSource("+r+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,n){if(null!=e.startLoc||(e.startLoc=r.getUniformLocationNoThrow(n,"start"),null!=e.startLoc))if(1===e.rank)r.gl.uniform1i(e.startLoc,t[0]);else if(2===e.rank)r.gl.uniform2i(e.startLoc,t[0],t[1]);else if(3===e.rank)r.gl.uniform3i(e.startLoc,t[0],t[1],t[2]);else{if(4!==e.rank)throw Error("Slicing for rank "+e.rank+" is not yet supported");r.gl.uniform4i(e.startLoc,t[0],t[1],t[2],t[3])}}},t}();r.SliceProgram=o},{"./shader_compiler":408}],410:[function(t,e,r){"use strict";var n;function o(t,e){return t*e}function a(t,e){if(t%e!=0)throw new Error("unpackedSize ("+t+") must be a multiple of "+e);return t/e}Object.defineProperty(r,"__esModule",{value:!0}),(n=r.TextureType||(r.TextureType={}))[n.FLOAT=0]="FLOAT",n[n.UNSIGNED_BYTE=1]="UNSIGNED_BYTE",r.getUnpackedMatrixTextureShapeWidthHeight=function(t,e){return[e,t]},r.getUnpackedArraySizeFromMatrixSize=o,r.getColorMatrixTextureShapeWidthHeight=function(t,e){return[4*e,t]},r.getMatrixSizeFromUnpackedArraySize=a,r.encodeMatrixToUnpackedArray=function(t,e,r){var n=o(t.length,r);if(e.length<n)throw new Error("unpackedArray length ("+e.length+") must be >= "+n);for(var a=0,i=0;i<t.length;++i)e[a]=t[i],a+=r},r.FLOAT_MAX=2e4,r.FLOAT_MIN=-r.FLOAT_MAX;var i=(r.FLOAT_MAX-r.FLOAT_MIN)/255,s=[1,1/255,1/65025,1/16581375],u=[1,255,65025];function c(t,e){return[Math.ceil(e/2),Math.ceil(t/2)]}function l(t,e){var r=c(t,e);return r[0]*r[1]*4}r.BYTE_NAN_VALUE=0,r.encodeFloatArray=function(t){for(var e=new Uint8Array(4*t.length),n=function(n){var o=t[n/4];if(isNaN(o))return e[n]=r.BYTE_NAN_VALUE,e[n+1]=r.BYTE_NAN_VALUE,e[n+2]=r.BYTE_NAN_VALUE,e[n+3]=r.BYTE_NAN_VALUE,"continue";var a=(o-r.FLOAT_MIN)/i,s=u.map(function(t){return t*a}).map(function(t){return Math.floor(t%1*255)});e[n]=Math.floor(a),e[n+1]=s[0],e[n+2]=s[1],e[n+3]=s[2]},o=0;o<e.length;o+=4)n(o);return e},r.decodeToFloatArray=function(t){for(var e=new Float32Array(t.length/4),n=function(n){if(t[n]===r.BYTE_NAN_VALUE&&t[n+1]===r.BYTE_NAN_VALUE&&t[n+2]===r.BYTE_NAN_VALUE&&t[n+3]===r.BYTE_NAN_VALUE)return e[n/4]=NaN,"continue";var o=0;s.forEach(function(e,r){o+=e*t[n+r]});var a=o*i+r.FLOAT_MIN;e[n/4]=a},o=0;o<t.length;o+=4)n(o);return e},r.decodeMatrixFromUnpackedArray=function(t,e,r){var n=a(t.length,r);if(e.length<n)throw new Error("matrix length ("+e.length+") must be >= "+n);for(var o=0,i=0;i<t.length;i+=r)e[o++]=t[i]},r.decodeMatrixFromUnpackedColorRGBAArray=function(t,e,r){var n=t.length*r/4;if(e.length<n)throw new Error("matrix length ("+e.length+") must be >= "+n);for(var o=0,a=0;a<t.length;a+=4)for(var i=0;i<r;i++)e[o++]=t[a+i]},r.getPackedMatrixTextureShapeWidthHeight=c,r.getPackedRGBAArraySizeFromMatrixShape=l,r.encodeMatrixToPackedRGBA=function(t,e,r,n){var o=l(e,r);if(n.length<o)throw new Error("packedRGBA length ("+n.length+") must be >= "+o);for(var a=c(e,r),i=a[0],s=a[1],u=r%2==1,p=e%2==1,h=Math.floor(r/2),f=Math.floor(e/2),d=u?4:0,m=r,g=0,v=0;v<f;++v){for(var y=2*v*r,_=0;_<h;++_){var b=y+2*_;n[g]=t[b],n[g+1]=t[b+1],n[g+2]=t[b+m],n[g+3]=t[b+m+1],g+=4}g+=d}if(u){b=r-1,g=4*(i-1);var x=2*r;for(d=4*i,v=0;v<f;++v)n[g]=t[b],n[g+2]=t[b+r],b+=x,g+=d}if(p)for(b=(e-1)*r,g=(s-1)*i*4,_=0;_<h;++_)n[g++]=t[b++],n[g++]=t[b++],g+=2;return u&&p&&(n[n.length-4]=t[t.length-1]),n},r.decodeMatrixFromPackedRGBA=function(t,e,r,n){var o=e*r;if(o<n.length)throw new Error("matrix length ("+n.length+") must be >= "+o);for(var a=r%2==1,i=e%2==1,s=Math.floor(r/2),u=Math.floor(e/2),l=c(e,r),p=l[0],h=l[1],f=a?4:0,d=r+(a?1:0),m=0,g=0,v=r,y=0;y<u;++y){for(var _=0;_<s;++_)n[g++]=t[m++],n[g++]=t[m++],n[v++]=t[m++],n[v++]=t[m++];m+=f,g+=d,v+=d}if(a){m=4*(p-1);var b=r-1;for(f=4*p,d=2*r,y=0;y<u;++y)n[b]=t[m],n[b+r]=t[m+2],m+=f,b+=d}if(i)for(m=(h-1)*p*4,b=(e-1)*r,_=0;_<s;++_)n[b++]=t[m++],n[b++]=t[m++],m+=2;return a&&i&&(n[n.length-1]=t[t.length-4]),n}},{}],411:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./tex_util"),o=function(){function t(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.allocatedTextures=[],this.usedTextureCount={}}return t.prototype.acquireTexture=function(t,e){void 0===e&&(e=n.TextureType.FLOAT);var r=a(t,e);if(r in this.freeTextures||(this.freeTextures[r]=[]),r in this.usedTextureCount||(this.usedTextureCount[r]=0),this.usedTextureCount[r]++,this.freeTextures[r].length>0)return this.numFreeTextures--,this.numUsedTextures++,this.log(),this.freeTextures[r].shift();this.numUsedTextures++,this.log();var o=this.gpgpu.createMatrixTexture(t[0],t[1]);return this.allocatedTextures.push(o),o},t.prototype.releaseTexture=function(t,e,r){void 0===r&&(r=n.TextureType.FLOAT);var o=a(e,r);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(t),this.numFreeTextures++,this.numUsedTextures--,this.usedTextureCount[o]--,this.log()},t.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+t+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var t=this;null!=this.allocatedTextures&&(this.allocatedTextures.forEach(function(e){t.gpgpu.deleteMatrixTexture(e)}),this.freeTextures=null,this.allocatedTextures=null,this.usedTextureCount=null,this.numUsedTextures=0,this.numFreeTextures=0)},t}();function a(t,e){return t[0]+"_"+t[1]+"_"+e}r.TextureManager=o},{"./tex_util":410}],412:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./shader_compiler"),o=function(){return function(t,e){this.variableNames=["A"];for(var r=new Array(t.length),o=0;o<r.length;o++)r[o]=t[o]*e[o];this.outputShape=r,this.rank=r.length;var a=n.getCoordsDataType(this.rank),i=function(t){var e=t.length;if(e>4)throw Error("Tile for rank "+e+" is not yet supported");if(1===e)return"imod(resRC, "+t[0]+")";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],n=[],o=0;o<t.length;o++)n.push("imod("+r[o]+", "+t[o]+")");return n.join()}(t);this.userCode="\n      void main() {\n        "+a+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "}}();r.TileProgram=o},{"./shader_compiler":408}],413:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./shader_compiler"),o=function(){return function(t,e){this.variableNames=["A"];for(var r=new Array(t.length),o=0;o<r.length;o++)r[o]=t[e[o]];this.outputShape=r,this.rank=r.length;var a=n.getCoordsDataType(this.rank),i=function(t){var e=t.length;if(e>4)throw Error("Transpose for rank "+e+" is not yet supported");for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],n=new Array(e),o=0;o<t.length;o++)n[t[o]]=r[o];return n.join()}(e);this.userCode="\n    void main() {\n      "+a+" resRC = getOutputCoords();\n      setOutput(getA("+i+"));\n    }\n    "}}();r.TransposeProgram=o},{"./shader_compiler":408}],414:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return function(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      float unaryOperation(float x) {\n        "+e+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "}}();r.UnaryOpProgram=n;var o="\n  if (isNaN(x)) return x;\n";r.ABS="\n  return abs(x);\n",r.RELU=o+"\n  return (x < 0.0) ? 0.0 : x;\n",r.ELU="\n  return (x >= 0.0) ? x : (exp(x) - 1.0);\n",r.ELU_DER="\n  return (x >= 0.0) ? 1.0 : exp(x);\n",r.SELU="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = 1.7580993408473768599402175208123;\n  float scale = 1.0507009873554804934193349852946;\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",r.LEAKY_RELU=function(t){return"\n    return (x >= 0.0) ? x : "+t+" * x;\n  "},r.STEP=function(t){return void 0===t&&(t=0),o+"\n    return x > 0.0 ? 1.0 : float("+t+");\n  "},r.NEG="\n  return -x;\n",r.CEIL="\n  return ceil(x);\n",r.FLOOR="\n  return floor(x);\n",r.EXP="\n  return exp(x);\n",r.LOG="\n  return log(x);\n",r.SQRT=o+"\n  return sqrt(x);\n",r.SIGMOID="\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",r.SIN=o+"\n  return sin(x);\n",r.COS=o+"\n  return cos(x);\n",r.TAN="\n  return tan(x);\n",r.ASIN=o+"\n  return asin(x);\n",r.ACOS=o+"\n  return acos(x);\n",r.ATAN=o+"\n  return atan(x);\n",r.SINH="\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n",r.COSH="\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n",r.TANH="\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n",r.SQUARE="\n  return x * x;\n",r.TO_INT="\n  return float(int(x));\n"},{}],415:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=null,o=t("../../../util"),a=t("../../../environment");function i(t,e){var r,n=a.ENV.get("WEBGL_VERSION");if(2===n?r=t.getContext("webgl2",e):1===n&&(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)),0===n||null==r)throw new Error("This browser does not support WebGL.");return r}function s(t,e){var r=e();return c(t),r}r.createWebGLRenderingContext=function(t){var e=document.createElement("canvas");return e.width=1,e.height=1,i(e,t)},r.createWebGLRenderingContextFromCanvas=i,r.callAndCheck=s;var u=!1;function c(t){if(u){var e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+l(t,e))}}function l(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}r.enableDebugWebGLErrorChecking=function(t){u=t},r.checkWebGLError=c,r.getWebGLErrorMessage=l,r.getExtensionOrThrow=function(t,e){return m(t,function(){return t.getExtension(e)},'Extension "'+e+'" not supported on this browser.')},r.createVertexShader=function(t,e){var r=m(t,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(s(t,function(){return t.shaderSource(r,e)}),s(t,function(){return t.compileShader(r)}),!1===t.getShaderParameter(r,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r},r.createFragmentShader=function(t,e){var r=m(t,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(s(t,function(){return t.shaderSource(r,e)}),s(t,function(){return t.compileShader(r)}),!1===t.getShaderParameter(r,t.COMPILE_STATUS))throw function(t,e){var r=p.exec(e);if(null==r)return console.log("Couldn't parse line number in error: "+e),void console.log(t);for(var n=+r[1],a=t.split("\n"),i=a.length.toString().length+2,s=a.map(function(t,e){return o.rightPad((e+1).toString(),i)+t}),u=0,c=0;c<s.length;c++)u=Math.max(s[c].length,u);var l=s.slice(0,n-1),h=s.slice(n-1,n),f=s.slice(n);console.log(l.join("\n")),console.log(e.split("\n")[0]),console.log("%c "+o.rightPad(h[0],u),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}(e,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r};var p=/ERROR: [0-9]+:([0-9]+):/g;function h(t){return null!=n?n:n=s(t,function(){return t.getParameter(t.MAX_TEXTURE_SIZE)})}function f(t,e,r){g(t,r),s(t,function(){return t.activeTexture(t.TEXTURE0+r)}),s(t,function(){return t.bindTexture(t.TEXTURE_2D,e)})}function d(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function m(t,e,r){var n=s(t,function(){return e()});if(null==n)throw new Error(r);return n}function g(t,e){var r=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,n=e+t.TEXTURE0;if(n<t.TEXTURE0||n>r)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+r+"]")+".")}r.createProgram=function(t){return m(t,function(){return t.createProgram()},"Unable to create WebGLProgram.")},r.linkProgram=function(t,e){if(s(t,function(){return t.linkProgram(e)}),!1===t.getProgramParameter(e,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")},r.validateProgram=function(t,e){if(s(t,function(){return t.validateProgram(e)}),!1===t.getProgramParameter(e,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")},r.createStaticVertexBuffer=function(t,e){var r=m(t,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return s(t,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),s(t,function(){return t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)}),r},r.createStaticIndexBuffer=function(t,e){var r=m(t,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return s(t,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)}),s(t,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)}),r},r.queryMaxTextureSize=h,r.getChannelsPerTexture=function(){return a.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")&&2===a.ENV.get("WEBGL_VERSION")?1:4},r.createTexture=function(t){return m(t,function(){return t.createTexture()},"Unable to create WebGLTexture.")},r.validateTextureSize=function(t,e,r){var n=h(t);if(e<=0||r<=0){var o="["+e+"x"+r+"]";throw new Error("Requested texture size "+o+" is invalid.")}if(e>n||r>n)throw o="["+e+"x"+r+"]",new Error("Requested texture size "+o+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")},r.createFramebuffer=function(t){return m(t,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")},r.bindVertexBufferToProgramAttribute=function(t,e,r,n,o,a,i,u){var c=-1;-1!==(c=null!=u&&r in u?u[r]:t.getAttribLocation(e,r))&&(s(t,function(){return t.bindBuffer(t.ARRAY_BUFFER,n)}),s(t,function(){return t.vertexAttribPointer(c,o,t.FLOAT,!1,a,i)}),s(t,function(){return t.enableVertexAttribArray(c)}))},r.bindTextureUnit=f,r.unbindTextureUnit=function(t,e){g(t,e),s(t,function(){return t.activeTexture(t.TEXTURE0+e)}),s(t,function(){return t.bindTexture(t.TEXTURE_2D,null)})},r.getProgramUniformLocationOrThrow=function(t,e,r){return m(t,function(){return t.getUniformLocation(e,r)},'uniform "'+r+'" not present in program.')},r.getProgramUniformLocation=function(t,e,r){return t.getUniformLocation(e,r)},r.bindTextureToProgramUniformSampler=function(t,e,r,n,o){s(t,function(){return f(t,r,o)}),s(t,function(){return t.uniform1i(n,o)})},r.bindCanvasToFramebuffer=function(t){s(t,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),s(t,function(){return t.viewport(0,0,t.canvas.width,t.canvas.height)}),s(t,function(){return t.scissor(0,0,t.canvas.width,t.canvas.height)})},r.bindColorTextureToFramebuffer=function(t,e,r){s(t,function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)}),s(t,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)})},r.unbindColorTextureFromFramebuffer=function(t,e){s(t,function(){return t.bindFramebuffer(t.FRAMEBUFFER,e)}),s(t,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})},r.validateFramebuffer=function(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+d(t,e))},r.getFramebufferErrorMessage=d,r.getTextureShapeFromLogicalShape=function(t,e){2!==e.length&&(e=o.squeezeShape(e).newShape);var r=h(t),n=o.sizeFromShape(e);return e.length<=1&&n<=r?[n,1]:2===e.length&&e[0]<=r&&e[1]<=r?e:3===e.length&&e[0]<=r&&e[1]*e[2]<=r?[e[0],e[1]*e[2]]:4===e.length&&e[0]<=r&&e[1]*e[2]*e[3]<=r?[e[0],e[1]*e[2]*e[3]]:o.sizeToSquarishShape(n)}},{"../../../environment":336,"../../../util":448}],416:[function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var o=t("../environment"),a=t("../util"),i=t("./decorators"),s=function(){function t(){}return t.batchNormalization2D=function(t,e,r,n,i,s){return void 0===n&&(n=.001),a.assert(2===t.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+t.rank+"."),a.assert(2===e.rank||1===e.rank,"Error in batchNormalization2D: mean must be rank 2 or rank 1 but got rank "+e.rank+"."),a.assert(2===r.rank||1===r.rank,"Error in batchNormalization2D: variance must be rank 2 or rank 1 but got rank "+r.rank+"."),null!=i&&a.assert(2===i.rank||1===i.rank,"Error in batchNormalization2D: scale must be rank 2 or rank 1 but got rank "+i.rank+"."),null!=s&&a.assert(2===s.rank||1===s.rank,"Error in batchNormalization2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."),o.ENV.engine.executeKernel("BatchNorm2D",{inputs:{x:t,mean:e,variance:r,scale:i,offset:s},args:{varianceEpsilon:n}})},t.batchNormalization3D=function(t,e,r,n,i,s){return void 0===n&&(n=.001),a.assert(3===t.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+t.rank+"."),a.assert(3===e.rank||1===e.rank,"Error in batchNormalization3D: mean must be rank 3 or rank 1 but got rank "+e.rank+"."),a.assert(3===r.rank||1===r.rank,"Error in batchNormalization3D: variance must be rank 3 or rank 1 but got rank "+r.rank+"."),null!=i&&a.assert(3===i.rank||1===i.rank,"Error in batchNormalization3D: scale must be rank 3 or rank 1 but got rank "+i.rank+"."),null!=s&&a.assert(3===s.rank||1===s.rank,"Error in batchNormalization3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."),o.ENV.engine.executeKernel("BatchNorm3D",{inputs:{x:t,mean:e,variance:r,scale:i,offset:s},args:{varianceEpsilon:n}})},t.batchNormalization4D=function(t,e,r,n,i,s){return void 0===n&&(n=.001),a.assert(4===t.rank,"Error in batchNormalization4D: x must be rank 4 but got rank "+t.rank+"."),a.assert(4===e.rank||1===e.rank,"Error in batchNormalization4D: mean must be rank 4 or rank 1 but got rank "+e.rank+"."),a.assert(4===r.rank||1===r.rank,"Error in batchNormalization4D: variance must be rank 4 or rank 1 but got rank "+r.rank+"."),null!=i&&a.assert(4===i.rank||1===i.rank,"Error in batchNormalization4D: scale must be rank 4 or rank 1 but got rank "+i.rank+"."),null!=s&&a.assert(4===s.rank||1===s.rank,"Error in batchNormalization4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."),o.ENV.engine.executeKernel("BatchNorm4D",{inputs:{x:t,mean:e,variance:r,scale:i,offset:s},args:{varianceEpsilon:n}})},t.batchNormalization=function(e,r,n,o,a,i){if(void 0===o&&(o=.001),0===e.rank)throw new Error("Batchnorm for scalar is not supported");if(1===e.rank)throw new Error("Batchnorm for rank 1 is not yet implemented");if(2===e.rank)return t.batchNormalization2D(e,r,n,o,a,i);if(3===e.rank)return t.batchNormalization3D(e,r,n,o,a,i);if(4===e.rank)return t.batchNormalization4D(e,r,n,o,a,i);throw new Error("Batchnorm for rank "+e.rank+" is not yet implemented")},n([i.operation],t,"batchNormalization2D",null),n([i.operation],t,"batchNormalization3D",null),n([i.operation],t,"batchNormalization4D",null),t}();r.Ops=s},{"../environment":336,"../util":448,"./decorators":425}],417:[function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var o=t("../environment"),a=t("../util"),i=t("./broadcast_util"),s=t("./decorators"),u=t("./ndarray"),c=function(){function t(){}return t.add=function(t,e){a.assertTypesMatch(t,e);var r=i.assertAndGetBroadcastShape(t.shape,e.shape);return o.ENV.engine.executeKernel("Add",{inputs:{a:t,b:e}},function(n,o){return{a:function(){var e=n,o=i.getReductionAxes(t.shape,r);return o.length>0&&(e=e.sum(o)),e.reshape(t.shape)},b:function(){var t=n,o=i.getReductionAxes(e.shape,r);return o.length>0&&(t=t.sum(o)),t.reshape(e.shape)}}})},t.addStrict=function(t,e){return a.assertShapesMatch(t.shape,e.shape,"Error in addStrict: "),t.add(e)},t.sub=function(t,e){a.assertTypesMatch(t,e);var r=i.assertAndGetBroadcastShape(t.shape,e.shape);return o.ENV.engine.executeKernel("Sub",{inputs:{a:t,b:e}},function(n,o){return{a:function(){var e=n,o=i.getReductionAxes(t.shape,r);return o.length>0&&(e=e.sum(o)),e.reshape(t.shape)},b:function(){var t=n,o=i.getReductionAxes(e.shape,r);return o.length>0&&(t=t.sum(o)),t.neg().reshape(e.shape)}}})},t.subStrict=function(t,e){return a.assertShapesMatch(t.shape,e.shape,"Error in subStrict: "),t.sub(e)},t.pow=function(t,e){a.assert("int32"===e.dtype,"only supports int32 data type for the exponent parameter."),i.assertAndGetBroadcastShape(t.shape,e.shape);return o.ENV.engine.executeKernel("Pow",{inputs:{base:t,exp:e}},function(r,n){if(!a.arraysEqual(t.shape,e.shape))throw new Error("Gradient of pow not yet supported for broadcasted shapes.");return{base:function(){var n=e.toFloat().mul(t.pow(e.sub(u.Scalar.new(1,"int32"))).toFloat());return r.mul(n)},exp:function(){throw new Error("Backprop through exponent of math.pow not implemented yet.")}}})},t.powStrict=function(t,e){return a.assertShapesMatch(t.shape,e.shape,"Error in powStrict: "),t.pow(e)},t.mul=function(t,e){a.assertTypesMatch(t,e);var r=i.assertAndGetBroadcastShape(t.shape,e.shape);return o.ENV.engine.executeKernel("Mul",{inputs:{a:t,b:e}},function(n,o){return{a:function(){var o=n.mul(e.toFloat()),a=i.getReductionAxes(t.shape,r);return a.length>0?o.sum(a).reshape(t.shape):o},b:function(){var o=n.mul(t.toFloat()),a=i.getReductionAxes(e.shape,r);return a.length>0?o.sum(a).reshape(e.shape):o}}})},t.elementWiseMul=function(t,e){return t.mulStrict(e)},t.mulStrict=function(t,e){return a.assertShapesMatch(t.shape,e.shape,"Error in multiplyStrict: "),t.mul(e)},t.div=function(t,e){var r=i.assertAndGetBroadcastShape(t.shape,e.shape);return o.ENV.engine.executeKernel("Div",{inputs:{a:t,b:e}},function(n,o){return{a:function(){var o=n.div(e.toFloat()),a=i.getReductionAxes(t.shape,r);return a.length>0?o.sum(a).reshape(t.shape):o},b:function(){var o=n.mul(t.toFloat()),a=i.getReductionAxes(e.shape,r);a.length>0&&(o=o.sum(a).reshape(e.shape));var s=e.square();return o.div(s.toFloat()).neg()}}})},t.divStrict=function(t,e){return a.assertShapesMatch(t.shape,e.shape,"Error in divideStrict: "),t.div(e)},t.scalarDividedByArray=function(t,e){return a.assert(1===t.size,"Error in scalarDividedByArray: first argument must be rank 0, but got NDArray of rank "+t.rank+"."),t.div(e)},t.arrayDividedByScalar=function(t,e){return a.assert(1===e.size,"Error in arrayDividedByScalar: second argument must be rank 0, but got NDArray of rank "+e.rank+"."),t.div(e)},t.minimum=function(t,e){return a.assertTypesMatch(t,e),i.assertAndGetBroadcastShape(t.shape,e.shape),o.ENV.engine.executeKernel("Minimum",{inputs:{a:t,b:e}})},t.minimumStrict=function(t,e){return a.assertShapesMatch(t.shape,e.shape,"Error in minimumStrict: "),t.minimum(e)},t.maximum=function(t,e){return a.assertTypesMatch(t,e),i.assertAndGetBroadcastShape(t.shape,e.shape),o.ENV.engine.executeKernel("Maximum",{inputs:{a:t,b:e}})},t.maximumStrict=function(t,e){return a.assertShapesMatch(t.shape,e.shape,"Error in minimumStrict: "),t.maximum(e)},n([s.operation],t,"add",null),n([s.operation],t,"addStrict",null),n([s.operation],t,"sub",null),n([s.operation],t,"subStrict",null),n([s.operation],t,"pow",null),n([s.operation],t,"powStrict",null),n([s.operation],t,"mul",null),n([s.operation],t,"elementWiseMul",null),n([s.operation],t,"mulStrict",null),n([s.operation],t,"div",null),n([s.operation],t,"divStrict",null),n([s.operation],t,"scalarDividedByArray",null),n([s.operation],t,"arrayDividedByScalar",null),n([s.operation],t,"minimum",null),n([s.operation],t,"minimumStrict",null),n([s.operation],t,"maximum",null),n([s.operation],t,"maximumStrict",null),t}();r.Ops=c},{"../environment":336,"../util":448,"./broadcast_util":418,"./decorators":425,"./ndarray":431}],418:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getBroadcastDims=function(t,e){for(var r=t.length,n=[],o=0;o<r;o++){var a=r-1-o,i=t[a]||1;(e[e.length-1-o]||1)>1&&1===i&&n.unshift(a)}return n},r.getReductionAxes=function(t,e){for(var r=[],n=0;n<e.length;n++){var o=t[t.length-n-1],a=e.length-n-1,i=e[a];(null==o||1===o&&i>1)&&r.unshift(a)}return r},r.broadcastDimsAreOuter=function(t){for(var e=0;e<t.length;e++)if(t[e]!==e)return!1;return!0},r.assertAndGetBroadcastShape=function(t,e){for(var r=[],n="Operands could not be broadcast together with shapes "+t+" and "+e+".",o=Math.max(t.length,e.length),a=0;a<o;a++){var i=t[t.length-a-1]||1,s=e[e.length-a-1]||1;if(i>1&&s>1&&i!==s)throw Error(n);r.unshift(Math.max(i,s))}return r}},{}],419:[function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var o=t("../environment"),a=t("../util"),i=t("./broadcast_util"),s=t("./decorators"),u=function(){function t(){}return t.notEqual=function(t,e){return a.assertTypesMatch(t,e),i.assertAndGetBroadcastShape(t.shape,e.shape),o.ENV.engine.executeKernel("NotEqual",{inputs:{a:t,b:e}})},t.notEqualStrict=function(t,e){return a.assertShapesMatch(t.shape,e.shape,"Error in notEqualStrict: "),t.notEqual(e)},t.less=function(t,e){return a.assertTypesMatch(t,e),i.assertAndGetBroadcastShape(t.shape,e.shape),o.ENV.engine.executeKernel("Less",{inputs:{a:t,b:e}})},t.lessStrict=function(t,e){return a.assertShapesMatch(t.shape,e.shape,"Error in lessStrict: "),t.less(e)},t.equal=function(t,e){return a.assertTypesMatch(t,e),i.assertAndGetBroadcastShape(t.shape,e.shape),o.ENV.engine.executeKernel("Equal",{inputs:{a:t,b:e}})},t.equalStrict=function(t,e){return a.assertShapesMatch(t.shape,e.shape,"Error in equalStrict: "),t.equal(e)},t.lessEqual=function(t,e){return a.assertTypesMatch(t,e),i.assertAndGetBroadcastShape(t.shape,e.shape),o.ENV.engine.executeKernel("LessEqual",{inputs:{a:t,b:e}})},t.lessEqualStrict=function(t,e){return a.assertShapesMatch(t.shape,e.shape,"Error in lessEqualStrict: "),t.lessEqual(e)},t.greater=function(t,e){return a.assertTypesMatch(t,e),i.assertAndGetBroadcastShape(t.shape,e.shape),o.ENV.engine.executeKernel("Greater",{inputs:{a:t,b:e}})},t.greaterStrict=function(t,e){return a.assertShapesMatch(t.shape,e.shape,"Error in greaterStrict: "),t.greater(e)},t.greaterEqual=function(t,e){return a.assertTypesMatch(t,e),i.assertAndGetBroadcastShape(t.shape,e.shape),o.ENV.engine.executeKernel("GreaterEqual",{inputs:{a:t,b:e}})},t.greaterEqualStrict=function(t,e){return a.assertShapesMatch(t.shape,e.shape,"Error in greaterEqualStrict: "),t.greaterEqual(e)},n([s.operation],t,"notEqual",null),n([s.operation],t,"notEqualStrict",null),n([s.operation],t,"less",null),n([s.operation],t,"lessStrict",null),n([s.operation],t,"equal",null),n([s.operation],t,"equalStrict",null),n([s.operation],t,"lessEqual",null),n([s.operation],t,"lessEqualStrict",null),n([s.operation],t,"greater",null),n([s.operation],t,"greaterStrict",null),n([s.operation],t,"greaterEqual",null),n([s.operation],t,"greaterEqualStrict",null),t}();r.Ops=u},{"../environment":336,"../util":448,"./broadcast_util":418,"./decorators":425}],420:[function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var o=t("../environment"),a=t("../util"),i=t("./concat_util"),s=t("./decorators"),u=function(){function t(){}return t.concat1D=function(e,r){return t.concat(e,r,0)},t.concat2D=function(e,r,n){return t.concat(e,r,n)},t.concat3D=function(e,r,n){return t.concat(e,r,n)},t.concat4D=function(e,r,n){return t.concat(e,r,n)},t.concat=function(t,e,r){i.assertParams(t.shape,e.shape,r);var n=i.computeOutShape(t.shape,e.shape,r),s=t.as2D(-1,a.sizeFromShape(t.shape.slice(r))),u=e.as2D(-1,a.sizeFromShape(e.shape.slice(r))),c=i.computeGradientSliceShapes(s.shape,u.shape),l=c.aBegin,p=c.aSize,h=c.bBegin,f=c.bSize;return o.ENV.engine.executeKernel("Concat",{inputs:{a:s,b:u}},function(t){return{a:function(){return t.slice(l,p)},b:function(){return t.slice(h,f)}}}).reshape(n)},n([s.operation],t,"concat1D",null),n([s.operation],t,"concat2D",null),n([s.operation],t,"concat3D",null),n([s.operation],t,"concat4D",null),n([s.operation],t,"concat",null),t}();r.Ops=u},{"../environment":336,"../util":448,"./concat_util":421,"./decorators":425}],421:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../util");r.assertParams=function(t,e,r){var o=t.length,a=e.length;n.assert(t.length===e.length,"Error in concat"+o+"D: rank of x1 ("+o+") and x2 ("+a+") must be the same."),n.assert(r>=0&&r<o,"Error in concat"+o+"D: axis must be between 0 and "+(o-1)+".");for(var i=0;i<o;i++)n.assert(i===r||t[i]===e[i],"Error in concat"+o+"D: Shape ("+t+") does not match ("+e+") along the non-concatenated axis "+i+".")},r.computeOutShape1D=function(t,e){n.assert(1===t.length&&1===e.length,"x1 and x2 should be 1d array.");var r=t.slice();return r[0]+=e[0],r},r.computeOutShape=function(t,e,r){n.assert(t.length===e.length,"x1 and x2 should have the same rank.");var o=t.slice();return o[r]+=e[r],o},r.computeGradientSliceShapes=function(t,e){return{aBegin:[0,0],aSize:t,bBegin:[0,t[1]],bSize:e}}},{"../util":448}],422:[function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var o=t("../environment"),a=t("../util"),i=t("./conv_util"),s=t("./decorators"),u=function(){function t(){}return t.conv1d=function(e,r,n,o,i,s){var u=e,c=!1;2===e.rank&&(c=!0,u=e.as3D(1,e.shape[0],e.shape[1])),a.assert(3===u.rank,"Error in conv1d: input must be rank 3, but got rank "+u.rank+"."),a.assert(3===r.rank,"Error in conv1d: filter must be rank 3, but got rank "+r.rank+"."),null!=n&&a.assert(1===n.rank,"Error in conv1d: bias must be rank 1, but got rank "+n.rank+"."),null!=s&&a.assert(a.isInt(i),"Error in conv1d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+i+"."),a.assert(u.shape[2]===r.shape[1],"Error in conv1d: depth of input ("+u.shape[2]+") must match  input depth for filter "+r.shape[1]+".");var l=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]),p=u.as4D(u.shape[0],1,u.shape[1],u.shape[2]),h=[1,o],f=t.conv2d(p,l,n,h,i,s);return c?f.as2D(f.shape[2],f.shape[3]):f.as3D(f.shape[0],f.shape[2],f.shape[3])},t.conv2d=function(e,r,n,s,u,c){var l=e,p=!1;3===e.rank&&(p=!0,l=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),a.assert(4===l.rank,"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."),a.assert(4===r.rank,"Error in conv2d: filter must be rank 4, but got rank "+r.rank+"."),null!=n&&a.assert(1===n.rank,"Error in conv2d: bias must be rank 1, but got rank "+n.rank+"."),null!=c&&a.assert(a.isInt(u),"Error in conv2d: pad must be an integer when using, dimRoundingMode "+c+" but got pad "+u+"."),a.assert(l.shape[3]===r.shape[2],"Error in conv2d: depth of input ("+l.shape[3]+") must match  input depth for filter "+r.shape[2]+".");var h=i.computeConv2DInfo(l.shape,r.shape,s,u,c),f=o.ENV.engine.executeKernel("Conv2D",{inputs:{x:l,filter:r,bias:n},args:{convInfo:h}},function(e,n){return{x:function(){return t.conv2dDerInput(l.shape,e,r,s,u)},filter:function(){return t.conv2dDerFilter(l,e,r.shape,s,u)},bias:function(){return t.conv2dDerBias(e)}}});return p?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f},t.conv2dDerInput=function(t,e,r,n,s,u){a.assert(t.length===e.rank,"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match");var c=t,l=e,p=!1;3===e.rank&&(p=!0,l=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),c=[1,t[0],t[1],t[2]]);var h=c[3],f=l.shape[3];a.assert(4===c.length,"Error in conv2dDerInput: inShape must be length 4, but got length "+c.length+"."),a.assert(4===l.rank,"Error in conv2dDerInput: dy must be rank 4, but got rank "+l.rank),a.assert(4===r.rank,"Error in conv2dDerInput: filter must be rank 4, but got rank "+r.rank),a.assert(h===r.shape[2],"Error in conv2dDerInput: depth of input ("+h+") must match input depth for filter "+r.shape[2]+"."),a.assert(f===r.shape[3],"Error in conv2dDerInput: depth of output ("+f+") mustmatch output depth for filter "+r.shape[3]+"."),null!=u&&a.assert(a.isInt(s),"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+s+".");var d=i.computeConv2DInfo(c,r.shape,n,s,u),m=o.ENV.engine.executeKernel("Conv2DDerInput",{inputs:{dy:l,filter:r},args:{convInfo:d}});return p?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m},t.conv2dDerBias=function(t){var e=t;return 3===t.rank&&(e=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),o.ENV.engine.executeKernel("Conv2DDerBias",{inputs:{dy:e}})},t.conv2dDerFilter=function(t,e,r,n,s,u){var c=t;3===t.rank&&(c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var l=e;3===l.rank&&(l=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),a.assert(4===c.rank,"Error in conv2dDerFilter: input must be rank 4, but got shape "+c.shape+"."),a.assert(4===l.rank,"Error in conv2dDerFilter: dy must be rank 4, but got shape "+l.shape+"."),a.assert(4===r.length,"Error in conv2dDerFilter: filterShape must be length 4, but got "+r+"."),a.assert(c.shape[3]===r[2],"Error in conv2dDerFilter: depth of input "+c.shape[3]+") must match input depth in filter ("+r[2]+"."),a.assert(l.shape[3]===r[3],"Error in conv2dDerFilter: depth of dy ("+l.shape[3]+") must match output depth for filter ("+r[3]+")."),null!=u&&a.assert(a.isInt(s),"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+s+".");var p=i.computeConv2DInfo(c.shape,r,n,s,u);return o.ENV.engine.executeKernel("Conv2DDerFilter",{inputs:{x:c,dy:l},args:{convInfo:p}})},t.conv2dTranspose=function(e,r,n,o,a,i){return t.conv2dDerInput(n,e,r,o,a,i)},t.depthwiseConv2D=function(t,e,r,n,s,u){void 0===s&&(s=[1,1]);var c=t,l=!1;3===t.rank&&(l=!0,c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),a.assert(4===c.rank,"Error in depthwiseConv2D: input must be rank 4, but got rank "+c.rank+"."),a.assert(4===e.rank,"Error in depthwiseConv2D: filter must be rank 4, but got rank "+e.rank+"."),a.assert(c.shape[3]===e.shape[2],"Error in depthwiseConv2D: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+e.shape[2]+".");var p,h="number"==typeof(p=s=s||[1,1])?[p,p]:p,f=h[0],d=h[1];a.assert(1===f&&1===d,"Error in depthwiseConv2D: rates greater than 1 are not yet supported. Got rates '"+s+"'"),null!=u&&a.assert(a.isInt(n),"Error in depthwiseConv2D: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+n+".");var m=i.computeConv2DInfo(c.shape,e.shape,r,n,u,!0),g=o.ENV.engine.executeKernel("DepthwiseConv2D",{inputs:{x:c,filter:e},args:{convInfo:m}});return l?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g},n([s.operation],t,"conv1d",null),n([s.operation],t,"conv2d",null),n([s.operation],t,"conv2dDerInput",null),n([s.operation],t,"conv2dDerBias",null),n([s.operation],t,"conv2dDerFilter",null),n([s.operation],t,"conv2dTranspose",null),n([s.operation],t,"depthwiseConv2D",null),t}();r.Ops=u},{"../environment":336,"../util":448,"./conv_util":423,"./decorators":425}],423:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../util");function o(t,e,r,n,o,i,u){void 0===i&&(i=!1),void 0===u&&(u="channelsLast");var c=[-1,-1,-1,-1],l=c[0],p=c[1],h=c[2],f=c[3];if("channelsLast"===u)l=t[0],p=t[1],h=t[2],f=t[3];else{if("channelsFirst"!==u)throw new Error("Unknown dataFormat "+u);l=t[0],f=t[1],p=t[2],h=t[3]}var d,m=e[0],g=e[1],v=e[3],y=s(r),_=y[0],b=y[1],x=function(t,e,r,n,o,i,s,u){var c,l,p;if("number"==typeof t){c={top:t,bottom:t,left:t,right:t};var h=a([e,r,1],i,1,n,t,u);l=h[0],p=h[1]}else if("same"===t){l=Math.ceil(e/n),p=Math.ceil(r/o);var f=(l-1)*n+i-e,d=(p-1)*o+s-r,m=Math.floor(f/2),g=f-m,v=Math.floor(d/2),y=d-v;c={top:m,bottom:g,left:v,right:y}}else{if("valid"!==t)throw Error("Unknown padding parameter: "+t);c={top:0,bottom:0,left:0,right:0},l=Math.ceil((e-i+1)/n),p=Math.ceil((r-s+1)/o)}return{padInfo:c,outHeight:l,outWidth:p}}(n,p,h,_,b,m,g,o),w=x.padInfo,E=x.outHeight,k=x.outWidth,S=i?v*f:v;return"channelsFirst"===u?d=[l,S,E,k]:"channelsLast"===u&&(d=[l,E,k,S]),{batchSize:l,dataFormat:u,inHeight:p,inWidth:h,inChannels:f,outHeight:E,outWidth:k,outChannels:S,padInfo:w,strideHeight:_,strideWidth:b,filterHeight:m,filterWidth:g,inShape:t,outShape:d,filterShape:e}}function a(t,e,r,o,a,s){null==a&&(a=i(t,e,o));var c=t[0],l=t[1],p=u((c-e+2*a)/o+1,s);n.assert(n.isInt(p),"The output # of rows ("+p+") must be an integer. Change the stride and/or zero pad parameters");var h=u((l-e+2*a)/o+1,s);return n.assert(n.isInt(h),"The output # of columns ("+h+") must be an integer. Change the stride and/or zero pad parameters"),[p,h,r]}function i(t,e,r){return Math.floor((t[0]*(r-1)-r+e)/2)}function s(t){return"number"==typeof t?[t,t]:t}function u(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}r.computePool2DInfo=function(t,e,r,n,a,i){void 0===i&&(i="channelsLast");var u,c=s(e),l=c[0],p=c[1];if("channelsLast"===i)u=[l,p,t[3],t[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);u=[l,p,t[1],t[1]]}return o(t,u,r,n,a,!1,i)},r.computeConv2DInfo=o,r.computeOutputShape3D=a,r.computeDefaultPad=i,r.computeWeightsShape4D=function(t,e,r,n){return[r,n,t,e]},r.computeDilatedRC=function(t,e){return[(t[0]-1)*e+1,(t[1]-1)*e+1]}},{"../util":448}],424:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../environment"),o=t("./ndarray"),a=function(){function t(){this.halfOne=n.ENV.math.keep(o.Scalar.new(.5))}return t.prototype.cost=function(t,e,r){var n=t.subStrict(e,r),o=t.multiplyStrict(n,n),a=t.multiply(this.halfOne,o);return n.dispose(),o.dispose(),a},t.prototype.der=function(t,e,r){return t.subStrict(e,r)},t.prototype.dispose=function(){this.halfOne.dispose()},t}();r.SquareCostFunc=a},{"../environment":336,"./ndarray":431}],425:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../environment");r.operation=function(t,e,r){var o=r.value;return r.value=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return n.ENV.math.scope(e,function(){return o.apply(void 0,t)})},r}},{"../environment":336}],426:[function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var o=t("../environment"),a=t("../util"),i=t("./decorators"),s=function(){function t(){}return t.resizeBilinear=function(t,e,r){void 0===r&&(r=!1),a.assert(3===t.rank||4===t.rank,"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+t.rank+"."),a.assert(2===e.length,"Error in resizeBilinear: new shape must 2D, but got shape "+e+".");var n=t,i=!1;3===t.rank&&(i=!0,n=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var s=e[0],u=e[1],c=o.ENV.engine.executeKernel("ResizeBilinear",{inputs:{x:n},args:{newHeight:s,newWidth:u,alignCorners:r}});return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c},n([i.operation],t,"resizeBilinear",null),t}();r.Ops=s},{"../environment":336,"../util":448,"./decorators":425}],427:[function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var o=t("../environment"),a=t("../util"),i=t("./broadcast_util"),s=t("./decorators"),u=t("./types"),c=function(){function t(){}return t.logicalAnd=function(t,e){return a.assert("bool"===t.dtype&&"bool"===e.dtype,"Error Array must be of type bool."),i.assertAndGetBroadcastShape(t.shape,e.shape),o.ENV.engine.executeKernel("LogicalAnd",{inputs:{a:t,b:e}})},t.logicalOr=function(t,e){return a.assert("bool"===t.dtype&&"bool"===e.dtype,"Error Array must be of type bool."),i.assertAndGetBroadcastShape(t.shape,e.shape),o.ENV.engine.executeKernel("LogicalOr",{inputs:{a:t,b:e}})},t.where=function(t,e,r){a.assert("bool"===t.dtype||"bool"===e.dtype||"bool"===r.dtype,"Error Array must be of type bool."),a.assertShapesMatch(e.shape,r.shape,"Error in where: "),1===t.rank?a.assert(t.shape[0]===e.shape[0],"The first dimension of `a` must match the size of `condition`."):a.assertShapesMatch(t.shape,r.shape,"Error in where: ");var n=u.upcastType(e.dtype,r.dtype);return o.ENV.engine.executeKernel("Where",{inputs:{condition:t,a:e,b:r},args:{dtype:n}})},n([s.operation],t,"logicalAnd",null),n([s.operation],t,"logicalOr",null),n([s.operation],t,"where",null),t}();r.Ops=c},{"../environment":336,"../util":448,"./broadcast_util":418,"./decorators":425,"./types":445}],428:[function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var o=t("./decorators"),a=function(){function t(){}return t.multiRNNCell=function(t,e,r,n){for(var o=e,a=[],i=0;i<t.length;i++){var s=t[i](o,r[i],n[i]);a.push(s[0]),a.push(s[1]),o=s[1]}var u=[],c=[];for(i=0;i<a.length;i+=2)u.push(a[i]),c.push(a[i+1]);return[u,c]},t.basicLSTMCell=function(t,e,r,n,o,a){var i=n.concat(a,1).matMul(e).add(r),s=i.shape[0],u=i.shape[1]/4,c=[s,u],l=i.slice([0,0],c),p=i.slice([0,u],c),h=i.slice([0,2*u],c),f=i.slice([0,3*u],c),d=l.sigmoid().mulStrict(p.tanh()).addStrict(o.mulStrict(t.add(h).sigmoid()));return[d,d.tanh().mulStrict(f.sigmoid())]},n([o.operation],t,"multiRNNCell",null),n([o.operation],t,"basicLSTMCell",null),t}();r.Ops=a},{"./decorators":425}],429:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../environment"),o=t("../util"),a=t("./array_ops"),i=t("./backends/backend_engine"),s=t("./batchnorm"),u=t("./binary_ops"),c=t("./compare"),l=t("./concat"),p=t("./conv"),h=t("./image_ops"),f=t("./logical_ops"),d=t("./lstm"),m=t("./matmul"),g=t("./ndarray"),v=t("./norm"),y=t("./ops"),_=t("./pool"),b=t("./reduction_ops"),x=t("./reverse"),w=t("./slice"),E=t("./softmax"),k=t("./transpose"),S=t("./unary_ops"),A=function(){function t(t,e){this.registeredArrays=new Map,this.customBackend=!1,this.matMul=m.Ops.matMul,this.vectorTimesMatrix=m.Ops.vectorTimesMatrix,this.outerProduct=m.Ops.outerProduct,this.matrixTimesVector=m.Ops.matrixTimesVector,this.dotProduct=m.Ops.dotProduct,this.slice=w.Ops.slice,this.slice1D=w.Ops.slice1D,this.slice2D=w.Ops.slice2D,this.slice3D=w.Ops.slice3D,this.slice4D=w.Ops.slice4D,this.reverse=x.Ops.reverse,this.reverse1D=x.Ops.reverse1D,this.reverse2D=x.Ops.reverse2D,this.reverse3D=x.Ops.reverse3D,this.reverse4D=x.Ops.reverse4D,this.concat=l.Ops.concat,this.concat1D=l.Ops.concat1D,this.concat2D=l.Ops.concat2D,this.concat3D=l.Ops.concat3D,this.concat4D=l.Ops.concat4D,this.batchNormalization=s.Ops.batchNormalization,this.batchNormalization2D=s.Ops.batchNormalization2D,this.batchNormalization3D=s.Ops.batchNormalization3D,this.batchNormalization4D=s.Ops.batchNormalization4D,this.avgPool=_.Ops.avgPool,this.maxPool=_.Ops.maxPool,this.minPool=_.Ops.minPool,this.maxPoolBackprop=_.Ops.maxPoolBackprop,this.conv1d=p.Ops.conv1d,this.conv2d=p.Ops.conv2d,this.conv2dTranspose=p.Ops.conv2dTranspose,this.depthwiseConv2D=p.Ops.depthwiseConv2D,this.conv2dDerBias=p.Ops.conv2dDerBias,this.conv2dDerFilter=p.Ops.conv2dDerFilter,this.conv2dDerInput=p.Ops.conv2dDerInput,this.argMax=b.Ops.argMax,this.argMaxEquals=b.Ops.argMaxEquals,this.argMin=b.Ops.argMin,this.logSumExp=b.Ops.logSumExp,this.max=b.Ops.max,this.mean=b.Ops.mean,this.min=b.Ops.min,this.moments=b.Ops.moments,this.sum=b.Ops.sum,this.add=u.Ops.add,this.addStrict=u.Ops.addStrict,this.arrayDividedByScalar=u.Ops.arrayDividedByScalar,this.div=u.Ops.div,this.divide=this.div,this.divStrict=u.Ops.divStrict,this.divideStrict=this.divStrict,this.elementWiseMul=u.Ops.elementWiseMul,this.maximum=u.Ops.maximum,this.maximumStrict=u.Ops.maximumStrict,this.minimum=u.Ops.minimum,this.minimumStrict=u.Ops.minimumStrict,this.mul=u.Ops.mul,this.multiply=this.mul,this.mulStrict=u.Ops.mulStrict,this.multiplyStrict=this.mulStrict,this.pow=u.Ops.pow,this.powStrict=u.Ops.powStrict,this.scalarDividedByArray=u.Ops.scalarDividedByArray,this.sub=u.Ops.sub,this.subtract=this.sub,this.subStrict=u.Ops.subStrict,this.logicalAnd=f.Ops.logicalAnd,this.logicalOr=f.Ops.logicalOr,this.where=f.Ops.where,this.transpose=k.Ops.transpose,this.equal=c.Ops.equal,this.equalStrict=c.Ops.equalStrict,this.greater=c.Ops.greater,this.greaterStrict=c.Ops.greaterStrict,this.greaterEqual=c.Ops.greaterEqual,this.greaterEqualStrict=c.Ops.greaterEqualStrict,this.less=c.Ops.less,this.lessStrict=c.Ops.lessStrict,this.lessEqual=c.Ops.lessEqual,this.lessEqualStrict=c.Ops.lessEqualStrict,this.notEqual=c.Ops.notEqual,this.notEqualStrict=c.Ops.notEqualStrict,this.abs=S.Ops.abs,this.acos=S.Ops.acos,this.asin=S.Ops.asin,this.atan=S.Ops.atan,this.ceil=S.Ops.ceil,this.clip=S.Ops.clip,this.cos=S.Ops.cos,this.cosh=S.Ops.cosh,this.elu=S.Ops.elu,this.exp=S.Ops.exp,this.floor=S.Ops.floor,this.leakyRelu=S.Ops.leakyRelu,this.log=S.Ops.log,this.neg=S.Ops.neg,this.prelu=S.Ops.prelu,this.relu=S.Ops.relu,this.selu=S.Ops.selu,this.sigmoid=S.Ops.sigmoid,this.sin=S.Ops.sin,this.sinh=S.Ops.sinh,this.sqrt=S.Ops.sqrt,this.square=S.Ops.square,this.step=S.Ops.step,this.tan=S.Ops.tan,this.tanh=S.Ops.tanh,this.norm=v.Ops.norm,this.basicLSTMCell=d.Ops.basicLSTMCell,this.multiRNNCell=d.Ops.multiRNNCell,this.softmax=E.Ops.softmax,this.softmaxCrossEntropy=E.Ops.softmaxCrossEntropy,this.cast=a.Ops.cast,this.clone=a.Ops.clone,this.gather=a.Ops.gather,this.reshape=a.Ops.reshape,this.tile=a.Ops.tile,this.oneHot=a.Ops.oneHot,this.multinomial=a.Ops.multinomial,this.pad1D=a.Ops.pad1D,this.pad2D=a.Ops.pad2D,this.resizeBilinear3D=h.Ops.resizeBilinear,this.registeredVariables={},"string"==typeof t?this.backend=n.ENV.getBackend(t):(this.customBackend=!0,this.backend=t),this.engine=new i.BackendEngine(this.backend,e),n.ENV.setMath(this)}return t.prototype.time=function(t){return this.backend.time(t)},t.prototype.getNumArrays=function(){return this.registeredArrays.size},t.prototype.register=function(t){var e=this.registeredArrays.has(t.dataId)?this.registeredArrays.get(t.dataId):0;0===e&&this.backend.register(t.dataId,t.shape,t.dtype),this.registeredArrays.set(t.dataId,e+1),t instanceof g.Variable||this.engine.track(t)},t.prototype.registerVariable=function(t){if(null!=this.registeredVariables[t.name])throw new Error("Variable with name "+t.name+" was already registered");this.registeredVariables[t.name]=t},t.prototype.fromPixels=function(t,e){return this.backend.fromPixels(t,e)},t.prototype.write=function(t,e){this.backend.write(t,e)},t.prototype.readSync=function(t){return this.backend.readSync(t)},t.prototype.read=function(t){return this.backend.read(t)},t.prototype.enableDebugMode=function(){n.ENV.set("DEBUG",!0),console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")},t.prototype.scope=function(t,e,r){if(void 0===r&&(r=!1),null==e){if("function"!=typeof t)throw new Error("Please provide a function to math.scope()");e=t,t="scope"}else{if("string"!=typeof t&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to math.scope() must be a string");if("function"!=typeof e)throw new Error("When calling with two arguments, the 2nd argument to math.scope() must be a function")}return this.engine.scope(t,e,r)},t.prototype.gradientsScope=function(t,e){return this.scope(t,e,!0)},t.prototype.startScope=function(){this.engine.startScope(!1)},t.prototype.endScope=function(t){this.engine.endScope(t,!1)},t.prototype.keep=function(t){return this.engine.keep(t)},t.prototype.track=function(t){return t},t.prototype.dispose=function(){this.customBackend&&this.backend.dispose()},t.prototype.topK=function(t,e){var r,n,a=this;return o.assert(e<=t.size,"Error in topK: k value ("+e+") must be less than size of input ndarray, got shape "+t.shape+"."),this.scope("topK",function(){return r=a.engine.executeKernel("TopKValues",{inputs:{x:t},args:{k:e}}),n=a.engine.executeKernel("TopKIndices",{inputs:{x:t},args:{k:e}}),r}),{values:r,indices:n}},t.prototype.switchDim=function(t,e){return y.transpose(t,e)},t.prototype.scalarPlusArray=function(t,e){return o.assert(1===t.size,"Error in scalarPlusArray: first argument must be rank 0, but got rank "+t.rank+"."),this.add(t,e)},t.prototype.scalarMinusArray=function(t,e){return o.assert(1===t.size,"Error in scalarMinusArray: first argument must be rank 0, but got rank "+t.rank+"."),this.subtract(t,e)},t.prototype.arrayMinusScalar=function(t,e){return o.assert(1===e.size,"Error in arrayMinusScalar: second argument must be rank 0, but got rank "+e.rank+"."),this.subtract(t,e)},t.prototype.scaledArrayAdd=function(t,e,r,n){var a=this;return o.assert(1===t.size,"Error in scaledArrayAdd: first argument must rank 0, but got  rank "+t.rank+"."),o.assert(1===r.size,"Error in scaledArrayAdd: third argument must be rank 0, but got NDArray of rank "+r.rank+"."),o.assertShapesMatch(e.shape,n.shape,"Error in scaledArrayAdd: "),this.scope("scaledArrayAdd",function(){return a.add(a.multiply(t,e),a.multiply(r,n))})},t.prototype.scalarTimesArray=function(t,e){return o.assert(1===t.size,"Error in arrayDividedByScalar: first argument must be rank 0, but got rank "+t.rank+"."),this.multiply(t,e)},t.prototype.localResponseNormalization3D=function(t,e,r,n,a,i){void 0===e&&(e=5),void 0===r&&(r=1),void 0===n&&(n=1),void 0===a&&(a=.5),void 0===i&&(i="acrossChannels"),o.assert(3===t.rank,"Error in localResponseNormalization3D: x must be rank 3 but got\n         rank "+t.rank+"."),o.assert(o.isInt(e),"Error in localResponseNormalization3D: radius must be an integer\n         but got radius "+e+".");var s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),u=this.localResponseNormalization4D(s,e,r,n,a,i);return u.as3D(u.shape[1],u.shape[2],u.shape[3])},t.prototype.localResponseNormalization4D=function(t,e,r,n,a,i){return void 0===e&&(e=5),void 0===r&&(r=1),void 0===n&&(n=1),void 0===a&&(a=.5),void 0===i&&(i="acrossChannels"),o.assert(4===t.rank,"Error in localResponseNormalization4D: x must be rank 4 but got\n         rank "+t.rank+"."),o.assert(o.isInt(e),"Error in localResponseNormalization3D: radius must be an integer\n         but got radius "+e+"."),this.engine.executeKernel("LRN4D",{inputs:{x:t},args:{radius:e,bias:r,alpha:n,beta:a,normRegion:i}})},t.prototype.vjp=function(t,e,r){var n=e instanceof g.NDArray?null:Object.keys(e),a=o.flattenNameArrayMap(e,n),i=this.engine.vjp(t,a,r);return e instanceof g.NDArray?i[0]:o.unflattenToNameArrayMap(n,i)},t.prototype.gradients=function(t,e){var r=e instanceof g.NDArray?null:Object.keys(e),n=o.flattenNameArrayMap(e,r),a=this.engine.gradients(t,n,!1);return e instanceof g.NDArray?a[0]:o.unflattenToNameArrayMap(r,a)},t.prototype.variableGradients=function(t,e){if(null==e){e=[];for(var r=Object.keys(this.registeredVariables),n=0;n<r.length;n++){var o=this.registeredVariables[r[n]];o.trainable&&e.push(o)}}else e=e.filter(function(t){return t.trainable});return this.engine.variableGradientsAndValue(t,e)},t.prototype.valueAndGradients=function(t,e){var r,n=e instanceof g.NDArray?null:Object.keys(e),a=o.flattenNameArrayMap(e,n),i=this.engine.gradients(t,a,!0);return r=e instanceof g.NDArray?i.gradients[0]:o.unflattenToNameArrayMap(n,i.gradients),{value:i.value,gradients:r}},t.prototype.customGradient=function(t,e,r){return this.engine.customGradient(e,r,null==t?"":t)},t.prototype.disposeData=function(t){if(this.registeredArrays.has(t)){var e=this.registeredArrays.get(t);e<=1?(this.registeredArrays.delete(t),this.backend.disposeData(t)):this.registeredArrays.set(t,e-1)}},t}();r.NDArrayMath=A},{"../environment":336,"../util":448,"./array_ops":373,"./backends/backend_engine":376,"./batchnorm":416,"./binary_ops":417,"./compare":419,"./concat":420,"./conv":422,"./image_ops":426,"./logical_ops":427,"./lstm":428,"./matmul":430,"./ndarray":431,"./norm":432,"./ops":433,"./pool":436,"./reduction_ops":439,"./reverse":440,"./slice":441,"./softmax":443,"./transpose":444,"./unary_ops":446}],430:[function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var o=t("../environment"),a=t("../util"),i=t("./backends/types/matmul"),s=t("./decorators"),u=function(){function t(){}return t.matMul=function(t,e,r,n){void 0===r&&(r=i.MatrixOrientation.REGULAR),void 0===n&&(n=i.MatrixOrientation.REGULAR);var s=r===i.MatrixOrientation.REGULAR?t.shape[1]:t.shape[0],u=n===i.MatrixOrientation.REGULAR?e.shape[0]:e.shape[1];return a.assert(2===t.rank&&2===e.rank,"Error in matMul: inputs must be rank 2, got ranks "+t.rank+" and "+e.rank+"."),a.assert(s===u,"Error in matMul: inner shapes ("+s+") and ("+u+") of NDArrays with shapes "+t.shape+" and "+e.shape+" and orientations "+i.MatrixOrientation[r]+" and "+i.MatrixOrientation[n]+" must match."),o.ENV.engine.executeKernel("MatMul",{inputs:{a:t,b:e},args:{aOrientation:r,bOrientation:n}},function(o,a){if(r===i.MatrixOrientation.TRANSPOSED||n===i.MatrixOrientation.TRANSPOSED)throw new Error("Backprop for transposed MatMul not yet implemented.");return{a:function(){return o.matMul(e.toFloat(),i.MatrixOrientation.REGULAR,i.MatrixOrientation.TRANSPOSED)},b:function(){return t.toFloat().matMul(o,i.MatrixOrientation.TRANSPOSED,i.MatrixOrientation.REGULAR)}}})},t.vectorTimesMatrix=function(t,e){return a.assert(1===t.rank,"Error in vectorTimesMatrix: first input must be rank 1, but got rank "+t.rank+"."),a.assert(2===e.rank,"Error in vectorTimesMatrix: second input must be rank 2, but got rank "+e.rank+"."),a.assert(t.size===e.shape[0],"Error in vectorTimesMatrix: size of vector ("+t.size+") must match first dimension of matrix ("+e.shape[0]+")"),t.as2D(1,-1).matMul(e).as1D()},t.matrixTimesVector=function(t,e){return a.assert(1===e.rank,"Error in matrixTimesVector: second input must rank 1, but got rank "+e.rank+"."),a.assert(2===t.rank,"Error in matrixTimesVector: first input must be a rank 2, but got rank "+t.rank+"."),a.assert(e.size===t.shape[1],"Error in matrixTimesVector: size of first rank 1 input "+e.size+" must match inner dimension of second rank 2 input, but got shape "+t.shape+"."),t.matMul(e.as2D(-1,1)).as1D()},t.dotProduct=function(t,e){return a.assert(1===t.rank&&1===e.rank,"Error in dotProduct: inputs must be rank 1, but got ranks "+t.rank+" and "+e.rank+"."),a.assert(t.size===e.size,"Error in dotProduct: size of inputs ("+t.size+") and ("+e.size+") must match."),t.as2D(1,-1).matMul(e.as2D(-1,1)).asScalar()},t.outerProduct=function(t,e){return a.assert(1===t.rank&&1===e.rank,"Error in outerProduct: inputs must be rank 1, but got ranks "+t.rank+" and "+e.rank+"."),t.as2D(-1,1).matMul(e.as2D(1,-1))},n([s.operation],t,"matMul",null),n([s.operation],t,"vectorTimesMatrix",null),n([s.operation],t,"matrixTimesVector",null),n([s.operation],t,"dotProduct",null),n([s.operation],t,"outerProduct",null),t}();r.Ops=u},{"../environment":336,"../util":448,"./backends/types/matmul":381,"./decorators":425}],431:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,a){function i(t){try{u(n.next(t))}catch(t){a(t)}}function s(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(i,s)}u((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=n[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(r,"__esModule",{value:!0});var s=t("../environment"),u=t("../util"),c=t("./backends/types/matmul"),l=t("./ops"),p=function(){function t(e,r,n,o){this.isDisposed=!1,this.size=u.sizeFromShape(e),null!=n&&u.assert(this.size===n.length,"Constructing ndarray of shape ("+this.size+") should match the length of values ("+n.length+")"),this.shape=e,this.dtype=r||"float32";var a=this.shape.length;if(a<2)this.strides=[];else{this.strides=new Array(a-1),this.strides[a-2]=this.shape[a-1];for(var i=a-3;i>=0;--i)this.strides[i]=this.strides[i+1]*this.shape[i+1]}this.dataId=null!=o?o:t.nextDataId++,this.id=t.nextId++,this.rankType=this.rank<5?this.rank.toString():"higher",s.ENV.math.register(this),null!=n&&s.ENV.math.write(this.dataId,n)}return t.ones=function(t,e){return l.ones(t,e)},t.zeros=function(t,e){return l.zeros(t,e)},t.onesLike=function(t){return l.onesLike(t)},t.zerosLike=function(t){return l.zerosLike(t)},t.like=function(t){return l.clone(t)},t.make=function(e,r,n){return new t(e,n,r.values,r.dataId)},t.fromPixels=function(t,e){return void 0===e&&(e=3),l.fromPixels(t,e)},t.rand=function(t,e,r){return l.rand(t,e,r)},t.randNormal=function(t,e,r,n,o){return void 0===e&&(e=0),void 0===r&&(r=1),l.randNormal(t,e,r,n,o)},t.randTruncatedNormal=function(t,e,r,n,o){return void 0===e&&(e=0),void 0===r&&(r=1),l.truncatedNormal(t,e,r,n,o)},t.randUniform=function(t,e,r,n){return l.randUniform(t,e,r,n)},t.prototype.squeeze=function(t){return this.throwIfDisposed(),this.reshape(u.squeezeShape(this.shape,t).newShape)},t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),u.assert(1===this.size,"The array must have only 1 element."),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(t,e){return this.throwIfDisposed(),this.reshape([t,e])},t.prototype.as3D=function(t,e,r){return this.throwIfDisposed(),this.reshape([t,e,r])},t.prototype.as4D=function(t,e,r,n){return this.throwIfDisposed(),this.reshape([t,e,r,n])},t.prototype.asType=function(t){return this.throwIfDisposed(),l.cast(this,t)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.throwIfDisposed(),0===t.length&&(t=[0]);for(var r=t[t.length-1],n=0;n<t.length-1;++n)r+=this.strides[n]*t[n];return this.dataSync()[r]},t.prototype.set=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];0===e.length&&(e=[0]),this.throwIfDisposed(),u.assert(e.length===this.rank,"The number of provided coordinates ("+e.length+") must match the rank ("+this.rank+")");for(var n=e.length>0?e[e.length-1]:0,o=0;o<e.length-1;++o)n+=this.strides[o]*e[o];var a=this.dataSync();a[n]=t,s.ENV.math.write(this.dataId,a)},t.prototype.val=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return 0===t.length&&(t=[0]),this.throwIfDisposed(),[4,this.data()];case 1:return e.sent(),[2,this.get.apply(this,t)]}})})},t.prototype.locToIndex=function(t){if(this.throwIfDisposed(),0===this.rank)return 0;if(1===this.rank)return t[0];for(var e=t[t.length-1],r=0;r<t.length-1;++r)e+=this.strides[r]*t[r];return e},t.prototype.indexToLoc=function(t){if(this.throwIfDisposed(),0===this.rank)return[];if(1===this.rank)return[t];for(var e=new Array(this.shape.length),r=0;r<e.length-1;++r)e[r]=Math.floor(t/this.strides[r]),t-=e[r]*this.strides[r];return e[e.length-1]=t,e},t.prototype.fill=function(t){this.throwIfDisposed();var e=this.dataSync();e.fill(t),s.ENV.math.write(this.dataId,e)},t.prototype.getValues=function(){return this.dataSync()},t.prototype.getValuesAsync=function(){return this.data()},t.prototype.data=function(){return a(this,void 0,void 0,function(){return i(this,function(t){return this.throwIfDisposed(),[2,s.ENV.math.read(this.dataId)]})})},t.prototype.dataSync=function(){return this.throwIfDisposed(),s.ENV.math.readSync(this.dataId)},t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,s.ENV.math.disposeData(this.dataId))},t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("NDArray is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.reshape=function(t){return this.throwIfDisposed(),l.reshape(this,t)},t.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},t.prototype.tile=function(t){return this.throwIfDisposed(),l.tile(this,t)},t.prototype.gather=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),l.gather(this,t)},t.prototype.matMul=function(t,e,r){return void 0===e&&(e=c.MatrixOrientation.REGULAR),void 0===r&&(r=c.MatrixOrientation.REGULAR),this.throwIfDisposed(),l.matMul(this,t,e,r)},t.prototype.slice=function(t,e){return this.throwIfDisposed(),l.slice(this,t,e)},t.prototype.reverse=function(t){return this.throwIfDisposed(),l.reverse(this,t)},t.prototype.concat=function(t,e){return this.throwIfDisposed(),l.concat(this,t,e)},t.prototype.batchNormalization=function(t,e,r,n,o){return void 0===r&&(r=.001),this.throwIfDisposed(),l.batchNormalization(this,t,e,r,n,o)},t.prototype.clone=function(){return this.throwIfDisposed(),l.clone(this)},t.prototype.logSumExp=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),l.logSumExp(this,t,e)},t.prototype.sum=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),l.sum(this,t,e)},t.prototype.mean=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),l.mean(this,t,e)},t.prototype.min=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),l.min(this,t,e)},t.prototype.max=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),l.max(this,t,e)},t.prototype.argMin=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),l.argMin(this,t)},t.prototype.argMax=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),l.argMax(this,t)},t.prototype.argMaxEquals=function(t){return this.throwIfDisposed(),l.argMaxEquals(this,t)},t.prototype.add=function(t){return this.throwIfDisposed(),l.add(this,t)},t.prototype.addStrict=function(t){return this.throwIfDisposed(),l.addStrict(this,t)},t.prototype.sub=function(t){return this.throwIfDisposed(),l.sub(this,t)},t.prototype.subStrict=function(t){return this.throwIfDisposed(),l.subStrict(this,t)},t.prototype.pow=function(t){return this.throwIfDisposed(),l.pow(this,t)},t.prototype.powStrict=function(t){return this.throwIfDisposed(),l.powStrict(this,t)},t.prototype.mul=function(t){return this.throwIfDisposed(),l.mul(this,t)},t.prototype.mulStrict=function(t){return this.throwIfDisposed(),l.mulStrict(this,t)},t.prototype.div=function(t){return this.throwIfDisposed(),l.div(this,t)},t.prototype.divStrict=function(t){return this.throwIfDisposed(),l.divStrict(this,t)},t.prototype.minimum=function(t){return this.throwIfDisposed(),l.minimum(this,t)},t.prototype.minimumStrict=function(t){return this.throwIfDisposed(),l.minimumStrict(this,t)},t.prototype.maximum=function(t){return this.throwIfDisposed(),l.maximum(this,t)},t.prototype.maximumStrict=function(t){return this.throwIfDisposed(),l.maximumStrict(this,t)},t.prototype.transpose=function(t){return this.throwIfDisposed(),l.transpose(this,t)},t.prototype.notEqual=function(t){return this.throwIfDisposed(),l.notEqual(this,t)},t.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),l.notEqualStrict(this,t)},t.prototype.less=function(t){return this.throwIfDisposed(),l.less(this,t)},t.prototype.lessStrict=function(t){return this.throwIfDisposed(),l.lessStrict(this,t)},t.prototype.equal=function(t){return this.throwIfDisposed(),l.equal(this,t)},t.prototype.equalStrict=function(t){return this.throwIfDisposed(),l.equalStrict(this,t)},t.prototype.lessEqual=function(t){return this.throwIfDisposed(),l.lessEqual(this,t)},t.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),l.lessEqualStrict(this,t)},t.prototype.greater=function(t){return this.throwIfDisposed(),l.greater(this,t)},t.prototype.greaterStrict=function(t){return this.throwIfDisposed(),l.greaterStrict(this,t)},t.prototype.greaterEqual=function(t){return this.throwIfDisposed(),l.greaterEqual(this,t)},t.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),l.greaterEqualStrict(this,t)},t.prototype.logicalAnd=function(t){return this.throwIfDisposed(),l.logicalAnd(this,t)},t.prototype.logicalOr=function(t){return this.throwIfDisposed(),l.logicalOr(this,t)},t.prototype.where=function(t,e){return this.throwIfDisposed(),l.where(t,this,e)},t.prototype.neg=function(){return this.throwIfDisposed(),l.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),l.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),l.floor(this)},t.prototype.exp=function(){return this.throwIfDisposed(),l.exp(this)},t.prototype.log=function(){return this.throwIfDisposed(),l.log(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),l.sqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),l.square(this)},t.prototype.abs=function(){return this.throwIfDisposed(),l.abs(this)},t.prototype.clip=function(t,e){return this.throwIfDisposed(),l.clip(this,t,e)},t.prototype.relu=function(){return this.throwIfDisposed(),l.relu(this)},t.prototype.elu=function(){return this.throwIfDisposed(),l.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),l.selu(this)},t.prototype.leakyRelu=function(t){return void 0===t&&(t=.2),this.throwIfDisposed(),l.leakyRelu(this,t)},t.prototype.prelu=function(t){return this.throwIfDisposed(),l.prelu(this,t)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),l.sigmoid(this)},t.prototype.sin=function(){return this.throwIfDisposed(),l.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),l.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),l.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),l.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),l.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),l.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),l.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),l.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),l.tanh(this)},t.prototype.step=function(t){return void 0===t&&(t=0),this.throwIfDisposed(),l.step(this,t)},t.prototype.softmax=function(t){return void 0===t&&(t=-1),this.throwIfDisposed(),l.softmax(this,t)},t.prototype.resizeBilinear=function(t,e){return void 0===e&&(e=!1),this.throwIfDisposed(),l.image.resizeBilinear(this,t,e)},t.prototype.conv1d=function(t,e,r,n,o){return this.throwIfDisposed(),l.conv1d(this,t,e,r,n,o)},t.prototype.conv2d=function(t,e,r,n,o){return this.throwIfDisposed(),l.conv2d(this,t,e,r,n,o)},t.prototype.conv2dTranspose=function(t,e,r,n,o){return this.throwIfDisposed(),l.conv2dTranspose(this,t,e,r,n,o)},t.prototype.depthwiseConv2D=function(t,e,r,n,o){return void 0===n&&(n=[1,1]),this.throwIfDisposed(),l.depthwiseConv2D(this,t,e,r,n,o)},t.prototype.avgPool=function(t,e,r,n){return this.throwIfDisposed(),l.avgPool(this,t,e,r,n)},t.prototype.maxPool=function(t,e,r,n){return this.throwIfDisposed(),l.maxPool(this,t,e,r,n)},t.prototype.minPool=function(t,e,r,n){return this.throwIfDisposed(),l.minPool(this,t,e,r,n)},t.nextId=0,t.nextDataId=0,t}();r.NDArray=p;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.new=function(t,r){return new e([],r,b([t],r))},e}(p);r.Scalar=h;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.new=function(t,r){if(!_(t)){var n=u.inferShape(t);u.assert(1===n.length,"Error constructing Array1D. Shape of values "+n+" is not 1 dimensional.")}return new e([t.length],r,b(t,r))},e}(p);r.Array1D=f;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.new=function(t,r,n){if(!_(r)){var o=u.inferShape(r);o.length>1&&u.assertShapesMatch(t,o,"Error when constructing Array2D. Shape of values "+o+" does not match the provided shape "+t+". ")}return new e(t,n,b(r,n))},e}(p);r.Array2D=d;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.new=function(t,r,n){if(!_(r)){var o=u.inferShape(r);o.length>1&&u.assertShapesMatch(t,o,"Error when constructing Array3D. Shape of values "+o+" does not match the provided shape "+t+". ")}return new e(t,n,b(r,n))},e}(p);r.Array3D=m;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.new=function(t,r,n){if(!_(r)){var o=u.inferShape(r);o.length>1&&u.assertShapesMatch(t,o,"Error when constructing Array4D. Shape of values "+o+" does not match the provided shape "+t+". ")}return new e(t,n,b(r,n))},e}(p);r.Array4D=g;var v=function(t){function e(r,n,o){void 0===n&&(n=!0);var a=t.call(this,r.shape,r.dtype,null,r.dataId)||this;return a.trainable=n,r.dispose(),a.name=o,null==a.name&&(a.name=e.nextVarId.toString(),e.nextVarId++),s.ENV.math.registerVariable(a),a}return o(e,t),e.variable=function(t,r,n,o){return void 0===r&&(r=!0),null!=o&&o!==t.dtype&&(t=t.asType(o)),new e(t,r,n)},e.prototype.assign=function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value ("+t.dtype+") and previous value ("+this.dtype+") must match");if(!u.arraysEqual(t.shape,this.shape))throw new Error("shape of the new value ("+t.shape+") and previous value ("+this.shape+") must match");s.ENV.math.disposeData(this.dataId),this.dataId=t.dataId,s.ENV.math.register(this),t.dispose()},e.nextVarId=0,e}(p);r.Variable=v;var y=v.variable;function _(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function b(t,e){return n=e,(r=t)instanceof Float32Array&&"float32"===n||r instanceof Int32Array&&"int32"===n||r instanceof Uint8Array&&"bool"===n?t:(Array.isArray(t)&&(t=u.flatten(t)),u.copyTypedArray(t,e));var r,n}r.variable=y},{"../environment":336,"../util":448,"./backends/types/matmul":381,"./ops":433}],432:[function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var o=t("./axis_util"),a=t("./decorators"),i=t("./ndarray"),s=function(){function t(){}return t.norm=function(t,e,r,n){void 0===e&&(e="euclidean"),void 0===r&&(r=null),void 0===n&&(n=!1);var a=function t(e,r,n){void 0===n&&(n=null);if(0===e.rank)return e.abs();if(1!==e.rank&&null===n)return t(e.reshape([-1]),r,n);if(1===e.rank||"number"==typeof n||n instanceof Array&&1===n.length){if(1===r)return e.abs().sum(n);if(r===1/0)return e.abs().max(n);if(r===-1/0)return e.abs().min(n);if("euclidean"===r||2===r)return e.abs().pow(i.Scalar.new(2,"int32")).sum(n).sqrt();throw new Error("Error in norm: invalid ord value: "+r)}if(n instanceof Array&&2===n.length){if(1===r)return e.abs().sum(n[0]).max(n[1]-1);if(r===1/0)return e.abs().sum(n[1]).max(n[0]);if(r===-1/0)return e.abs().sum(n[1]).min(n[0]);if("fro"===r||"euclidean"===r)return e.pow(i.Scalar.new(2,"int32")).sum(n).sqrt();throw new Error("Error in norm: invalid ord value: "+r)}throw new Error("Error in norm: invalid axis: "+n)}(t,e,r),s=a.shape;if(n){var u=o.parseAxisParam(r,t.shape);s=o.expandShapeToKeepDim(a.shape,u)}return a.reshape(s)},n([a.operation],t,"norm",null),t}();r.Ops=s},{"./axis_util":374,"./decorators":425,"./ndarray":431}],433:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./array_ops"),o=t("./batchnorm"),a=t("./binary_ops"),i=t("./compare"),s=t("./concat"),u=t("./conv"),c=t("./image_ops"),l=t("./logical_ops"),p=t("./lstm"),h=t("./matmul"),f=t("./norm"),d=t("./pool"),m=t("./reduction_ops"),g=t("./reverse"),v=t("./slice"),y=t("./softmax"),_=t("./transpose"),b=t("./unary_ops");r.batchNormalization=o.Ops.batchNormalization,r.batchNormalization2D=o.Ops.batchNormalization2D,r.batchNormalization3D=o.Ops.batchNormalization3D,r.batchNormalization4D=o.Ops.batchNormalization4D,r.concat=s.Ops.concat,r.concat1D=s.Ops.concat1D,r.concat2D=s.Ops.concat2D,r.concat3D=s.Ops.concat3D,r.concat4D=s.Ops.concat4D,r.conv1d=u.Ops.conv1d,r.conv2d=u.Ops.conv2d,r.conv2dTranspose=u.Ops.conv2dTranspose,r.depthwiseConv2D=u.Ops.depthwiseConv2D,r.dotProduct=h.Ops.dotProduct,r.matMul=h.Ops.matMul,r.matrixTimesVector=h.Ops.matrixTimesVector,r.outerProduct=h.Ops.outerProduct,r.vectorTimesMatrix=h.Ops.vectorTimesMatrix,r.avgPool=d.Ops.avgPool,r.maxPool=d.Ops.maxPool,r.minPool=d.Ops.minPool,r.transpose=_.Ops.transpose,r.reverse=g.Ops.reverse,r.reverse1D=g.Ops.reverse1D,r.reverse2D=g.Ops.reverse2D,r.reverse3D=g.Ops.reverse3D,r.reverse4D=g.Ops.reverse4D,r.slice=v.Ops.slice,r.slice1D=v.Ops.slice1D,r.slice2D=v.Ops.slice2D,r.slice3D=v.Ops.slice3D,r.slice4D=v.Ops.slice4D,r.argMax=m.Ops.argMax,r.argMaxEquals=m.Ops.argMaxEquals,r.argMin=m.Ops.argMin,r.logSumExp=m.Ops.logSumExp,r.max=m.Ops.max,r.mean=m.Ops.mean,r.min=m.Ops.min,r.moments=m.Ops.moments,r.sum=m.Ops.sum,r.equal=i.Ops.equal,r.equalStrict=i.Ops.equalStrict,r.greater=i.Ops.greater,r.greaterStrict=i.Ops.greaterStrict,r.greaterEqual=i.Ops.greaterEqual,r.greaterEqualStrict=i.Ops.greaterEqualStrict,r.less=i.Ops.less,r.lessStrict=i.Ops.lessStrict,r.lessEqual=i.Ops.lessEqual,r.lessEqualStrict=i.Ops.lessEqualStrict,r.notEqual=i.Ops.notEqual,r.notEqualStrict=i.Ops.notEqualStrict,r.logicalAnd=l.Ops.logicalAnd,r.logicalOr=l.Ops.logicalOr,r.where=l.Ops.where,r.abs=b.Ops.abs,r.acos=b.Ops.acos,r.asin=b.Ops.asin,r.atan=b.Ops.atan,r.ceil=b.Ops.ceil,r.clip=b.Ops.clip,r.cos=b.Ops.cos,r.cosh=b.Ops.cosh,r.elu=b.Ops.elu,r.exp=b.Ops.exp,r.floor=b.Ops.floor,r.leakyRelu=b.Ops.leakyRelu,r.log=b.Ops.log,r.neg=b.Ops.neg,r.prelu=b.Ops.prelu,r.relu=b.Ops.relu,r.selu=b.Ops.selu,r.sigmoid=b.Ops.sigmoid,r.sin=b.Ops.sin,r.sinh=b.Ops.sinh,r.sqrt=b.Ops.sqrt,r.square=b.Ops.square,r.step=b.Ops.step,r.tan=b.Ops.tan,r.tanh=b.Ops.tanh,r.add=a.Ops.add,r.addStrict=a.Ops.addStrict,r.div=a.Ops.div,r.divStrict=a.Ops.divStrict,r.maximum=a.Ops.maximum,r.maximumStrict=a.Ops.maximumStrict,r.minimum=a.Ops.minimum,r.minimumStrict=a.Ops.minimumStrict,r.mul=a.Ops.mul,r.mulStrict=a.Ops.mulStrict,r.pow=a.Ops.pow,r.powStrict=a.Ops.powStrict,r.sub=a.Ops.sub,r.subStrict=a.Ops.subStrict,r.norm=f.Ops.norm,r.cast=n.Ops.cast,r.clone=n.Ops.clone,r.fromPixels=n.Ops.fromPixels,r.ones=n.Ops.ones,r.onesLike=n.Ops.onesLike,r.zeros=n.Ops.zeros,r.zerosLike=n.Ops.zerosLike,r.rand=n.Ops.rand,r.randNormal=n.Ops.randNormal,r.truncatedNormal=n.Ops.truncatedNormal,r.randUniform=n.Ops.randUniform,r.reshape=n.Ops.reshape,r.tile=n.Ops.tile,r.gather=n.Ops.gather,r.multinomial=n.Ops.multinomial,r.oneHot=n.Ops.oneHot,r.pad1D=n.Ops.pad1D,r.pad2D=n.Ops.pad2D,r.range=n.Ops.range,r.basicLSTMCell=p.Ops.basicLSTMCell,r.multiRNNCell=p.Ops.multiRNNCell,r.softmax=y.Ops.softmax;var x=t("./ndarray"),w=t("./types");x.NDArray,w.Rank,x.Array3D,x.Array4D,r.losses={softmaxCrossEntropy:y.Ops.softmaxCrossEntropy},r.image={resizeBilinear:c.Ops.resizeBilinear}},{"./array_ops":373,"./batchnorm":416,"./binary_ops":417,"./compare":419,"./concat":420,"./conv":422,"./image_ops":426,"./logical_ops":427,"./lstm":428,"./matmul":430,"./ndarray":431,"./norm":432,"./pool":436,"./reduction_ops":439,"./reverse":440,"./slice":441,"./softmax":443,"./transpose":444,"./types":445,"./unary_ops":446}],434:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../../environment"),o=t("../../graph/session_util"),a=t("../../graph/tensor_array_map"),i=t("../../math/ndarray"),s=function(){function t(t,e){this.learningRate=t,this.variableGradients=new a.TensorArrayMap,null!=e&&(this.specifiedVariableNodes=e),this.one=n.ENV.math.keep(i.Scalar.new(1))}return t.prototype.minimize=function(t,e,r){void 0===e&&(e=!1);var n=this.computeGradients(t,r),o=n.value,a=n.gradients;return this.applyGradients(a),Object.keys(a).forEach(function(t){return a[t].dispose()}),e?o:(o.dispose(),null)},t.prototype.computeGradients=function(t,e){return n.ENV.math.variableGradients(t,e)},t.prototype.beforeBatch=function(t,e,r,n,a){var s=this;this.variableNodes=null==this.specifiedVariableNodes?o.getVariableNodesFromEvaluationSet(r.nodes):this.specifiedVariableNodes,e!==this.prevBatchSize&&(null!=this.cGraph&&this.cGraph.dispose(),this.prevBatchSize=e,this.cGraph=t.keep(i.Scalar.new(-this.learningRate/e))),this.variableNodes.forEach(function(e){return s.variableGradients.set(e.output,t.keep(i.NDArray.zeros(e.output.shape)))})},t.prototype.afterExample=function(t,e,r,n){var o=this;t.scope(function(e){o.variableNodes.forEach(function(r){var a=n.get(r.output),i=o.variableGradients.get(r.output);o.variableGradients.set(r.output,e(t.add(a,i))),i.dispose()})})},t.prototype.dispose=function(){null!=this.cGraph&&this.cGraph.dispose(),this.one.dispose(),null!=this.variableNodes&&this.variableNodes.forEach(function(t){t.data.dispose()}),null!=this.specifiedVariableNodes&&this.specifiedVariableNodes.forEach(function(t){t.data.dispose()})},t}();r.Optimizer=s},{"../../environment":336,"../../graph/session_util":369,"../../graph/tensor_array_map":370,"../../math/ndarray":431}],435:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../environment"),i=t("../../graph/tensor_array_map"),s=t("../ndarray"),u=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.learningRate=e,n.setLearningRate(e),n}return o(e,t),e.prototype.applyGradients=function(t){var e=this,r=a.ENV.math;Object.keys(t).forEach(function(n){var o=t[n],a=r.registeredVariables[n],i=r.scope(function(){return r.add(r.multiply(e.c,o),a)});a.assign(i)})},e.prototype.afterBatch=function(t,e,r,n,o){var a=this;t.scope(function(e){a.variableNodes.forEach(function(r){var o=n.get(r.output),i=a.variableGradients.get(r.output),s=t.scaledArrayAdd(a.cGraph,i,a.one,o);n.set(r.output,e(s)),r.data=s,o.dispose()})}),this.variableGradients.dispose(),this.variableGradients=new i.TensorArrayMap},e.prototype.dispose=function(){this.c.dispose(),t.prototype.dispose.call(this)},e.prototype.setLearningRate=function(t){this.learningRate=t,null!=this.c&&this.c.dispose(),this.c=a.ENV.math.keep(s.Scalar.new(-t))},e}(t("./optimizer").Optimizer);r.SGDOptimizer=u},{"../../environment":336,"../../graph/tensor_array_map":370,"../ndarray":431,"./optimizer":434}],436:[function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var o=t("../environment"),a=t("../util"),i=t("./conv_util"),s=t("./decorators"),u=function(){function t(){}return t.maxPool=function(e,r,n,s,u){var c=e,l=!1;3===e.rank&&(l=!0,c=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),a.assert(4===c.rank,"Error in maxPool: input must be rank 4 but got rank "+c.rank+"."),null!=u&&a.assert(a.isInt(s),"Error in maxPool: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+s+".");var p=i.computePool2DInfo(c.shape,r,n,s,u),h=o.ENV.engine.executeKernel("MaxPool",{inputs:{x:c},args:{convInfo:p}},function(e,o){return{x:function(){return t.maxPoolBackprop(e,c,r,n,s)}}});return l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h},t.maxPoolBackprop=function(t,e,r,n,s,u){a.assert(e.rank===t.rank,"Rank of input ("+e.rank+") does not match rank of dy ("+t.rank+")");var c=e,l=t,p=!1;3===e.rank&&(p=!0,c=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),a.assert(4===l.rank,"Error in maxPoolBackprop: dy must be rank 4 but got rank "+l.rank+"."),a.assert(4===c.rank,"Error in maxPoolBackprop: input must be rank 4 but got rank "+c.rank+"."),null!=u&&a.assert(a.isInt(s),"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+s+".");var h=i.computePool2DInfo(c.shape,r,n,s,u),f=o.ENV.engine.executeKernel("MaxPoolBackprop",{inputs:{dy:l,x:c},args:{convInfo:h}});return p?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f},t.minPool=function(t,e,r,n,s){var u=t,c=!1;3===t.rank&&(c=!0,u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),a.assert(4===u.rank,"Error in minPool: x must be rank 4 but got rank "+u.rank+"."),null!=s&&a.assert(a.isInt(n),"Error in minPool: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+n+".");var l=i.computePool2DInfo(u.shape,e,r,n,s),p=o.ENV.engine.executeKernel("MinPool",{inputs:{x:u},args:{convInfo:l}});return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p},t.avgPool=function(e,r,n,s,u){var c=e,l=!1;3===e.rank&&(l=!0,c=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),a.assert(4===c.rank,"Error in avgPool: x must be rank 4 but got rank "+c.rank+"."),null!=u&&a.assert(a.isInt(s),"Error in avgPool: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+s+".");var p=i.computePool2DInfo(c.shape,r,n,s),h=o.ENV.engine.executeKernel("AvgPool",{inputs:{x:c},args:{convInfo:p}},function(e,o){return{x:function(){return t.avgPoolBackprop(e,c,r,n,s)}}});return l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h},t.avgPoolBackprop=function(t,e,r,n,s){a.assert(e.rank===t.rank,"Rank of input ("+e.rank+") does not match rank of dy ("+t.rank+")");var u=e,c=t,l=!1;3===e.rank&&(l=!0,u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),a.assert(4===c.rank,"Error in avgPoolBackprop: dy must be rank 4 but got rank "+c.rank+"."),a.assert(4===u.rank,"Error in avgPoolBackprop: input must be rank 4 but got rank "+u.rank+".");var p=i.computePool2DInfo(u.shape,r,n,s),h=o.ENV.engine.executeKernel("AvgPoolBackprop",{inputs:{dy:c,x:u},args:{convInfo:p}});return l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h},n([s.operation],t,"maxPool",null),n([s.operation],t,"maxPoolBackprop",null),n([s.operation],t,"minPool",null),n([s.operation],t,"avgPool",null),n([s.operation],t,"avgPoolBackprop",null),t}();r.Ops=u},{"../environment":336,"../util":448,"./conv_util":423,"./decorators":425}],437:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("seedrandom"),o=function(){function t(t,e,r,o,a){this.mean=t,this.stdDev=e,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=a||Math.random();this.random=n.alea(i.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var e,r,n=!1;!n;){var o=void 0,a=void 0,i=void 0;do{i=(o=2*this.random()-1)*o+(a=2*this.random()-1)*a}while(i>=1||0===i);var s=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*o*s,r=this.mean+this.stdDev*a*s,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(e)},t.prototype.convertValue=function(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)},t.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},t}();r.MPRandGauss=o},{seedrandom:451}],438:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PARALLELIZE_THRESHOLD=30,r.computeOptimalWindowSize=function(t){return t<=r.PARALLELIZE_THRESHOLD?t:function(t,e){for(var r=e;r<t;++r)if(t%r==0)return r;return t}(t,Math.floor(Math.sqrt(t)))}},{}],439:[function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var o=t("../environment"),a=t("../util"),i=t("./axis_util"),s=t("./decorators"),u=t("./ndarray"),c=function(){function t(){}return t.logSumExp=function(t,e,r){void 0===e&&(e=null),void 0===r&&(r=!1);var n=i.parseAxisParam(e,t.shape),o=t.max(n,!0),a=t.sub(o).exp().sum(n).log(),s=o.reshape(a.shape).add(a);if(r){var u=i.expandShapeToKeepDim(s.shape,n);return s.reshape(u)}return s},t.sum=function(t,e,r){void 0===e&&(e=null),void 0===r&&(r=!1);var n=i.parseAxisParam(e,t.shape);return o.ENV.math.customGradient("sum",function(){var e=i.getAxesPermutation(n,t.rank),a=n,s=t;null!=e&&(s=t.transpose(e),a=i.getInnerMostAxes(a.length,t.rank));var c=o.ENV.engine.executeKernel("Sum",{inputs:{x:s},args:{axes:a}});if(r){var l=i.expandShapeToKeepDim(c.shape,n);c=c.reshape(l)}return{value:c,gradients:function(e){var r=t.shape.slice();n.forEach(function(t){r[t]=1});var o=e.reshape(r);return{x:function(){return o.mul(u.NDArray.ones(t.shape,"float32"))}}}}},{x:t})},t.mean=function(t,e,r){void 0===e&&(e=null),void 0===r&&(r=!1);var n=i.parseAxisParam(e,t.shape),s=i.computeOutAndReduceShapes(t.shape,n)[1],c=a.sizeFromShape(s);return o.ENV.math.customGradient("mean",function(){var o=u.Scalar.new(c);return{value:t.div(o).sum(e,r),gradients:function(e){var r=t.shape.slice();n.forEach(function(t){r[t]=1});var a=e.reshape(r);return{x:function(){return a.mul(u.NDArray.ones(t.shape,"float32")).div(o)}}}}},{x:t})},t.min=function(t,e,r){void 0===e&&(e=null),void 0===r&&(r=!1);var n=i.parseAxisParam(e,t.shape),a=n,s=i.getAxesPermutation(a,t.rank);null!=s&&(t=t.transpose(s),a=i.getInnerMostAxes(a.length,t.rank));var u=o.ENV.engine.executeKernel("Min",{inputs:{x:t},args:{axes:a}});if(r){var c=i.expandShapeToKeepDim(u.shape,n);return u.reshape(c)}return u},t.max=function(t,e,r){void 0===e&&(e=null),void 0===r&&(r=!1);var n=i.parseAxisParam(e,t.shape),a=n,s=i.getAxesPermutation(a,t.rank);null!=s&&(t=t.transpose(s),a=i.getInnerMostAxes(a.length,t.rank));var u=o.ENV.engine.executeKernel("Max",{inputs:{x:t},args:{axes:a}});if(r){var c=i.expandShapeToKeepDim(u.shape,n);return u.reshape(c)}return u},t.argMin=function(t,e){void 0===e&&(e=null);var r=i.parseAxisParam(e,t.shape),n=i.getAxesPermutation(r,t.rank);return null!=n&&(t=t.transpose(n),r=i.getInnerMostAxes(r.length,t.rank)),o.ENV.engine.executeKernel("ArgMin",{inputs:{x:t},args:{axes:r}})},t.argMax=function(t,e){void 0===e&&(e=null);var r=i.parseAxisParam(e,t.shape),n=i.getAxesPermutation(r,t.rank);return null!=n&&(t=t.transpose(n),r=i.getInnerMostAxes(r.length,t.rank)),o.ENV.engine.executeKernel("ArgMax",{inputs:{x:t},args:{axes:r}})},t.argMaxEquals=function(t,e){return a.assertShapesMatch(t.shape,e.shape,"Error in argMaxEquals: "),t.argMax().equal(e.argMax())},t.moments=function(t,e,r){void 0===e&&(e=null),void 0===r&&(r=!1);var n=i.parseAxisParam(e,t.shape),o=t.mean(n,r),a=o.shape;return r||(a=i.expandShapeToKeepDim(o.shape,n)),{mean:o,variance:t.toFloat().sub(o.reshape(a)).square().mean(n,r)}},n([s.operation],t,"logSumExp",null),n([s.operation],t,"sum",null),n([s.operation],t,"mean",null),n([s.operation],t,"min",null),n([s.operation],t,"max",null),n([s.operation],t,"argMin",null),n([s.operation],t,"argMax",null),n([s.operation],t,"argMaxEquals",null),n([s.operation],t,"moments",null),t}();r.Ops=c},{"../environment":336,"../util":448,"./axis_util":374,"./decorators":425,"./ndarray":431}],440:[function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var o=t("../environment"),a=t("../util"),i=t("./axis_util"),s=t("./decorators"),u=function(){function t(){}return t.reverse1D=function(e){a.assert(1===e.rank,"Error in reverse1D: x must be rank 1 but got\n             rank "+e.rank+".");var r=e.as4D(1,1,1,e.shape[0]);return t.reverse4D(r,[3]).as1D()},t.reverse2D=function(e,r){a.assert(2===e.rank,"Error in reverse2D: x must be rank 2 but got\n             rank "+e.rank+".");var n=i.parseAxisParam(r,e.shape).map(function(t){return t+2}),o=e.as4D(1,1,e.shape[0],e.shape[1]),s=t.reverse4D(o,n);return s.as2D(s.shape[2],s.shape[3])},t.reverse3D=function(e,r){a.assert(3===e.rank,"Error in reverse3D: x must be rank 3 but got\n             rank "+e.rank+".");var n=i.parseAxisParam(r,e.shape).map(function(t){return t+1}),o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),s=t.reverse4D(o,n);return s.as3D(s.shape[1],s.shape[2],s.shape[3])},t.reverse4D=function(t,e){a.assert(4===t.rank,"Error in reverse4D: x must be rank 4 but got\n             rank "+t.rank+".");var r=i.parseAxisParam(e,t.shape);return o.ENV.engine.executeKernel("Reverse4D",{inputs:{x:t},args:{axis:r}})},t.reverse=function(e,r){if(0===e.rank)return e.reshape(e.shape);if(1===e.rank)return t.reverse1D(e);if(2===e.rank)return t.reverse2D(e,r);if(3===e.rank)return t.reverse3D(e,r);if(4===e.rank)return t.reverse4D(e,r);throw new Error("Reverse for rank "+e.rank+" is not yet implemented")},n([s.operation],t,"reverse1D",null),n([s.operation],t,"reverse2D",null),n([s.operation],t,"reverse3D",null),n([s.operation],t,"reverse4D",null),n([s.operation],t,"reverse",null),t}();r.Ops=u},{"../environment":336,"../util":448,"./axis_util":374,"./decorators":425}],441:[function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var o=t("../environment"),a=t("./decorators"),i=t("./slice_util"),s=function(){function t(){}return t.slice1D=function(t,e,r){return i.assertParamsValid(t,[e],[r]),o.ENV.engine.executeKernel("Slice1D",{inputs:{x:t},args:{begin:e,size:r}})},t.slice2D=function(t,e,r){return i.assertParamsValid(t,e,r),o.ENV.engine.executeKernel("Slice2D",{inputs:{x:t},args:{begin:e,size:r}})},t.slice3D=function(t,e,r){return i.assertParamsValid(t,e,r),o.ENV.engine.executeKernel("Slice3D",{inputs:{x:t},args:{begin:e,size:r}})},t.slice4D=function(t,e,r){return i.assertParamsValid(t,e,r),o.ENV.engine.executeKernel("Slice4D",{inputs:{x:t},args:{begin:e,size:r}})},t.slice=function(e,r,n){if(0===e.rank)throw new Error("Slicing scalar is not possible");if(1===e.rank)return t.slice1D(e,r[0],n[0]);if(2===e.rank)return t.slice2D(e,r,n);if(3===e.rank)return t.slice3D(e,r,n);if(4===e.rank)return t.slice4D(e,r,n);throw new Error("Slicing for rank "+e.rank+" not implemented yet")},n([a.operation],t,"slice1D",null),n([a.operation],t,"slice2D",null),n([a.operation],t,"slice3D",null),n([a.operation],t,"slice4D",null),n([a.operation],t,"slice",null),t}();r.Ops=s},{"../environment":336,"./decorators":425,"./slice_util":442}],442:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../util");r.assertParamsValid=function(t,e,r){n.assert(t.rank===e.length,"Error in slice"+t.rank+"D: Length of begin "+e+" must match the rank of the array ("+t.rank+")."),n.assert(t.rank===r.length,"Error in slice"+t.rank+"D: Length of size "+r+" must match the rank of the array ("+t.rank+").");for(var o=0;o<t.rank;++o)n.assert(e[o]+r[o]<=t.shape[o],"Error in slice"+t.rank+"D: begin["+o+"] + size["+o+"] ("+(e[o]+r[o])+") would overflow input.shape["+o+"] ("+t.shape[o]+")")}},{"../util":448}],443:[function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var o=t("../environment"),a=t("../util"),i=t("./axis_util"),s=t("./decorators"),u=t("./ndarray"),c=function(){function t(){}return t.softmax=function(t,e){if(void 0===e&&(e=-1),-1===e&&(e=t.rank-1),e!==t.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and dim was "+e);var r=function(t,r){return{logits:function(){var n=t.mul(r);return n.sub(n.sum([e],!0).mul(r))}}};return o.ENV.math.customGradient("softmax",function(){var n=t.logSumExp([e],!0);return{value:t.toFloat().sub(n).exp(),gradients:r}},{logits:t})},t.softmaxCrossEntropy=function(t,e,r){if(void 0===r&&(r=-1),a.assertShapesMatch(t.shape,e.shape,"Error in softmaxCrossEntropy: "),-1===r&&(r=e.rank-1),r!==e.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+e.rank+" and dim was "+r);return o.ENV.math.customGradient("softmaxCrossEntropy",function(){var n=e.softmax(r);return{value:u.Scalar.new(1e-5).add(n).log().mul(t).neg().sum([r]),gradients:function(e,o){var a=i.expandShapeToKeepDim(e.shape,[r]);return{logits:function(){return e.reshape(a).mul(n.sub(t.toFloat()))},labels:function(){return e.reshape(a).mul(t.sub(n))}}}}},{labels:t,logits:e})},n([s.operation],t,"softmax",null),n([s.operation],t,"softmaxCrossEntropy",null),t}();r.Ops=c},{"../environment":336,"../util":448,"./axis_util":374,"./decorators":425,"./ndarray":431}],444:[function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var o=t("../environment"),a=t("../util"),i=t("./axis_util"),s=t("./decorators"),u=function(){function t(){}return t.transpose=function(t,e){null==e&&(e=t.shape.map(function(t,e){return e}).reverse());return a.assert(t.rank===e.length,"Error in transpose: rank of input "+t.rank+" must match length of perm "+e+"."),o.ENV.engine.executeKernel("Transpose",{inputs:{x:t},args:{perm:e}},function(t){var r=i.getUndoAxesPermutation(e);return{x:function(){return t.transpose(r)}}})},n([s.operation],t,"transpose",null),t}();r.Ops=u},{"../environment":336,"../util":448,"./axis_util":374,"./decorators":425}],445:[function(t,e,r){"use strict";var n,o,a,i,s,u,c,l;Object.defineProperty(r,"__esModule",{value:!0}),(n=r.DType||(r.DType={})).float32="float32",n.int32="int32",n.bool="bool",(o=r.Rank||(r.Rank={})).R0="R0",o.R1="R1",o.R2="R2",o.R3="R3",o.R4="R4",(i=a||(a={})).float32="float32",i.int32="int32",i.bool="int32",(u=s||(s={})).float32="float32",u.int32="int32",u.bool="bool",(l=c||(c={})).float32="float32",l.int32="float32",l.bool="float32";var p={float32:c,int32:a,bool:s};function h(t,e){return p[t][e]}r.upcastType=h,r.sumOutType=function(t){return h(t,"int32")}},{}],446:[function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i};Object.defineProperty(r,"__esModule",{value:!0});var o=t("../environment"),a=t("../util"),i=t("./decorators"),s=t("./ndarray"),u=function(){function t(){}return t.neg=function(t){return o.ENV.engine.executeKernel("Neg",{inputs:{x:t}},function(t,e){return{x:function(){return t.neg()}}})},t.ceil=function(t){return o.ENV.engine.executeKernel("Ceil",{inputs:{x:t}})},t.floor=function(t){return o.ENV.engine.executeKernel("Floor",{inputs:{x:t}})},t.exp=function(t){return o.ENV.engine.executeKernel("Exp",{inputs:{x:t}},function(t,e){return{x:function(){return t.mul(e)}}})},t.log=function(t){return o.ENV.engine.executeKernel("Log",{inputs:{x:t}},function(e,r){return{x:function(){return e.div(t.toFloat())}}})},t.sqrt=function(t){return o.ENV.engine.executeKernel("Sqrt",{inputs:{x:t}},function(e,r){return{x:function(){return e.div(t.toFloat().sqrt().mul(s.Scalar.new(2)))}}})},t.square=function(t){return o.ENV.engine.executeKernel("Square",{inputs:{x:t}},function(e,r){return{x:function(){return e.mul(t.toFloat().mul(s.Scalar.new(2)))}}})},t.abs=function(t){return o.ENV.engine.executeKernel("Abs",{inputs:{x:t}},function(e,r){return{x:function(){return e.mul(t.toFloat().step(-1))}}})},t.clip=function(t,e,r){return a.assert(e<=r,"Error in clip: min ("+e+") must beless than or equal to max ("+r+")."),o.ENV.engine.executeKernel("Clip",{inputs:{x:t},args:{min:e,max:r}})},t.relu=function(t){return o.ENV.engine.executeKernel("Relu",{inputs:{x:t}},function(e,r){var n=t.step();return{x:function(){return e.mul(n.toFloat())}}})},t.elu=function(t){return o.ENV.engine.executeKernel("Elu",{inputs:{x:t}},function(e){return{x:function(){return e.mul((r=t,o.ENV.engine.executeKernel("EluDer",{inputs:{x:r}})));var r},alpha:function(){throw new Error("Derivative of prelu with respect to alpha is not implemented yet")}}})},t.selu=function(t){return o.ENV.engine.executeKernel("Selu",{inputs:{x:t}})},t.leakyRelu=function(t,e){return void 0===e&&(e=.2),o.ENV.engine.executeKernel("LeakyRelu",{inputs:{x:t},args:{alpha:e}})},t.prelu=function(t,e){return o.ENV.engine.executeKernel("PReLU",{inputs:{x:t,alpha:e}},function(r){return{x:function(){return r.mul((n=t,a=e,o.ENV.engine.executeKernel("PReLUDer",{inputs:{x:n,alpha:a}})));var n,a},alpha:function(){throw new Error("Derivative of prelu with respect to alpha is not implemented yet")}}})},t.sigmoid=function(t){return o.ENV.engine.executeKernel("Sigmoid",{inputs:{x:t}},function(t,e){return{x:function(){return t.mul(e.mul(s.Scalar.new(1).sub(e)))}}})},t.sin=function(t){return o.ENV.engine.executeKernel("Sin",{inputs:{x:t}},function(e,r){return{x:function(){return t.toFloat().cos().mul(e)}}})},t.cos=function(t){return o.ENV.engine.executeKernel("Cos",{inputs:{x:t}},function(e,r){return{x:function(){return t.toFloat().sin().neg().mul(e)}}})},t.tan=function(t){return o.ENV.engine.executeKernel("Tan",{inputs:{x:t}},function(e,r){return{x:function(){return e.div(t.cos().square())}}})},t.asin=function(e){return o.ENV.engine.executeKernel("Asin",{inputs:{x:e}},function(r,n){return{x:function(){return r.div(t.sqrt(s.Scalar.new(1).sub(e.toFloat().square())))}}})},t.acos=function(e){return o.ENV.engine.executeKernel("Acos",{inputs:{x:e}},function(r,n){return{x:function(){return r.div(t.sqrt(s.Scalar.new(1).sub(e.toFloat().square()))).neg()}}})},t.atan=function(t){return o.ENV.engine.executeKernel("Atan",{inputs:{x:t}},function(e,r){return{x:function(){return e.div(s.Scalar.new(1).add(t.toFloat().square()))}}})},t.sinh=function(t){return o.ENV.engine.executeKernel("Sinh",{inputs:{x:t}})},t.cosh=function(t){return o.ENV.engine.executeKernel("Cosh",{inputs:{x:t}})},t.tanh=function(t){return o.ENV.engine.executeKernel("Tanh",{inputs:{x:t}})},t.step=function(t,e){return void 0===e&&(e=0),o.ENV.engine.executeKernel("Step",{inputs:{x:t},args:{alpha:e}})},n([i.operation],t,"neg",null),n([i.operation],t,"ceil",null),n([i.operation],t,"floor",null),n([i.operation],t,"exp",null),n([i.operation],t,"log",null),n([i.operation],t,"sqrt",null),n([i.operation],t,"square",null),n([i.operation],t,"abs",null),n([i.operation],t,"clip",null),n([i.operation],t,"relu",null),n([i.operation],t,"elu",null),n([i.operation],t,"selu",null),n([i.operation],t,"leakyRelu",null),n([i.operation],t,"prelu",null),n([i.operation],t,"sigmoid",null),n([i.operation],t,"sin",null),n([i.operation],t,"cos",null),n([i.operation],t,"tan",null),n([i.operation],t,"asin",null),n([i.operation],t,"acos",null),n([i.operation],t,"atan",null),n([i.operation],t,"sinh",null),n([i.operation],t,"cosh",null),n([i.operation],t,"tanh",null),n([i.operation],t,"step",null),t}();r.Ops=u},{"../environment":336,"../util":448,"./decorators":425,"./ndarray":431}],447:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./environment"),o=t("./math/backends/backend_cpu"),a=t("./math/backends/backend_webgl"),i=t("./math/math"),s=t("./math/ndarray"),u=t("./util");function c(t){for(var e=0,r=0;r<t.length;r++)e+=t[r];return e/t.length}function l(t,e){for(var r=0,n=0;n<t.length;n++){var o=t[n]-e;r+=o*o}return Math.sqrt(r/t.length)}function p(t){for(var e=c(t),r=t.length,n=0,o=0,a=0;a<r;a++){var i=t[a]-e;n+=Math.pow(i,2),o+=Math.pow(i,4)}return 1/r*o/Math.pow(1/r*n,2)}function h(t){for(var e=c(t),r=t.length,n=0,o=0,a=0;a<r;a++){var i=t[a]-e;n+=Math.pow(i,2),o+=Math.pow(i,3)}return 1/r*o/Math.pow(1/(r-1)*n,1.5)}function f(t,e,n){if(void 0===n&&(n=r.TEST_EPSILON),t instanceof s.NDArray||e instanceof s.NDArray){if(t instanceof s.NDArray&&e instanceof s.NDArray){if(t.dtype!==e.dtype)throw new Error("Arrays are of different type actual: "+t.dtype+" vs expected: "+e.dtype+".");if(!u.arraysEqual(t.shape,e.shape))throw new Error("Arrays are of different shape actual: "+t.shape+" vs expected: "+e.shape+".")}}else{var o=t.constructor.name,a=e.constructor.name;if(o!==a)throw new Error("Arrays are of different type actual: "+o+" vs expected: "+a)}var i,c;if(i=t instanceof s.NDArray?t.dataSync():t,c=e instanceof s.NDArray?e.dataSync():e,i.length!==c.length)throw new Error("Arrays have different lengths actual: "+i.length+" vs expected: "+c.length+".\nActual:   "+i+".\nExpected: "+c+".");for(var l=0;l<c.length;++l){var p=i[l],h=c[l];if(!m(p,Number(h),n))throw new Error("Arrays differ: actual["+l+"] = "+p+", expected["+l+"] = "+h+".\nActual:   "+i+".\nExpected: "+c+".")}}function d(t,e,n){if(void 0===n&&(n=r.TEST_EPSILON),!m(t,e,n))throw new Error("Numbers differ: actual === "+t+", expected === "+e)}function m(t,e,r){return!(!isNaN(t)||!isNaN(e))||!(isNaN(t)||isNaN(e)||Math.abs(t-e)>r)}function g(t,e,r,n){null!=n?n.forEach(function(n){var o=t+" "+JSON.stringify(n);r(o,e,n)}):r(t,e)}function v(t){return function(e){var r=t();r instanceof Promise?r.then(e,function(t){fail(t),e()}):e()}}r.TEST_EPSILON=.01,r.mean=c,r.standardDeviation=l,r.kurtosis=p,r.skewness=h,r.jarqueBeraNormalityTest=function(t){var e,r=(e=t instanceof s.NDArray?t.dataSync():t).length,n=h(e),o=p(e),a=r/6*(Math.pow(n,2)+.25*Math.pow(o-3,2));if(a>5.991)throw new Error("Invalid p-value for JB: "+a)},r.expectArrayInMeanStdRange=function(t,e,n,o){var a;void 0===o&&(o=r.TEST_EPSILON);var i=c(a=t instanceof s.NDArray?t.dataSync():t);d(i,e,o),d(l(a,i),n,o)},r.expectArraysClose=f,r.expectArraysEqual=function(t,e){return f(t,e,0)},r.expectNumbersClose=d,r.expectValuesInRange=function(t,e,r){var n;n=t instanceof s.NDArray?t.dataSync():t;for(var o=0;o<n.length;o++)if(n[o]<e||n[o]>r)throw new Error("Value out of range:"+n[o]+" low: "+e+", high: "+r)},r.randomArrayInRange=function(t,e,r){for(var n=new Float32Array(t),o=r-e,a=0;a<t;++a)n[a]=Math.random()*o+e;return n},r.makeIdentity=function(t){for(var e=new Float32Array(t*t),r=0;r<t;++r)e[r*t+r]=1;return e},r.cpuMultiplyMatrix=function(t,e,r,n,o,a){for(var i=new Float32Array(e*a),s=0;s<e;++s)for(var u=s*r,c=s*a,l=0;l<a;++l){for(var p=0,h=0;h<r;++h)p+=t[u+h]*n[h*a+l];i[c+l]=p}return i},r.cpuDotProduct=function(t,e){if(t.length!==e.length)throw new Error("cpuDotProduct: incompatible vectors.");for(var r=0,n=0;n<t.length;++n)r+=t[n]*e[n];return r},r.describeMathCPU=function(t,e,r){g("CPU: math."+t,e,function(t,e,r){return x(t,e,function(){return new i.NDArrayMath(new o.MathBackendCPU,!0)},r)},r)},r.describeMathGPU=function(t,e,r){g("WebGL: math."+t,e,function(t,e,r){return x(t,e,function(){return new i.NDArrayMath(new a.MathBackendWebGL,!0)},r)},r)},r.describeCustom=function(t,e,r,n,o){g(t,[e],function(t,e,r){return w(t,e,r,n,o)},r)};var y=function(t,e){it(t,v(e))},_=function(t,e){fit(t,v(e))},b=function(t,e){xit(t,v(e))};function x(t,e,r,o){var a;w(t,e,o,function(){a=r(),n.ENV.setMath(a),a.startScope()},function(){a.endScope(null),a.dispose()},function(t,e){y(t,function(){return e(a)})},function(t,e){_(t,function(){return e(a)})},function(t,e){b(t,function(){return e(a)})})}function w(t,e,r,i,s,u,c,l){void 0===u&&(u=y),void 0===c&&(c=_),void 0===l&&(l=b),describe(t,function(){beforeEach(function(){null!=r&&(n.ENV.setFeatures(r),n.ENV.addCustomBackend("webgl",function(){return new a.MathBackendWebGL}),n.ENV.addCustomBackend("cpu",function(){return new o.MathBackendCPU})),null!=i&&i()}),afterEach(function(){null!=s&&s(),null!=r&&n.ENV.reset()}),e.forEach(function(t){return t(u,c,l)})})}r.executeMathTests=x,r.assertIsNan=function(t,e){if(!u.isValNaN(t,e))throw new Error("Value "+t+" does not represent NaN for dtype "+e)}},{"./environment":336,"./math/backends/backend_cpu":375,"./math/backends/backend_webgl":377,"./math/math":429,"./math/ndarray":431,"./util":448}],448:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./math/ndarray");function o(t){for(var e=t.length,r=0,n=0;e>0;)n=Math.random()*e|0,r=t[--e],t[e]=t[n],t[n]=r}function a(t,e){if(!t)throw new Error(e)}function i(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function s(t){if("float32"===t)return r.NAN_FLOAT32;if("int32"===t)return r.NAN_INT32;if("bool"===t)return r.NAN_BOOL;throw new Error("Unknown dtype "+t)}function u(t,e){if(isNaN(t))return!0;if("float32"===e)return!1;if("int32"===e)return t===r.NAN_INT32;if("bool"===e)return t===r.NAN_BOOL;throw new Error("Unknown dtype "+e)}r.shuffle=o,r.clamp=function(t,e,r){return Math.max(t,Math.min(e,r))},r.randUniform=function(t,e){return Math.random()*(e-t)+t},r.distSquared=function(t,e){for(var r=0,n=0;n<t.length;n++){var o=Number(t[n])-Number(e[n]);r+=o*o}return r},r.assert=a,r.assertShapesMatch=function(t,e,r){void 0===r&&(r=""),a(i(t,e),r+"Shapes "+t+" and "+e+" must match")},r.assertTypesMatch=function(t,e){a(t.dtype===e.dtype,"The dtypes of the first ("+t.dtype+") and second ("+e.dtype+") input must match")},r.flatten=function t(e,r){if(void 0===r&&(r=[]),Array.isArray(e))for(var n=0;n<e.length;++n)t(e[n],r);else r.push(e);return r},r.inferShape=function(t){for(var e=[];t instanceof Array;)e.push(t.length),t=t[0];return e},r.sizeFromShape=function(t){if(0===t.length)return 1;for(var e=t[0],r=1;r<t.length;r++)e*=t[r];return e},r.isScalarShape=function(t){return 0===t.length},r.arraysEqual=i,r.isInt=function(t){return t%1==0},r.tanh=function(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)},r.sizeToSquarishShape=function(t){for(var e=Math.floor(Math.sqrt(t));e>1;--e)if(t%e==0)return[e,t/e];return[1,t]},r.createShuffledIndices=function(t){for(var e=new Uint32Array(t),r=0;r<t;++r)e[r]=r;return o(e),e},r.rightPad=function(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)},r.repeatedTry=function(t,e,r){return void 0===e&&(e=function(t){return 0}),new Promise(function(n,o){var a=0,i=function(){if(t())n();else{var s=e(++a);null!=r&&a>=r?o():setTimeout(i,s)}};setTimeout(i,0)})},r.getQueryParams=function(t){var e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(t){for(var r,n,o,a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];return r=e,n=a[0],o=a[1],r[decodeURIComponent(n)]=decodeURIComponent(o||""),a.join("=")}),e},r.inferFromImplicitShape=function(t,e){for(var r=1,n=-1,o=0;o<t.length;++o)if(t[o]>0)r*=t[o];else if(-1===t[o]){if(-1!==n)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+n+" and dim "+o);n=o}else if(t[o]<=0)throw Error("Shapes can not be <= 0. Found "+t[o]+" at dim "+o);if(-1===n){if(e>0&&e!==r)throw Error("Size ("+e+") must match the product of shape "+t);return t}if(e%r!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+r);var a=t.slice();return a[n]=e/r,a},r.NAN_INT32=1<<31,r.NAN_BOOL=255,r.NAN_FLOAT32=NaN,r.getNaN=s,r.isValNaN=u,r.squeezeShape=function(t,e){for(var r=[],n=[],o=0,a=0;a<t.length;++a){if(void 0!==e){if(e[o]===a&&t[a]>1)throw new Error("axis "+a+" is not 1");(void 0===e[o]||e[o]>a)&&1===t[a]&&(r.push(t[a]),n.push(a)),e[o]<=a&&o++}t[a]>1&&(r.push(t[a]),n.push(a))}return{newShape:r,keptDims:n}},r.getTypedArrayFromDType=function(t,e){var r=null;if(null==t||"float32"===t)r=new Float32Array(e);else if("int32"===t)r=new Int32Array(e);else{if("bool"!==t)throw new Error("Unknown data type "+t);r=new Uint8Array(e)}return r},r.isNDArrayInList=function(t,e){for(var r=0;r<e.length;r++)if(e[r].id===t.id)return!0;return!1},r.checkForNaN=function(t,e,r){for(var n=0;n<t.length;n++)if(u(t[n],e))throw Error("The result of the last math."+r+" has NaNs.")},r.flattenNameArrayMap=function(t,e){var r=[];if(t instanceof n.NDArray)r.push(t);else for(var o=t,a=0;a<e.length;a++)r.push(o[e[a]]);return r},r.unflattenToNameArrayMap=function(t,e){if(t.length!==e.length)throw new Error("Cannot unflatten NDArray[], keys and arrays are not of same length.");for(var r={},n=0;n<t.length;n++)r[t[n]]=e[n];return r},r.hasEncodingLoss=function(t,e){return!("float32"===e||"int32"===e&&"float32"!==t||"bool"===e&&"bool"===t)},r.nextFrame=function(){return new Promise(function(t){return requestAnimationFrame(function(){return t()})})},r.copyTypedArray=function(t,e){if(null==e||"float32"===e)return new Float32Array(t);if("int32"===e){for(var r=new Int32Array(t.length),n=0;n<r.length;++n)u(a=t[n],"int32")?r[n]=s("int32"):r[n]=a;return r}if("bool"===e){var o=new Uint8Array(t.length);for(n=0;n<o.length;++n){var a;u(a=t[n],"bool")?o[n]=s("bool"):0!==Math.round(a)&&(o[n]=1)}return o}throw new Error("Unknown data type "+e)}},{"./math/ndarray":431}],449:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.version="0.4.2"},{}],450:[function(t,e,r){(function(t){!function(t){"use strict";var r,n=Object.prototype,o=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag",c="object"==typeof e,l=t.regeneratorRuntime;if(l)c&&(e.exports=l);else{(l=t.regeneratorRuntime=c?e.exports:{}).wrap=b;var p="suspendedStart",h="suspendedYield",f="executing",d="completed",m={},g={};g[i]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(M([])));y&&y!==n&&o.call(y,i)&&(g=y);var _=k.prototype=w.prototype=Object.create(g);E.prototype=_.constructor=k,k.constructor=E,k[u]=E.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(_),t},l.awrap=function(t){return{__await:t}},S(A.prototype),A.prototype[s]=function(){return this},l.AsyncIterator=A,l.async=function(t,e,r,n){var o=new A(b(t,e,r,n));return l.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},S(_),_[u]="Generator",_[i]=function(){return this},_.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},l.values=M,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(N),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return s.type="throw",s.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:M(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),m}}}function b(t,e,r,n){var o,a,i,s,u=e&&e.prototype instanceof w?e:w,c=Object.create(u.prototype),l=new D(n||[]);return c._invoke=(o=t,a=r,i=l,s=p,function(t,e){if(s===f)throw new Error("Generator is already running");if(s===d){if("throw"===t)throw e;return R()}for(i.method=t,i.arg=e;;){var r=i.delegate;if(r){var n=O(r,i);if(n){if(n===m)continue;return n}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(s===p)throw s=d,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);s=f;var u=x(o,a,i);if("normal"===u.type){if(s=i.done?d:h,u.arg===m)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(s=d,i.method="throw",i.arg=u.arg)}}),c}function x(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function w(){}function E(){}function k(){}function S(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function A(e){function r(t,n,a,i){var s=x(e[t],e,n);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&o.call(c,"__await")?Promise.resolve(c.__await).then(function(t){r("next",t,a,i)},function(t){r("throw",t,a,i)}):Promise.resolve(c).then(function(t){u.value=t,a(u)},i)}i(s.arg)}var n;"object"==typeof t.process&&t.process.domain&&(r=t.process.domain.bind(r)),this._invoke=function(t,e){function o(){return new Promise(function(n,o){r(t,e,n,o)})}return n=n?n.then(o,o):o()}}function O(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,O(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=x(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,m;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,m):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function M(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(o.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:R}}function R(){return{value:r,done:!0}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],451:[function(t,e,r){var n=t("./lib/alea"),o=t("./lib/xor128"),a=t("./lib/xorwow"),i=t("./lib/xorshift7"),s=t("./lib/xor4096"),u=t("./lib/tychei"),c=t("./seedrandom");c.alea=n,c.xor128=o,c.xorwow=a,c.xorshift7=i,c.xor4096=s,c.tychei=u,e.exports=c},{"./lib/alea":452,"./lib/tychei":453,"./lib/xor128":454,"./lib/xor4096":455,"./lib/xorshift7":456,"./lib/xorwow":457,"./seedrandom":458}],452:[function(t,e,r){!function(t,e,r){function n(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function o(t,e){var r=new function(t){var e,r=this,n=(e=4022871197,function(t){t=t.toString();for(var r=0;r<t.length;r++){var n=.02519603282416938*(e+=t.charCodeAt(r));n-=e=n>>>0,e=(n*=e)>>>0,e+=4294967296*(n-=e)}return 2.3283064365386963e-10*(e>>>0)});r.next=function(){var t=2091639*r.s0+2.3283064365386963e-10*r.c;return r.s0=r.s1,r.s1=r.s2,r.s2=t-(r.c=0|t)},r.c=1,r.s0=n(" "),r.s1=n(" "),r.s2=n(" "),r.s0-=n(t),r.s0<0&&(r.s0+=1),r.s1-=n(t),r.s1<0&&(r.s1+=1),r.s2-=n(t),r.s2<0&&(r.s2+=1),n=null}(t),o=e&&e.state,a=r.next;return a.int32=function(){return 4294967296*r.next()|0},a.double=function(){return a()+1.1102230246251565e-16*(2097152*a()|0)},a.quick=a,o&&("object"==typeof o&&n(o,r),a.state=function(){return n(r,{})}),a}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.alea=o}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],453:[function(t,e,r){!function(t,e,r){function n(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function o(t,e){var r=new function(t){var e=this,r="";e.next=function(){var t=e.b,r=e.c,n=e.d,o=e.a;return t=t<<25^t>>>7^r,r=r-n|0,n=n<<24^n>>>8^o,o=o-t|0,e.b=t=t<<20^t>>>12^r,e.c=r=r-n|0,e.d=n<<16^r>>>16^o,e.a=o-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):r+=t;for(var n=0;n<r.length+20;n++)e.b^=0|r.charCodeAt(n),e.next()}(t),o=e&&e.state,a=function(){return(r.next()>>>0)/4294967296};return a.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=r.next,a.quick=a,o&&("object"==typeof o&&n(o,r),a.state=function(){return n(r,{})}),a}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],454:[function(t,e,r){!function(t,e,r){function n(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function o(t,e){var r=new function(t){var e=this,r="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:r+=t;for(var n=0;n<r.length+64;n++)e.x^=0|r.charCodeAt(n),e.next()}(t),o=e&&e.state,a=function(){return(r.next()>>>0)/4294967296};return a.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=r.next,a.quick=a,o&&("object"==typeof o&&n(o,r),a.state=function(){return n(r,{})}),a}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],455:[function(t,e,r){!function(t,e,r){function n(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function o(t,e){null==t&&(t=+new Date);var r=new function(t){var e=this;e.next=function(){var t,r,n=e.w,o=e.X,a=e.i;return e.w=n=n+1640531527|0,r=o[a+34&127],t=o[a=a+1&127],r^=r<<13,t^=t<<17,r^=r>>>15,t^=t>>>12,r=o[a]=r^t,e.i=a,r+(n^n>>>16)|0},function(t,e){var r,n,o,a,i,s=[],u=128;for(e===(0|e)?(n=e,e=null):(e+="\0",n=0,u=Math.max(u,e.length)),o=0,a=-32;a<u;++a)e&&(n^=e.charCodeAt((a+32)%e.length)),0===a&&(i=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,a>=0&&(i=i+1640531527|0,o=0==(r=s[127&a]^=n+i)?o+1:0);for(o>=128&&(s[127&(e&&e.length||0)]=-1),o=127,a=512;a>0;--a)n=s[o+34&127],r=s[o=o+1&127],n^=n<<13,r^=r<<17,n^=n>>>15,r^=r>>>12,s[o]=n^r;t.w=i,t.X=s,t.i=o}(e,t)}(t),o=e&&e.state,a=function(){return(r.next()>>>0)/4294967296};return a.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=r.next,a.quick=a,o&&(o.X&&n(o,r),a.state=function(){return n(r,{})}),a}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],456:[function(t,e,r){!function(t,e,r){function n(t,e){return e.x=t.x.slice(),e.i=t.i,e}function o(t,e){null==t&&(t=+new Date);var r=new function(t){var e=this;e.next=function(){var t,r,n=e.x,o=e.i;return t=n[o],r=(t^=t>>>7)^t<<24,r^=(t=n[o+1&7])^t>>>10,r^=(t=n[o+3&7])^t>>>3,r^=(t=n[o+4&7])^t<<7,t=n[o+7&7],r^=(t^=t<<13)^t<<9,n[o]=r,e.i=o+1&7,r},function(t,e){var r,n=[];if(e===(0|e))n[0]=e;else for(e=""+e,r=0;r<e.length;++r)n[7&r]=n[7&r]<<15^e.charCodeAt(r)+n[r+1&7]<<13;for(;n.length<8;)n.push(0);for(r=0;r<8&&0===n[r];++r);for(8==r?n[7]=-1:n[r],t.x=n,t.i=0,r=256;r>0;--r)t.next()}(e,t)}(t),o=e&&e.state,a=function(){return(r.next()>>>0)/4294967296};return a.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=r.next,a.quick=a,o&&(o.x&&n(o,r),a.state=function(){return n(r,{})}),a}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],457:[function(t,e,r){!function(t,e,r){function n(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function o(t,e){var r=new function(t){var e=this,r="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:r+=t;for(var n=0;n<r.length+64;n++)e.x^=0|r.charCodeAt(n),n==r.length&&(e.d=e.x<<10^e.x>>>4),e.next()}(t),o=e&&e.state,a=function(){return(r.next()>>>0)/4294967296};return a.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=r.next,a.quick=a,o&&("object"==typeof o&&n(o,r),a.state=function(){return n(r,{})}),a}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],458:[function(t,e,r){!function(r,n){var o,a=this,i=256,s=6,u="random",c=n.pow(i,s),l=n.pow(2,52),p=2*l,h=i-1;function f(t,e,f){var v=[],y=m(function t(e,r){var n,o=[],a=typeof e;if(r&&"object"==a)for(n in e)try{o.push(t(e[n],r-1))}catch(t){}return o.length?o:"string"==a?e:e+"\0"}((e=1==e?{entropy:!0}:e||{}).entropy?[t,g(r)]:null==t?function(){try{var t;return o&&(t=o.randomBytes)?t=t(i):(t=new Uint8Array(i),(a.crypto||a.msCrypto).getRandomValues(t)),g(t)}catch(t){var e=a.navigator,n=e&&e.plugins;return[+new Date,a,n,a.screen,g(r)]}}():t,3),v),_=new function(t){var e,r=t.length,n=this,o=0,a=n.i=n.j=0,s=n.S=[];r||(t=[r++]);for(;o<i;)s[o]=o++;for(o=0;o<i;o++)s[o]=s[a=h&a+t[o%r]+(e=s[o])],s[a]=e;(n.g=function(t){for(var e,r=0,o=n.i,a=n.j,s=n.S;t--;)e=s[o=h&o+1],r=r*i+s[h&(s[o]=s[a=h&a+e])+(s[a]=e)];return n.i=o,n.j=a,r})(i)}(v),b=function(){for(var t=_.g(s),e=c,r=0;t<l;)t=(t+r)*i,e*=i,r=_.g(1);for(;t>=p;)t/=2,e/=2,r>>>=1;return(t+r)/e};return b.int32=function(){return 0|_.g(4)},b.quick=function(){return _.g(4)/4294967296},b.double=b,m(g(_.S),r),(e.pass||f||function(t,e,r,o){return o&&(o.S&&d(o,_),t.state=function(){return d(_,{})}),r?(n[u]=t,e):t})(b,y,"global"in e?e.global:this==n,e.state)}function d(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function m(t,e){for(var r,n=t+"",o=0;o<n.length;)e[h&o]=h&(r^=19*e[h&o])+n.charCodeAt(o++);return g(e)}function g(t){return String.fromCharCode.apply(0,t)}if(n["seed"+u]=f,m(n.random(),r),"object"==typeof e&&e.exports){e.exports=f;try{o=t("crypto")}catch(t){}}else"function"==typeof define&&define.amd&&define(function(){return f})}([],Math)},{crypto:3}]},{},[1]);